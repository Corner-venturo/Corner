{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/layout/responsive-header.tsx"],"sourcesContent":["'use client';\n\nimport { useState, memo } from 'react';\nimport { useAuthStore } from '@/stores/auth-store';\nimport { cn } from '@/lib/utils';\n\ninterface ResponsiveHeaderProps {\n  title: string;\n  breadcrumb?: { label: string; href: string }[];\n  tabs?: {\n    value: string;\n    label: string;\n    icon?: any;\n  }[];\n  activeTab?: string;\n  onTabChange?: (value: string) => void;\n  onAdd?: () => void;\n  addLabel?: string;\n  children?: React.ReactNode;\n  actions?: React.ReactNode;\n  showBackButton?: boolean;\n  onBack?: () => void;\n  // 搜尋功能\n  showSearch?: boolean;\n  searchTerm?: string;\n  onSearchChange?: (term: string) => void;\n  searchPlaceholder?: string;\n}\n\nexport const ResponsiveHeader = memo(function ResponsiveHeader(props: ResponsiveHeaderProps) {\n  const { sidebarCollapsed } = useAuthStore();\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n\n  return (\n    <div className={cn(\n      'fixed top-0 right-0 h-[72px] bg-background z-40 flex items-center justify-between px-6',\n      'left-16'\n    )}>\n      {/* 分割線 */}\n      <div className=\"absolute bottom-0 left-0 right-0\" style={{ marginLeft: '24px', marginRight: '24px', borderTop: '1px solid var(--border)', height: '1px' }}></div>\n      {/* 左側 - 返回按鈕和主標題 */}\n      <div className=\"flex items-center gap-3\">\n        {props.showBackButton && (\n          <button\n            onClick={props.onBack}\n            className=\"text-morandi-secondary hover:text-morandi-primary transition-colors\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n          </button>\n        )}\n        <h1 className=\"text-base font-bold text-morandi-primary\">{props.title}</h1>\n      </div>\n\n      {/* 右側區域 - 功能、標籤頁和操作按鈕 - 統一無空白設計 */}\n      <div className=\"flex items-center\">\n        {/* 搜尋功能 - 最左邊 */}\n        {props.showSearch && (\n          <div className=\"flex items-center mr-4\">\n            {!isSearchOpen ? (\n              <button\n                onClick={() => setIsSearchOpen(true)}\n                className=\"p-2 text-morandi-secondary hover:text-morandi-primary transition-colors\"\n                title=\"搜尋\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                </svg>\n              </button>\n            ) : (\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"text\"\n                  value={props.searchTerm || ''}\n                  onChange={(e) => props.onSearchChange?.(e.target.value)}\n                  placeholder={props.searchPlaceholder || '搜尋...'}\n                  className=\"w-48 px-3 py-1 text-sm border border-border rounded-md focus:outline-none focus:ring-1 focus:ring-morandi-primary\"\n                  autoFocus\n                  onBlur={() => {\n                    if (!props.searchTerm) {\n                      setIsSearchOpen(false);\n                    }\n                  }}\n                />\n                <button\n                  onClick={() => {\n                    props.onSearchChange?.('');\n                    setIsSearchOpen(false);\n                  }}\n                  className=\"p-1 text-morandi-secondary hover:text-morandi-primary transition-colors\"\n                  title=\"清除搜尋\"\n                >\n                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* 功能區域 */}\n        {props.children && (\n          <div className=\"flex items-center mr-6\">\n            {props.children}\n          </div>\n        )}\n\n        {/* 自定義操作區域 */}\n        {props.actions && (\n          <div className=\"mr-3\">\n            {props.actions}\n          </div>\n        )}\n\n        {/* 標籤頁和操作按鈕緊密排列 */}\n        <div className=\"flex items-center\">\n          {/* 標籤頁 */}\n          {props.tabs && props.tabs.length > 0 && (\n            <div className=\"flex items-center space-x-1\">\n              {props.tabs.map((tab) => (\n                <button\n                  key={tab.value}\n                  onClick={() => props.onTabChange?.(tab.value)}\n                  className={cn(\n                    'relative px-3 py-2 text-sm font-medium transition-colors',\n                    'text-morandi-secondary hover:text-morandi-primary',\n                    props.activeTab === tab.value\n                      ? 'text-morandi-primary after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-morandi-gold'\n                      : ''\n                  )}\n                >\n                  {tab.label}\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* 操作按鈕緊接在標籤頁後面 */}\n          {props.onAdd && (\n            <button\n              onClick={props.onAdd}\n              data-create-box\n              className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center transition-colors ml-3\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n              </svg>\n              {props.addLabel || '新增'}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n});"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/lib/offline/unified-types.ts"],"sourcesContent":["/**\n * 🎯 Venturo v4.0 - 統一資料模型\n *\n * 規範：\n * - 前端統一使用 camelCase\n * - Supabase 使用 snake_case\n * - 所有轉換在此檔案統一處理\n */\n\n// ===========================\n// 核心基礎類型\n// ===========================\n\n/** 時間戳記 */\nexport interface Timestamps {\n  createdAt: string;\n  updatedAt: string;\n}\n\n/** 資料同步狀態 */\nexport interface SyncMetadata {\n  /** 本地唯一 ID (UUID) */\n  id: string;\n  /** 是否已同步到 Supabase */\n  synced: boolean;\n  /** 最後同步時間 */\n  lastSyncedAt?: string;\n  /** 同步失敗原因 */\n  syncError?: string;\n  /** 資料版本號 (用於衝突偵測) */\n  version: number;\n}\n\n// ===========================\n// 團體資料模型\n// ===========================\n\nexport interface Tour extends Timestamps, SyncMetadata {\n  /** 團號 (注意：使用 code 不是 tourCode) */\n  code: string;\n  name: string;\n  destination: string;\n  startDate: string;\n  endDate: string;\n  days: number;\n  nights: number;\n  adultCount: number;\n  childCount: number;\n  infantCount: number;\n  status: 'planning' | 'confirmed' | 'completed' | 'cancelled';\n  totalCost: number;\n  totalRevenue: number;\n  profitMargin: number;\n  leadGuide?: string;\n  notes?: string;\n}\n\n// ===========================\n// 訂單資料模型\n// ===========================\n\nexport interface Order extends Timestamps, SyncMetadata {\n  orderNumber: string;\n  tourId: string;\n  customerId: string;\n  customerName: string;\n  customerPhone: string;\n  customerEmail?: string;\n  adultCount: number;\n  childCount: number;\n  infantCount: number;\n  totalAmount: number;\n  paidAmount: number;\n  status: 'pending' | 'confirmed' | 'paid' | 'cancelled';\n  paymentMethod?: 'cash' | 'transfer' | 'credit_card';\n  notes?: string;\n}\n\n// ===========================\n// 報價單資料模型\n// ===========================\n\nexport interface Quote extends Timestamps, SyncMetadata {\n  quoteNumber: string;\n  customerId?: string;\n  customerName: string;\n  customerEmail?: string;\n  customerPhone?: string;\n  destination: string;\n  startDate: string;\n  endDate: string;\n  days: number;\n  adultCount: number;\n  childCount: number;\n  infantCount: number;\n  totalCost: number;\n  profitMargin: number;\n  sellingPrice: number;\n  status: 'draft' | 'sent' | 'accepted' | 'rejected' | 'expired';\n  validUntil: string;\n  notes?: string;\n}\n\n// ===========================\n// 請款單資料模型\n// ===========================\n\nexport interface PaymentRequest extends Timestamps, SyncMetadata {\n  requestNumber: string;\n  tourId?: string;\n  supplierId?: string;\n  supplierName: string;\n  category: 'accommodation' | 'transport' | 'meals' | 'tickets' | 'guide' | 'other';\n  description: string;\n  amount: number;\n  dueDate: string;\n  status: 'pending' | 'processing' | 'approved' | 'paid' | 'rejected';\n  approvedBy?: string;\n  approvedAt?: string;\n  paidAt?: string;\n  paymentMethod?: 'cash' | 'transfer' | 'cheque';\n  receiptUrl?: string;\n  notes?: string;\n}\n\n// ===========================\n// 待辦事項資料模型\n// ===========================\n\nexport interface Todo extends Timestamps, SyncMetadata {\n  title: string;\n  description?: string;\n  priority: 1 | 2 | 3 | 4 | 5;\n  deadline?: string;\n  completed: boolean;\n  completedAt?: string;\n  assigneeId?: string;\n  assigneeName?: string;\n  relatedType?: 'tour' | 'order' | 'quote' | 'payment';\n  relatedId?: string;\n  tags?: string[];\n}\n\n// ===========================\n// 供應商資料模型\n// ===========================\n\nexport interface Supplier extends Timestamps, SyncMetadata {\n  name: string;\n  category: 'hotel' | 'restaurant' | 'transport' | 'attraction' | 'insurance' | 'other';\n  contactPerson: string;\n  phone: string;\n  email?: string;\n  address?: string;\n  website?: string;\n  taxId?: string;\n  bankAccount?: string;\n  paymentTerms?: string;\n  rating?: number;\n  status: 'active' | 'inactive' | 'suspended';\n  notes?: string;\n}\n\n// ===========================\n// 客戶資料模型\n// ===========================\n\nexport interface Customer extends Timestamps, SyncMetadata {\n  name: string;\n  phone: string;\n  email?: string;\n  idNumber?: string;\n  birthday?: string;\n  address?: string;\n  emergencyContact?: {\n    name: string;\n    relationship: string;\n    phone: string;\n  };\n  vipLevel?: number;\n  totalOrders?: number;\n  totalSpent?: number;\n  source?: 'website' | 'referral' | 'ads' | 'walk_in' | 'other';\n  notes?: string;\n}\n\n// ===========================\n// Supabase ↔ Frontend 轉換器\n// ===========================\n\n/** Supabase 資料庫格式 (snake_case) */\nexport type SupabaseRow<T> = {\n  [K in keyof T as K extends string\n    ? (K extends 'createdAt' ? 'created_at' :\n       K extends 'updatedAt' ? 'updated_at' :\n       K extends 'syncedAt' ? 'synced_at' :\n       K extends 'lastSyncedAt' ? 'last_synced_at' :\n       K extends 'syncError' ? 'sync_error' :\n       K extends 'tourId' ? 'tour_id' :\n       K extends 'customerId' ? 'customer_id' :\n       K extends 'supplierId' ? 'supplier_id' :\n       K extends 'customerName' ? 'customer_name' :\n       K extends 'customerPhone' ? 'customer_phone' :\n       K extends 'customerEmail' ? 'customer_email' :\n       K extends 'supplierName' ? 'supplier_name' :\n       K extends 'adultCount' ? 'adult_count' :\n       K extends 'childCount' ? 'child_count' :\n       K extends 'infantCount' ? 'infant_count' :\n       K extends 'totalAmount' ? 'total_amount' :\n       K extends 'totalCost' ? 'total_cost' :\n       K extends 'totalRevenue' ? 'total_revenue' :\n       K extends 'totalOrders' ? 'total_orders' :\n       K extends 'totalSpent' ? 'total_spent' :\n       K extends 'paidAmount' ? 'paid_amount' :\n       K extends 'profitMargin' ? 'profit_margin' :\n       K extends 'sellingPrice' ? 'selling_price' :\n       K extends 'orderNumber' ? 'order_number' :\n       K extends 'quoteNumber' ? 'quote_number' :\n       K extends 'requestNumber' ? 'request_number' :\n       K extends 'startDate' ? 'start_date' :\n       K extends 'endDate' ? 'end_date' :\n       K extends 'dueDate' ? 'due_date' :\n       K extends 'validUntil' ? 'valid_until' :\n       K extends 'completedAt' ? 'completed_at' :\n       K extends 'approvedBy' ? 'approved_by' :\n       K extends 'approvedAt' ? 'approved_at' :\n       K extends 'paidAt' ? 'paid_at' :\n       K extends 'paymentMethod' ? 'payment_method' :\n       K extends 'receiptUrl' ? 'receipt_url' :\n       K extends 'leadGuide' ? 'lead_guide' :\n       K extends 'contactPerson' ? 'contact_person' :\n       K extends 'taxId' ? 'tax_id' :\n       K extends 'bankAccount' ? 'bank_account' :\n       K extends 'paymentTerms' ? 'payment_terms' :\n       K extends 'idNumber' ? 'id_number' :\n       K extends 'emergencyContact' ? 'emergency_contact' :\n       K extends 'vipLevel' ? 'vip_level' :\n       K extends 'assigneeId' ? 'assignee_id' :\n       K extends 'assigneeName' ? 'assignee_name' :\n       K extends 'relatedType' ? 'related_type' :\n       K extends 'relatedId' ? 'related_id' :\n       string)\n    : never]: T[K];\n};\n\n/** Frontend → Supabase 轉換 */\nexport function toSupabase<T extends Record<string, any>>(data: T): SupabaseRow<T> {\n  const result: any = {};\n\n  for (const [key, value] of Object.entries(data)) {\n    // 轉換 key 為 snake_case\n    const snakeKey = key.replace(/([A-Z])/g, '_$1').toLowerCase();\n    result[snakeKey] = value;\n  }\n\n  return result;\n}\n\n/** Supabase → Frontend 轉換 */\nexport function fromSupabase<T>(data: any): T {\n  const result: any = {};\n\n  for (const [key, value] of Object.entries(data)) {\n    // 轉換 key 為 camelCase\n    const camelKey = key.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n    result[camelKey] = value;\n  }\n\n  return result as T;\n}\n\n/** 批次轉換：Frontend → Supabase */\nexport function toSupabaseBatch<T extends Record<string, any>>(data: T[]): SupabaseRow<T>[] {\n  return data.map(item => toSupabase(item));\n}\n\n/** 批次轉換：Supabase → Frontend */\nexport function fromSupabaseBatch<T>(data: any[]): T[] {\n  return data.map(item => fromSupabase<T>(item));\n}\n\n// ===========================\n// 資料驗證\n// ===========================\n\n/** 驗證必填欄位 */\nexport function validateRequired<T>(data: Partial<T>, requiredFields: (keyof T)[]): string[] {\n  const errors: string[] = [];\n\n  for (const field of requiredFields) {\n    if (data[field] === undefined || data[field] === null || data[field] === '') {\n      errors.push(`${String(field)} 為必填欄位`);\n    }\n  }\n\n  return errors;\n}\n\n/** 驗證 Email 格式 */\nexport function validateEmail(email?: string): boolean {\n  if (!email) return true; // optional field\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n}\n\n/** 驗證手機格式 (台灣) */\nexport function validatePhone(phone: string): boolean {\n  return /^09\\d{8}$/.test(phone.replace(/[-\\s]/g, ''));\n}\n\n/** 驗證日期格式 */\nexport function validateDate(date: string): boolean {\n  return /^\\d{4}-\\d{2}-\\d{2}$/.test(date) && !isNaN(Date.parse(date));\n}\n\n// ===========================\n// UUID 生成\n// ===========================\n\n/** 生成本地 UUID */\nexport function generateUUID(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n/** 生成帶前綴的 ID */\nexport function generatePrefixedId(prefix: string): string {\n  const timestamp = Date.now().toString(36);\n  const random = Math.random().toString(36).substring(2, 7);\n  return `${prefix}-${timestamp}-${random}`;\n}\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC,GAED,8BAA8B;AAC9B,SAAS;AACT,8BAA8B;AAE9B,SAAS;;;;;;;;;;;;;;;;;;;;;;AAyOF,SAAS,WAA0C,IAAO;IAC/D,MAAM,SAAc,CAAC;IAErB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,MAAO;QAC/C,sBAAsB;QACtB,MAAM,WAAW,IAAI,OAAO,CAAC,YAAY,OAAO,WAAW;QAC3D,MAAM,CAAC,SAAS,GAAG;IACrB;IAEA,OAAO;AACT;AAGO,SAAS,aAAgB,IAAS;IACvC,MAAM,SAAc,CAAC;IAErB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,MAAO;QAC/C,qBAAqB;QACrB,MAAM,WAAW,IAAI,OAAO,CAAC,aAAa,CAAC,GAAG,SAAW,OAAO,WAAW;QAC3E,MAAM,CAAC,SAAS,GAAG;IACrB;IAEA,OAAO;AACT;AAGO,SAAS,gBAA+C,IAAS;IACtE,OAAO,KAAK,GAAG,CAAC,CAAA,OAAQ,WAAW;AACrC;AAGO,SAAS,kBAAqB,IAAW;IAC9C,OAAO,KAAK,GAAG,CAAC,CAAA,OAAQ,aAAgB;AAC1C;AAOO,SAAS,iBAAoB,IAAgB,EAAE,cAA2B;IAC/E,MAAM,SAAmB,EAAE;IAE3B,KAAK,MAAM,SAAS,eAAgB;QAClC,IAAI,IAAI,CAAC,MAAM,KAAK,aAAa,IAAI,CAAC,MAAM,KAAK,QAAQ,IAAI,CAAC,MAAM,KAAK,IAAI;YAC3E,OAAO,IAAI,CAAC,GAAG,OAAO,OAAO,MAAM,CAAC;QACtC;IACF;IAEA,OAAO;AACT;AAGO,SAAS,cAAc,KAAc;IAC1C,IAAI,CAAC,OAAO,OAAO,MAAM,iBAAiB;IAC1C,OAAO,6BAA6B,IAAI,CAAC;AAC3C;AAGO,SAAS,cAAc,KAAa;IACzC,OAAO,YAAY,IAAI,CAAC,MAAM,OAAO,CAAC,UAAU;AAClD;AAGO,SAAS,aAAa,IAAY;IACvC,OAAO,sBAAsB,IAAI,CAAC,SAAS,CAAC,MAAM,KAAK,KAAK,CAAC;AAC/D;AAOO,SAAS;IACd,OAAO,uCAAuC,OAAO,CAAC,SAAS,CAAC;QAC9D,MAAM,IAAI,AAAC,KAAK,MAAM,KAAK,KAAM;QACjC,MAAM,IAAI,MAAM,MAAM,IAAI,AAAC,IAAI,MAAO;QACtC,OAAO,EAAE,QAAQ,CAAC;IACpB;AACF;AAGO,SAAS,mBAAmB,MAAc;IAC/C,MAAM,YAAY,KAAK,GAAG,GAAG,QAAQ,CAAC;IACtC,MAAM,SAAS,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG;IACvD,OAAO,GAAG,OAAO,CAAC,EAAE,UAAU,CAAC,EAAE,QAAQ;AAC3C","debugId":null}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/lib/offline/offline-database.ts"],"sourcesContent":["/**\n * 🗄️ Venturo v4.0 - IndexedDB 離線資料庫封裝\n *\n * 功能：\n * - 封裝 IndexedDB 操作\n * - 提供 CRUD 介面\n * - 支援批次操作\n * - 自動索引管理\n */\n\nimport { generateUUID } from './unified-types';\n\n// ===========================\n// 資料庫配置\n// ===========================\n\nexport const DB_CONFIG = {\n  name: 'VenturoOfflineDB',\n  version: 1,\n  stores: {\n    tours: {\n      keyPath: 'id',\n      indexes: ['code', 'status', 'startDate', 'synced']\n    },\n    orders: {\n      keyPath: 'id',\n      indexes: ['orderNumber', 'tourId', 'customerId', 'status', 'synced']\n    },\n    quotes: {\n      keyPath: 'id',\n      indexes: ['quoteNumber', 'customerId', 'status', 'synced']\n    },\n    paymentRequests: {\n      keyPath: 'id',\n      indexes: ['requestNumber', 'tourId', 'supplierId', 'status', 'synced']\n    },\n    todos: {\n      keyPath: 'id',\n      indexes: ['priority', 'completed', 'assigneeId', 'synced']\n    },\n    suppliers: {\n      keyPath: 'id',\n      indexes: ['name', 'category', 'status', 'synced']\n    },\n    customers: {\n      keyPath: 'id',\n      indexes: ['name', 'phone', 'email', 'synced']\n    },\n    syncQueue: {\n      keyPath: 'id',\n      indexes: ['operation', 'tableName', 'createdAt', 'status']\n    }\n  }\n} as const;\n\n// Export StoreName type\nexport type StoreName = keyof typeof DB_CONFIG.stores;\n\n// ===========================\n// IndexedDB 封裝類別\n// ===========================\n\nexport class OfflineDatabase {\n  private db: IDBDatabase | null = null;\n  private initPromise: Promise<void> | null = null;\n\n  constructor() {\n    this.initPromise = this.init();\n  }\n\n  /**\n   * 初始化資料庫\n   */\n  private async init(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(DB_CONFIG.name, DB_CONFIG.version);\n\n      request.onerror = () => {\n        console.error('❌ IndexedDB 初始化失敗:', request.error);\n        reject(request.error);\n      };\n\n      request.onsuccess = () => {\n        this.db = request.result;\n        console.log('✅ IndexedDB 初始化成功');\n        resolve();\n      };\n\n      request.onupgradeneeded = (event) => {\n        const db = (event.target as IDBOpenDBRequest).result;\n\n        // 建立所有 Object Stores 和索引\n        Object.entries(DB_CONFIG.stores).forEach(([storeName, config]) => {\n          if (!db.objectStoreNames.contains(storeName)) {\n            const objectStore = db.createObjectStore(storeName, {\n              keyPath: config.keyPath,\n              autoIncrement: false\n            });\n\n            // 建立索引\n            config.indexes.forEach(indexName => {\n              objectStore.createIndex(indexName, indexName, { unique: false });\n            });\n\n            console.log(`✅ 建立 ObjectStore: ${storeName}`);\n          }\n        });\n      };\n    });\n  }\n\n  /**\n   * 確保資料庫已初始化\n   */\n  private async ensureDB(): Promise<IDBDatabase> {\n    if (!this.db) {\n      await this.initPromise;\n    }\n    if (!this.db) {\n      throw new Error('資料庫未初始化');\n    }\n    return this.db;\n  }\n\n  /**\n   * 新增資料\n   */\n  async add<T extends { id: string }>(storeName: StoreName, data: T): Promise<T> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readwrite');\n      const objectStore = transaction.objectStore(storeName);\n\n      // 確保有 ID\n      if (!data.id) {\n        data.id = generateUUID();\n      }\n\n      const request = objectStore.add(data);\n\n      request.onsuccess = () => {\n        console.log(`✅ 新增資料到 ${storeName}:`, data.id);\n        resolve(data);\n      };\n\n      request.onerror = () => {\n        console.error(`❌ 新增資料失敗:`, request.error);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * 更新資料\n   */\n  async update<T extends { id: string }>(storeName: StoreName, data: T): Promise<T> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readwrite');\n      const objectStore = transaction.objectStore(storeName);\n      const request = objectStore.put(data);\n\n      request.onsuccess = () => {\n        console.log(`✅ 更新資料 ${storeName}:`, data.id);\n        resolve(data);\n      };\n\n      request.onerror = () => {\n        console.error(`❌ 更新資料失敗:`, request.error);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * 刪除資料\n   */\n  async delete(storeName: StoreName, id: string): Promise<void> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readwrite');\n      const objectStore = transaction.objectStore(storeName);\n      const request = objectStore.delete(id);\n\n      request.onsuccess = () => {\n        console.log(`✅ 刪除資料 ${storeName}:`, id);\n        resolve();\n      };\n\n      request.onerror = () => {\n        console.error(`❌ 刪除資料失敗:`, request.error);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * 取得單筆資料\n   */\n  async get<T>(storeName: StoreName, id: string): Promise<T | null> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readonly');\n      const objectStore = transaction.objectStore(storeName);\n      const request = objectStore.get(id);\n\n      request.onsuccess = () => {\n        resolve(request.result || null);\n      };\n\n      request.onerror = () => {\n        console.error(`❌ 讀取資料失敗:`, request.error);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * 取得所有資料\n   */\n  async getAll<T>(storeName: StoreName): Promise<T[]> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readonly');\n      const objectStore = transaction.objectStore(storeName);\n      const request = objectStore.getAll();\n\n      request.onsuccess = () => {\n        resolve(request.result || []);\n      };\n\n      request.onerror = () => {\n        console.error(`❌ 讀取所有資料失敗:`, request.error);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * 使用索引查詢\n   */\n  async getByIndex<T>(\n    storeName: StoreName,\n    indexName: string,\n    value: any\n  ): Promise<T[]> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readonly');\n      const objectStore = transaction.objectStore(storeName);\n      const index = objectStore.index(indexName);\n      const request = index.getAll(value);\n\n      request.onsuccess = () => {\n        resolve(request.result || []);\n      };\n\n      request.onerror = () => {\n        console.error(`❌ 索引查詢失敗:`, request.error);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * 批次新增\n   */\n  async addBatch<T extends { id: string }>(\n    storeName: StoreName,\n    data: T[]\n  ): Promise<T[]> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readwrite');\n      const objectStore = transaction.objectStore(storeName);\n      const results: T[] = [];\n\n      transaction.oncomplete = () => {\n        console.log(`✅ 批次新增 ${data.length} 筆資料到 ${storeName}`);\n        resolve(results);\n      };\n\n      transaction.onerror = () => {\n        console.error(`❌ 批次新增失敗:`, transaction.error);\n        reject(transaction.error);\n      };\n\n      data.forEach(item => {\n        if (!item.id) {\n          item.id = generateUUID();\n        }\n        objectStore.add(item);\n        results.push(item);\n      });\n    });\n  }\n\n  /**\n   * 清空 Store\n   */\n  async clear(storeName: StoreName): Promise<void> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readwrite');\n      const objectStore = transaction.objectStore(storeName);\n      const request = objectStore.clear();\n\n      request.onsuccess = () => {\n        console.log(`✅ 清空 ${storeName}`);\n        resolve();\n      };\n\n      request.onerror = () => {\n        console.error(`❌ 清空失敗:`, request.error);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * 取得資料數量\n   */\n  async count(storeName: StoreName): Promise<number> {\n    const db = await this.ensureDB();\n\n    return new Promise((resolve, reject) => {\n      const transaction = db.transaction(storeName, 'readonly');\n      const objectStore = transaction.objectStore(storeName);\n      const request = objectStore.count();\n\n      request.onsuccess = () => {\n        resolve(request.result);\n      };\n\n      request.onerror = () => {\n        console.error(`❌ 計數失敗:`, request.error);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * 查詢未同步的資料\n   */\n  async getUnsyncedData<T>(storeName: StoreName): Promise<T[]> {\n    return this.getByIndex<T>(storeName, 'synced', false);\n  }\n\n  /**\n   * 標記為已同步\n   */\n  async markAsSynced(storeName: StoreName, id: string): Promise<void> {\n    const data = await this.get<any>(storeName, id);\n    if (data) {\n      data.synced = true;\n      data.lastSyncedAt = new Date().toISOString();\n      await this.update(storeName, data);\n    }\n  }\n\n  /**\n   * 關閉資料庫連接\n   */\n  close(): void {\n    if (this.db) {\n      this.db.close();\n      this.db = null;\n      console.log('✅ IndexedDB 連接已關閉');\n    }\n  }\n}\n\n// ===========================\n// 單例模式\n// ===========================\n\nlet dbInstance: OfflineDatabase | null = null;\n\nexport function getOfflineDB(): OfflineDatabase {\n  if (!dbInstance) {\n    dbInstance = new OfflineDatabase();\n  }\n  return dbInstance;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/lib/offline/offline-manager.ts"],"sourcesContent":["/**\n * 🎯 Venturo v4.0 - 離線管理器\n *\n * 核心功能：\n * - 統一管理 localStorage + IndexedDB\n * - 自動選擇最佳儲存方案\n * - 管理同步佇列\n * - 提供統一的 CRUD 介面\n */\n\nimport { getOfflineDB } from './offline-database';\nimport type { StoreName } from './offline-database';\nimport { generateUUID, toSupabase, fromSupabase } from './unified-types';\n\n// Re-export StoreName for convenience\nexport type { StoreName } from './offline-database';\n\n// ===========================\n// 同步佇列項目\n// ===========================\n\nexport interface SyncQueueItem {\n  id: string;\n  operation: 'create' | 'update' | 'delete';\n  tableName: StoreName;\n  recordId: string;\n  data?: any;\n  createdAt: string;\n  status: 'pending' | 'processing' | 'completed' | 'failed';\n  retryCount: number;\n  error?: string;\n}\n\n// ===========================\n// 離線管理器類別\n// ===========================\n\nexport class OfflineManager {\n  private db = getOfflineDB();\n  private localStorage = window.localStorage;\n\n  /**\n   * 建立資料 (新增)\n   */\n  async create<T extends Record<string, any>>(\n    storeName: StoreName,\n    data: Partial<T>\n  ): Promise<T> {\n    const now = new Date().toISOString();\n    const record: any = {\n      ...data,\n      id: generateUUID(),\n      createdAt: now,\n      updatedAt: now,\n      synced: false,\n      lastSyncedAt: undefined,\n      syncError: undefined,\n      version: 1\n    };\n\n    // 儲存到 IndexedDB\n    await this.db.add(storeName, record);\n\n    // 加入同步佇列\n    await this.addToSyncQueue('create', storeName, record.id, record);\n\n    console.log(`✅ 建立資料:`, storeName, record.id);\n    return record as T;\n  }\n\n  /**\n   * 更新資料\n   */\n  async update<T extends Record<string, any>>(\n    storeName: StoreName,\n    id: string,\n    updates: Partial<T>\n  ): Promise<T> {\n    // 讀取現有資料\n    const existing = await this.db.get<any>(storeName, id);\n    if (!existing) {\n      throw new Error(`找不到資料: ${id}`);\n    }\n\n    // 合併更新\n    const updated: any = {\n      ...existing,\n      ...updates,\n      updatedAt: new Date().toISOString(),\n      synced: false,\n      version: (existing.version || 1) + 1\n    };\n\n    // 儲存到 IndexedDB\n    await this.db.update(storeName, updated);\n\n    // 加入同步佇列\n    await this.addToSyncQueue('update', storeName, id, updated);\n\n    console.log(`✅ 更新資料:`, storeName, id);\n    return updated as T;\n  }\n\n  /**\n   * 刪除資料\n   */\n  async delete(storeName: StoreName, id: string): Promise<void> {\n    // 從 IndexedDB 刪除\n    await this.db.delete(storeName, id);\n\n    // 加入同步佇列\n    await this.addToSyncQueue('delete', storeName, id);\n\n    console.log(`✅ 刪除資料:`, storeName, id);\n  }\n\n  /**\n   * 讀取單筆資料\n   */\n  async get<T>(storeName: StoreName, id: string): Promise<T | null> {\n    return await this.db.get<T>(storeName, id);\n  }\n\n  /**\n   * 讀取所有資料\n   */\n  async getAll<T>(storeName: StoreName): Promise<T[]> {\n    return await this.db.getAll<T>(storeName);\n  }\n\n  /**\n   * 使用索引查詢\n   */\n  async getByIndex<T>(\n    storeName: StoreName,\n    indexName: string,\n    value: any\n  ): Promise<T[]> {\n    return await this.db.getByIndex<T>(storeName, indexName, value);\n  }\n\n  /**\n   * 批次建立\n   */\n  async createBatch<T extends Record<string, any>>(\n    storeName: StoreName,\n    dataList: Partial<T>[]\n  ): Promise<T[]> {\n    const now = new Date().toISOString();\n    const records: any[] = dataList.map(data => ({\n      ...data,\n      id: generateUUID(),\n      createdAt: now,\n      updatedAt: now,\n      synced: false,\n      version: 1\n    }));\n\n    // 批次儲存到 IndexedDB\n    await this.db.addBatch(storeName, records);\n\n    // 批次加入同步佇列\n    for (const record of records) {\n      await this.addToSyncQueue('create', storeName, record.id, record);\n    }\n\n    console.log(`✅ 批次建立 ${records.length} 筆資料:`, storeName);\n    return records as T[];\n  }\n\n  /**\n   * 清空 Store\n   */\n  async clear(storeName: StoreName): Promise<void> {\n    await this.db.clear(storeName);\n    console.log(`✅ 清空:`, storeName);\n  }\n\n  /**\n   * 取得資料數量\n   */\n  async count(storeName: StoreName): Promise<number> {\n    return await this.db.count(storeName);\n  }\n\n  // ===========================\n  // 同步佇列管理\n  // ===========================\n\n  /**\n   * 加入同步佇列\n   */\n  private async addToSyncQueue(\n    operation: SyncQueueItem['operation'],\n    tableName: StoreName,\n    recordId: string,\n    data?: any\n  ): Promise<void> {\n    const queueItem: SyncQueueItem = {\n      id: generateUUID(),\n      operation,\n      tableName,\n      recordId,\n      data,\n      createdAt: new Date().toISOString(),\n      status: 'pending',\n      retryCount: 0\n    };\n\n    await this.db.add('syncQueue', queueItem);\n    console.log(`📤 加入同步佇列:`, operation, tableName, recordId);\n  }\n\n  /**\n   * 取得待同步項目\n   */\n  async getPendingSyncItems(): Promise<SyncQueueItem[]> {\n    return await this.db.getByIndex<SyncQueueItem>('syncQueue', 'status', 'pending');\n  }\n\n  /**\n   * 標記同步項目為完成\n   */\n  async markSyncCompleted(queueItemId: string): Promise<void> {\n    const item = await this.db.get<SyncQueueItem>('syncQueue', queueItemId);\n    if (item) {\n      item.status = 'completed';\n      await this.db.update('syncQueue', item);\n\n      // 同時標記原始資料為已同步\n      await this.db.markAsSynced(item.tableName, item.recordId);\n    }\n  }\n\n  /**\n   * 標記同步項目為失敗\n   */\n  async markSyncFailed(queueItemId: string, error: string): Promise<void> {\n    const item = await this.db.get<SyncQueueItem>('syncQueue', queueItemId);\n    if (item) {\n      item.status = 'failed';\n      item.error = error;\n      item.retryCount += 1;\n      await this.db.update('syncQueue', item);\n    }\n  }\n\n  /**\n   * 清空已完成的同步佇列\n   */\n  async clearCompletedSync(): Promise<void> {\n    const completed = await this.db.getByIndex<SyncQueueItem>(\n      'syncQueue',\n      'status',\n      'completed'\n    );\n\n    for (const item of completed) {\n      await this.db.delete('syncQueue', item.id);\n    }\n\n    console.log(`✅ 清空 ${completed.length} 筆已完成同步項目`);\n  }\n\n  // ===========================\n  // localStorage 輔助方法\n  // ===========================\n\n  /**\n   * 儲存設定到 localStorage\n   */\n  saveSetting(key: string, value: any): void {\n    try {\n      this.localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error('localStorage 儲存失敗:', error);\n    }\n  }\n\n  /**\n   * 從 localStorage 讀取設定\n   */\n  getSetting<T>(key: string, defaultValue?: T): T | null {\n    try {\n      const value = this.localStorage.getItem(key);\n      return value ? JSON.parse(value) : (defaultValue || null);\n    } catch (error) {\n      console.error('localStorage 讀取失敗:', error);\n      return defaultValue || null;\n    }\n  }\n\n  /**\n   * 刪除 localStorage 設定\n   */\n  removeSetting(key: string): void {\n    this.localStorage.removeItem(key);\n  }\n\n  // ===========================\n  // 狀態查詢\n  // ===========================\n\n  /**\n   * 取得離線資料統計\n   */\n  async getStats() {\n    const stats: Record<string, number> = {};\n\n    const storeNames: StoreName[] = [\n      'tours',\n      'orders',\n      'quotes',\n      'paymentRequests',\n      'todos',\n      'suppliers',\n      'customers'\n    ];\n\n    for (const storeName of storeNames) {\n      stats[storeName] = await this.db.count(storeName);\n    }\n\n    const pendingSync = await this.getPendingSyncItems();\n    stats.pendingSync = pendingSync.length;\n\n    return stats;\n  }\n\n  /**\n   * 檢查是否有未同步資料\n   */\n  async hasUnsyncedData(): Promise<boolean> {\n    const pending = await this.getPendingSyncItems();\n    return pending.length > 0;\n  }\n}\n\n// ===========================\n// 單例模式\n// ===========================\n\nlet offlineManager: OfflineManager | null = null;\n\nexport function getOfflineManager(): OfflineManager {\n  if (!offlineManager) {\n    offlineManager = new OfflineManager();\n  }\n  return offlineManager;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 965, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/lib/persistent-store.ts"],"sourcesContent":["/**\n * 🔄 Venturo v4.0 - 統一的 Store 持久化工具（重構版）\n *\n * 改用新的離線架構：\n * - 使用 unified-types.ts 統一資料模型\n * - 使用 offline-manager.ts 管理離線資料\n * - 自動處理 Supabase 同步\n */\n\nimport { getOfflineManager, StoreName } from '@/lib/offline/offline-manager';\nimport { generateUUID } from '@/lib/offline/unified-types';\n\ntype SetState<T> = (partial: T | Partial<T> | ((state: T) => T | Partial<T>)) => void;\ntype GetState<T> = () => T;\n\n// 表格名稱映射：Store key → IndexedDB store name\nconst TABLE_MAP: Record<string, StoreName> = {\n  'tours': 'tours',\n  'orders': 'orders',\n  'quotes': 'quotes',\n  'todos': 'todos',\n  'suppliers': 'suppliers',\n  'customers': 'customers',\n  'payments': 'paymentRequests', // 'payments' 對應到 'paymentRequests'\n  'paymentRequests': 'paymentRequests',\n  'members': 'orders', // members 存在 orders 裡（暫時）\n  'tourAddOns': 'tours', // tourAddOns 存在 tours 裡（暫時）\n};\n\n// ============= CRUD 方法生成器（使用新架構） =============\n\n/**\n * 建立具有離線同步功能的 CRUD 方法（v4.0 重構版）\n *\n * @param tableName - 表格名稱\n * @param arrayKey - Store 中陣列的 key 名稱（如 'todos', 'tours'）\n * @param set - Zustand set 函數\n * @param get - Zustand get 函數\n * @returns CRUD 方法物件\n */\nexport const createPersistentCrudMethods = <T extends { id?: string }>(\n  tableName: string,\n  arrayKey: string,\n  set: SetState<any>,\n  get: GetState<any>\n) => {\n  const capitalizedName = arrayKey.charAt(0).toUpperCase() + arrayKey.slice(1, -1);\n  const storeName = (TABLE_MAP[tableName] || tableName) as StoreName;\n  const offlineManager = getOfflineManager();\n\n  return {\n    // ===== 新增 =====\n    [`add${capitalizedName}`]: async (data: Omit<T, 'id' | 'createdAt' | 'updatedAt'>) => {\n      try {\n        // 特殊處理：自動生成編號\n        if (tableName === 'quotes' && !(data as any).quoteNumber) {\n          const year = new Date().getFullYear();\n          const state = get();\n          const existingQuotes = state[arrayKey] || [];\n          const lastNumber = existingQuotes\n            .map((q: any) => q.quoteNumber)\n            .filter((num: string) => num?.startsWith(`QUOTE-${year}`))\n            .map((num: string) => parseInt(num.split('-')[2] || '0'))\n            .sort((a: number, b: number) => b - a)[0] || 0;\n\n          const newNumber = (lastNumber + 1).toString().padStart(4, '0');\n          (data as any).quoteNumber = `QUOTE-${year}-${newNumber}`;\n        }\n\n        // 使用 OfflineManager 建立資料\n        const newItem = await offlineManager.create<T>(storeName, data as Partial<T>);\n\n        // 更新 Zustand store\n        const state = get();\n        set({\n          [arrayKey]: [...state[arrayKey], newItem]\n        });\n\n        return newItem;\n      } catch (error) {\n        console.error(`❌ 新增 ${tableName} 失敗:`, error);\n        throw new Error(`無法新增${tableName}: ${error instanceof Error ? error.message : '未知錯誤'}`);\n      }\n    },\n\n    // ===== 更新 =====\n    [`update${capitalizedName}`]: async (id: string, data: Partial<T>) => {\n      try {\n        // 使用 OfflineManager 更新資料\n        const updatedItem = await offlineManager.update<T>(storeName, id, data);\n\n        // 更新 Zustand store\n        const state = get();\n        const updatedArray = state[arrayKey].map((item: T) =>\n          item.id === id ? updatedItem : item\n        );\n        set({ [arrayKey]: updatedArray });\n\n        return updatedItem;\n      } catch (error) {\n        console.error(`❌ 更新 ${tableName} 失敗:`, error);\n        throw new Error(`無法更新${tableName}: ${error instanceof Error ? error.message : '未知錯誤'}`);\n      }\n    },\n\n    // ===== 刪除 =====\n    [`delete${capitalizedName}`]: async (id: string) => {\n      try {\n        // 使用 OfflineManager 刪除資料\n        await offlineManager.delete(storeName, id);\n\n        // 更新 Zustand store\n        const state = get();\n        set({\n          [arrayKey]: state[arrayKey].filter((item: T) => item.id !== id)\n        });\n\n        return true;\n      } catch (error) {\n        console.error(`❌ 刪除 ${tableName} 失敗:`, error);\n        throw new Error(`無法刪除${tableName}: ${error instanceof Error ? error.message : '未知錯誤'}`);\n      }\n    },\n\n    // ===== 載入 =====\n    [`load${capitalizedName}s`]: async () => {\n      try {\n        // 使用 OfflineManager 載入資料\n        const data = await offlineManager.getAll<T>(storeName);\n\n        // 更新 Zustand store\n        set({ [arrayKey]: data });\n\n        console.log(`✅ 載入 ${tableName}:`, data.length, '筆');\n        return data;\n      } catch (error) {\n        console.error(`⚠️ 載入 ${tableName} 失敗:`, error);\n        return null;\n      }\n    }\n  };\n};\n\n// ============= 輔助函數 =============\n\n/**\n * 生成唯一 ID（使用 unified-types 的 UUID 生成器）\n */\nexport const generateId = (): string => {\n  return generateUUID();\n};\n\n/**\n * 生成時間戳\n */\nexport const generateTimestamp = (): string => {\n  return new Date().toISOString();\n};\n\n/**\n * 錯誤處理包裝器\n */\nexport const withErrorHandling = <T>(\n  operation: () => T,\n  errorMessage: string\n): T => {\n  try {\n    return operation();\n  } catch (error) {\n    console.error(`❌ ${errorMessage}:`, error);\n    throw new Error(`${errorMessage}: ${error instanceof Error ? error.message : '未知錯誤'}`);\n  }\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1101, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/stores/timebox-store.ts"],"sourcesContent":["import { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\nimport { generateId } from '@/lib/persistent-store'\n\n// 基礎類型定義\nexport interface BaseBox {\n  id: string\n  name: string\n  color: string\n  type: 'workout' | 'reminder' | 'basic'\n  userId: string\n  createdAt: Date\n  updatedAt: Date\n  // 重訓專用欄位\n  equipment?: string // 器材\n  weight?: number    // 重量 (kg)\n  reps?: number      // 次數\n  sets?: number      // 組數\n}\n\n// 重訓資料 - 簡化為單一運動項目\nexport interface WorkoutData {\n  // 組別完成狀態追蹤 (點擊即完成)\n  setsCompleted: boolean[] // 每組的完成狀態 [true, true, false, false] = 前兩組完成\n  completedSetsTime: Date[] // 每組完成的時間\n  totalVolume?: number     // 總訓練量 (重量 × 次數 × 組數)\n}\n\n// 提醒資料\nexport interface ReminderData {\n  text: string\n  lastUpdated: Date\n}\n\n// 排程箱子實例\nexport interface ScheduledBox {\n  id: string\n  boxId: string\n  weekId: string\n  dayOfWeek: number // 0-6 (週日到週六)\n  startTime: string // \"HH:mm\" 格式\n  duration: number // 分鐘數\n  completed: boolean\n  completedAt?: Date\n  data?: WorkoutData | ReminderData\n  // 重訓組別進度追蹤\n  setsProgress?: {\n    completed: number // 已完成組數\n    total: number     // 總組數\n  }\n}\n\n// 週記錄\nexport interface WeekRecord {\n  id: string\n  userId: string\n  weekStart: Date\n  weekEnd: Date\n  name?: string\n  archived: boolean\n  scheduledBoxes: ScheduledBox[]\n  statistics: {\n    completionRate: number\n    totalWorkoutVolume?: number\n    totalWorkoutSessions?: number\n    completedCount: number\n    totalCount: number\n  }\n  review?: {\n    notes: string\n    createdAt: Date\n  }\n}\n\n// 統計資料\nexport interface WeekStatistics {\n  completionRate: number\n  totalWorkoutTime: number\n  completedByType: {\n    workout: number\n    reminder: number\n    basic: number\n  }\n  totalWorkoutVolume?: number\n  totalWorkoutSessions?: number\n}\n\n// 趨勢資料\nexport interface WorkoutTrend {\n  week: string\n  volume: number\n  sessions: number\n  completionRate: number\n}\n\n// 莫蘭迪配色選項\nexport const morandiColors = [\n  { name: '柔霧粉', value: '#E2C4C4', hover: '#D9B3B3' },\n  { name: '晨露綠', value: '#C4D6C4', hover: '#B3CAB3' },\n  { name: '雲石灰', value: '#D4D4D4', hover: '#C4C4C4' },\n  { name: '奶茶棕', value: '#D6C4B8', hover: '#CAB3A5' },\n  { name: '薰衣草', value: '#D0C4D6', hover: '#C3B3CA' },\n  { name: '杏仁黃', value: '#E0D6B8', hover: '#D6CAA5' },\n  { name: '海霧藍', value: '#C4D0D6', hover: '#B3C3CA' },\n  { name: '珊瑚橘', value: '#E0C8B8', hover: '#D6B9A5' },\n  { name: '鼠尾草', value: '#B8C8B8', hover: '#A5B9A5' },\n  { name: '暮色紫', value: '#C4B8D0', hover: '#B3A5C3' },\n  { name: '燕麥米', value: '#D6D0C4', hover: '#CAC3B3' },\n  { name: '石墨藍', value: '#B8C4D0', hover: '#A5B3C3' },\n  { name: '楓葉紅', value: '#D0B8B8', hover: '#C3A5A5' },\n  { name: '苔蘚綠', value: '#B8C4B8', hover: '#A5B3A5' },\n  { name: '砂岩褐', value: '#C8B8B0', hover: '#B9A59C' },\n  { name: '月光白', value: '#E8E8E8', hover: '#DEDEDE' },\n]\n\ninterface TimeboxState {\n  // 箱子管理\n  boxes: BaseBox[]\n  createBox: (box: Omit<BaseBox, 'id' | 'createdAt' | 'updatedAt'>) => void\n  updateBox: (id: string, updates: Partial<BaseBox>) => void\n  deleteBox: (id: string) => void\n\n  // 週排程\n  currentWeek: WeekRecord | null\n  scheduledBoxes: ScheduledBox[]\n  addScheduledBox: (box: Omit<ScheduledBox, 'id'>) => void\n  updateScheduledBox: (id: string, updates: Partial<ScheduledBox>) => void\n  removeScheduledBox: (id: string) => void\n  toggleBoxCompletion: (id: string) => void\n\n  // 重訓資料\n  updateWorkoutData: (boxId: string, data: WorkoutData) => void\n  toggleSetCompletion: (boxId: string, setIndex: number) => void\n\n  // 文字提示資料\n  updateReminderData: (boxId: string, data: ReminderData) => void\n\n  // 週記錄\n  weekRecords: WeekRecord[]\n  archiveCurrentWeek: (name: string) => void\n  loadWeekRecord: (id: string) => void\n  copyToNextWeek: (recordId: string) => void\n\n  // 統計\n  getWeekStatistics: () => WeekStatistics\n  getWorkoutTrends: (weeks: number) => WorkoutTrend[]\n\n  // 初始化\n  initializeCurrentWeek: (weekStart: Date) => void\n}\n\n// 輔助函數\nconst getWeekStart = (date: Date) => {\n  const d = new Date(date)\n  const day = d.getDay()\n  const diff = d.getDate() - day + (day === 0 ? -6 : 1) // 調整為週一開始\n  return new Date(d.setDate(diff))\n}\n\nconst getWeekEnd = (date: Date) => {\n  const start = getWeekStart(date)\n  const end = new Date(start)\n  end.setDate(start.getDate() + 6)\n  return end\n}\n\nexport const useTimeboxStore = create<TimeboxState>()(\n  persist(\n    (set, get) => ({\n      // 初始狀態\n      boxes: [],\n      currentWeek: null,\n      scheduledBoxes: [],\n      weekRecords: [],\n\n      // 箱子管理\n      createBox: (boxData) => {\n        const newBox: BaseBox = {\n          ...boxData,\n          id: generateId(),\n          createdAt: new Date(),\n          updatedAt: new Date(),\n        }\n        set((state) => ({\n          boxes: [...state.boxes, newBox]\n        }))\n      },\n\n      updateBox: (id, updates) => {\n        set((state) => ({\n          boxes: state.boxes.map((box) =>\n            box.id === id ? { ...box, ...updates, updatedAt: new Date() } : box\n          )\n        }))\n      },\n\n      deleteBox: (id) => {\n        set((state) => ({\n          boxes: state.boxes.filter((box) => box.id !== id),\n          scheduledBoxes: state.scheduledBoxes.filter((sb) => sb.boxId !== id)\n        }))\n      },\n\n      // 週排程\n      addScheduledBox: (boxData) => {\n        const newScheduledBox: ScheduledBox = {\n          ...boxData,\n          id: generateId(),\n        }\n        set((state) => ({\n          scheduledBoxes: [...state.scheduledBoxes, newScheduledBox]\n        }))\n      },\n\n      updateScheduledBox: (id, updates) => {\n        set((state) => ({\n          scheduledBoxes: state.scheduledBoxes.map((box) =>\n            box.id === id ? { ...box, ...updates } : box\n          )\n        }))\n      },\n\n      removeScheduledBox: (id) => {\n        set((state) => ({\n          scheduledBoxes: state.scheduledBoxes.filter((box) => box.id !== id)\n        }))\n      },\n\n      toggleBoxCompletion: (id) => {\n        set((state) => ({\n          scheduledBoxes: state.scheduledBoxes.map((box) =>\n            box.id === id\n              ? {\n                  ...box,\n                  completed: !box.completed,\n                  completedAt: !box.completed ? new Date() : undefined\n                }\n              : box\n          )\n        }))\n      },\n\n      // 重訓資料\n      updateWorkoutData: (boxId, data) => {\n        set((state) => ({\n          scheduledBoxes: state.scheduledBoxes.map((box) =>\n            box.id === boxId ? { ...box, data } : box\n          )\n        }))\n      },\n\n      toggleSetCompletion: (boxId, setIndex) => {\n        set((state) => ({\n          scheduledBoxes: state.scheduledBoxes.map((box) => {\n            if (box.id !== boxId) return box\n\n            const currentData = box.data as WorkoutData\n            if (!currentData) {\n              // 初始化 WorkoutData，獲取組數資訊\n              const baseBox = state.boxes.find(b => b.id === box.boxId)\n              const totalSets = baseBox?.sets || 3\n\n              const newData: WorkoutData = {\n                setsCompleted: Array(totalSets).fill(false),\n                completedSetsTime: Array(totalSets).fill(null)\n              }\n              newData.setsCompleted[setIndex] = true\n              newData.completedSetsTime[setIndex] = new Date()\n\n              // 計算總訓練量\n              if (baseBox?.weight && baseBox?.reps) {\n                newData.totalVolume = baseBox.weight * baseBox.reps * totalSets\n              }\n\n              return { ...box, data: newData }\n            }\n\n            const updatedSetsCompleted = [...currentData.setsCompleted]\n            const updatedCompletedTime = [...currentData.completedSetsTime]\n\n            // 切換該組的完成狀態\n            updatedSetsCompleted[setIndex] = !updatedSetsCompleted[setIndex]\n            updatedCompletedTime[setIndex] = updatedSetsCompleted[setIndex] ? new Date() : null\n\n            const updatedData: WorkoutData = {\n              ...currentData,\n              setsCompleted: updatedSetsCompleted,\n              completedSetsTime: updatedCompletedTime\n            }\n\n            return { ...box, data: updatedData }\n          })\n        }))\n      },\n\n      // 文字提示資料\n      updateReminderData: (boxId, data) => {\n        set((state) => ({\n          scheduledBoxes: state.scheduledBoxes.map((box) =>\n            box.id === boxId ? { ...box, data } : box\n          )\n        }))\n      },\n\n      // 週記錄\n      archiveCurrentWeek: (name) => {\n        const { currentWeek, scheduledBoxes } = get()\n        if (!currentWeek) return\n\n        const completedCount = scheduledBoxes.filter((box) => box.completed).length\n        const totalCount = scheduledBoxes.length\n        const completionRate = totalCount > 0 ? completedCount / totalCount : 0\n\n        const workoutBoxes = scheduledBoxes.filter((box) => {\n          const baseBox = get().boxes.find((b) => b.id === box.boxId)\n          return baseBox?.type === 'workout' && box.completed\n        })\n\n        const totalWorkoutVolume = workoutBoxes.reduce((total, box) => {\n          const baseBox = get().boxes.find((b) => b.id === box.boxId)\n          if (!baseBox) return total\n\n          if (box.data) {\n            const workoutData = box.data as WorkoutData\n            if (workoutData.totalVolume) {\n              return total + workoutData.totalVolume\n            } else if (workoutData.setsCompleted && baseBox.weight && baseBox.reps) {\n              const completedSets = workoutData.setsCompleted.filter(Boolean).length\n              return total + (completedSets * baseBox.weight * baseBox.reps)\n            }\n          } else if (baseBox.weight && baseBox.reps && baseBox.sets) {\n            // 如果沒有詳細資料，假設全部完成\n            return total + (baseBox.weight * baseBox.reps * baseBox.sets)\n          }\n\n          return total\n        }, 0)\n\n        const archivedWeek: WeekRecord = {\n          ...currentWeek,\n          name,\n          archived: true,\n          scheduledBoxes,\n          statistics: {\n            completionRate,\n            totalWorkoutVolume,\n            totalWorkoutSessions: workoutBoxes.length,\n            completedCount,\n            totalCount,\n          }\n        }\n\n        set((state) => ({\n          weekRecords: [...state.weekRecords, archivedWeek]\n        }))\n      },\n\n      loadWeekRecord: (id) => {\n        const { weekRecords } = get()\n        const record = weekRecords.find((r) => r.id === id)\n        if (record) {\n          set({\n            currentWeek: record,\n            scheduledBoxes: record.scheduledBoxes\n          })\n        }\n      },\n\n      copyToNextWeek: (recordId) => {\n        const { weekRecords } = get()\n        const record = weekRecords.find((r) => r.id === recordId)\n        if (!record) return\n\n        const nextWeekStart = new Date(record.weekEnd)\n        nextWeekStart.setDate(nextWeekStart.getDate() + 1)\n\n        get().initializeCurrentWeek(nextWeekStart)\n\n        // 複製排程但清除完成狀態\n        const copiedBoxes = record.scheduledBoxes.map((box) => ({\n          ...box,\n          id: generateId(),\n          weekId: get().currentWeek!.id,\n          completed: false,\n          completedAt: undefined,\n        }))\n\n        set({\n          scheduledBoxes: copiedBoxes\n        })\n      },\n\n      // 統計\n      getWeekStatistics: () => {\n        const { scheduledBoxes, boxes } = get()\n        const completedBoxes = scheduledBoxes.filter((box) => box.completed)\n        const totalBoxes = scheduledBoxes.length\n\n        const completedByType = {\n          workout: 0,\n          reminder: 0,\n          basic: 0,\n        }\n\n        let totalWorkoutTime = 0\n        let totalWorkoutVolume = 0\n        let totalWorkoutSessions = 0\n\n        completedBoxes.forEach((box) => {\n          const baseBox = boxes.find((b) => b.id === box.boxId)\n          if (baseBox) {\n            completedByType[baseBox.type]++\n\n            if (baseBox.type === 'workout') {\n              totalWorkoutTime += box.duration\n              totalWorkoutSessions++\n\n              // 計算重訓量：從 box.data 或 baseBox 獲取資料\n              if (box.data) {\n                const workoutData = box.data as WorkoutData\n                // 如果有儲存的總量，使用它\n                if (workoutData.totalVolume) {\n                  totalWorkoutVolume += workoutData.totalVolume\n                } else if (workoutData.setsCompleted && baseBox.weight && baseBox.reps) {\n                  // 否則根據完成組數計算\n                  const completedSets = workoutData.setsCompleted.filter(Boolean).length\n                  totalWorkoutVolume += completedSets * baseBox.weight * baseBox.reps\n                }\n              } else if (baseBox.weight && baseBox.reps && baseBox.sets) {\n                // 如果沒有 workout data，假設全部完成\n                totalWorkoutVolume += baseBox.weight * baseBox.reps * baseBox.sets\n              }\n            }\n          }\n        })\n\n        return {\n          completionRate: totalBoxes > 0 ? completedBoxes.length / totalBoxes : 0,\n          totalWorkoutTime,\n          completedByType,\n          totalWorkoutVolume,\n          totalWorkoutSessions,\n        }\n      },\n\n      getWorkoutTrends: (weeks) => {\n        const { weekRecords } = get()\n        return weekRecords\n          .slice(-weeks)\n          .map((record) => ({\n            week: `${record.weekStart.getMonth() + 1}/${record.weekStart.getDate()}`,\n            volume: record.statistics.totalWorkoutVolume || 0,\n            sessions: record.statistics.totalWorkoutSessions || 0,\n            completionRate: record.statistics.completionRate,\n          }))\n      },\n\n      // 初始化\n      initializeCurrentWeek: (weekStart) => {\n        const weekEnd = getWeekEnd(weekStart)\n        const newWeek: WeekRecord = {\n          id: generateId(),\n          userId: 'current-user', // TODO: 實際用戶ID\n          weekStart: getWeekStart(weekStart),\n          weekEnd,\n          archived: false,\n          scheduledBoxes: [],\n          statistics: {\n            completionRate: 0,\n            completedCount: 0,\n            totalCount: 0,\n          },\n        }\n\n        set({\n          currentWeek: newWeek,\n          scheduledBoxes: [],\n        })\n      },\n    }),\n    {\n      name: 'timebox-storage',\n      version: 1,\n    }\n  )\n)"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AA8FO,MAAM,gBAAgB;IAC3B;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;IAClD;QAAE,MAAM;QAAO,OAAO;QAAW,OAAO;IAAU;CACnD;AAsCD,OAAO;AACP,MAAM,eAAe,CAAC;IACpB,MAAM,IAAI,IAAI,KAAK;IACnB,MAAM,MAAM,EAAE,MAAM;IACpB,MAAM,OAAO,EAAE,OAAO,KAAK,MAAM,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,EAAE,UAAU;;IAChE,OAAO,IAAI,KAAK,EAAE,OAAO,CAAC;AAC5B;AAEA,MAAM,aAAa,CAAC;IAClB,MAAM,QAAQ,aAAa;IAC3B,MAAM,MAAM,IAAI,KAAK;IACrB,IAAI,OAAO,CAAC,MAAM,OAAO,KAAK;IAC9B,OAAO;AACT;AAEO,MAAM,kBAAkB,IAAA,kJAAM,IACnC,IAAA,wJAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,OAAO;QACP,OAAO,EAAE;QACT,aAAa;QACb,gBAAgB,EAAE;QAClB,aAAa,EAAE;QAEf,OAAO;QACP,WAAW,CAAC;YACV,MAAM,SAAkB;gBACtB,GAAG,OAAO;gBACV,IAAI,IAAA,+IAAU;gBACd,WAAW,IAAI;gBACf,WAAW,IAAI;YACjB;YACA,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO;2BAAI,MAAM,KAAK;wBAAE;qBAAO;gBACjC,CAAC;QACH;QAEA,WAAW,CAAC,IAAI;YACd,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,MACtB,IAAI,EAAE,KAAK,KAAK;4BAAE,GAAG,GAAG;4BAAE,GAAG,OAAO;4BAAE,WAAW,IAAI;wBAAO,IAAI;gBAEpE,CAAC;QACH;QAEA,WAAW,CAAC;YACV,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,MAAQ,IAAI,EAAE,KAAK;oBAC9C,gBAAgB,MAAM,cAAc,CAAC,MAAM,CAAC,CAAC,KAAO,GAAG,KAAK,KAAK;gBACnE,CAAC;QACH;QAEA,MAAM;QACN,iBAAiB,CAAC;YAChB,MAAM,kBAAgC;gBACpC,GAAG,OAAO;gBACV,IAAI,IAAA,+IAAU;YAChB;YACA,IAAI,CAAC,QAAU,CAAC;oBACd,gBAAgB;2BAAI,MAAM,cAAc;wBAAE;qBAAgB;gBAC5D,CAAC;QACH;QAEA,oBAAoB,CAAC,IAAI;YACvB,IAAI,CAAC,QAAU,CAAC;oBACd,gBAAgB,MAAM,cAAc,CAAC,GAAG,CAAC,CAAC,MACxC,IAAI,EAAE,KAAK,KAAK;4BAAE,GAAG,GAAG;4BAAE,GAAG,OAAO;wBAAC,IAAI;gBAE7C,CAAC;QACH;QAEA,oBAAoB,CAAC;YACnB,IAAI,CAAC,QAAU,CAAC;oBACd,gBAAgB,MAAM,cAAc,CAAC,MAAM,CAAC,CAAC,MAAQ,IAAI,EAAE,KAAK;gBAClE,CAAC;QACH;QAEA,qBAAqB,CAAC;YACpB,IAAI,CAAC,QAAU,CAAC;oBACd,gBAAgB,MAAM,cAAc,CAAC,GAAG,CAAC,CAAC,MACxC,IAAI,EAAE,KAAK,KACP;4BACE,GAAG,GAAG;4BACN,WAAW,CAAC,IAAI,SAAS;4BACzB,aAAa,CAAC,IAAI,SAAS,GAAG,IAAI,SAAS;wBAC7C,IACA;gBAER,CAAC;QACH;QAEA,OAAO;QACP,mBAAmB,CAAC,OAAO;YACzB,IAAI,CAAC,QAAU,CAAC;oBACd,gBAAgB,MAAM,cAAc,CAAC,GAAG,CAAC,CAAC,MACxC,IAAI,EAAE,KAAK,QAAQ;4BAAE,GAAG,GAAG;4BAAE;wBAAK,IAAI;gBAE1C,CAAC;QACH;QAEA,qBAAqB,CAAC,OAAO;YAC3B,IAAI,CAAC,QAAU,CAAC;oBACd,gBAAgB,MAAM,cAAc,CAAC,GAAG,CAAC,CAAC;wBACxC,IAAI,IAAI,EAAE,KAAK,OAAO,OAAO;wBAE7B,MAAM,cAAc,IAAI,IAAI;wBAC5B,IAAI,CAAC,aAAa;4BAChB,yBAAyB;4BACzB,MAAM,UAAU,MAAM,KAAK,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,KAAK;4BACxD,MAAM,YAAY,SAAS,QAAQ;4BAEnC,MAAM,UAAuB;gCAC3B,eAAe,MAAM,WAAW,IAAI,CAAC;gCACrC,mBAAmB,MAAM,WAAW,IAAI,CAAC;4BAC3C;4BACA,QAAQ,aAAa,CAAC,SAAS,GAAG;4BAClC,QAAQ,iBAAiB,CAAC,SAAS,GAAG,IAAI;4BAE1C,SAAS;4BACT,IAAI,SAAS,UAAU,SAAS,MAAM;gCACpC,QAAQ,WAAW,GAAG,QAAQ,MAAM,GAAG,QAAQ,IAAI,GAAG;4BACxD;4BAEA,OAAO;gCAAE,GAAG,GAAG;gCAAE,MAAM;4BAAQ;wBACjC;wBAEA,MAAM,uBAAuB;+BAAI,YAAY,aAAa;yBAAC;wBAC3D,MAAM,uBAAuB;+BAAI,YAAY,iBAAiB;yBAAC;wBAE/D,YAAY;wBACZ,oBAAoB,CAAC,SAAS,GAAG,CAAC,oBAAoB,CAAC,SAAS;wBAChE,oBAAoB,CAAC,SAAS,GAAG,oBAAoB,CAAC,SAAS,GAAG,IAAI,SAAS;wBAE/E,MAAM,cAA2B;4BAC/B,GAAG,WAAW;4BACd,eAAe;4BACf,mBAAmB;wBACrB;wBAEA,OAAO;4BAAE,GAAG,GAAG;4BAAE,MAAM;wBAAY;oBACrC;gBACF,CAAC;QACH;QAEA,SAAS;QACT,oBAAoB,CAAC,OAAO;YAC1B,IAAI,CAAC,QAAU,CAAC;oBACd,gBAAgB,MAAM,cAAc,CAAC,GAAG,CAAC,CAAC,MACxC,IAAI,EAAE,KAAK,QAAQ;4BAAE,GAAG,GAAG;4BAAE;wBAAK,IAAI;gBAE1C,CAAC;QACH;QAEA,MAAM;QACN,oBAAoB,CAAC;YACnB,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG;YACxC,IAAI,CAAC,aAAa;YAElB,MAAM,iBAAiB,eAAe,MAAM,CAAC,CAAC,MAAQ,IAAI,SAAS,EAAE,MAAM;YAC3E,MAAM,aAAa,eAAe,MAAM;YACxC,MAAM,iBAAiB,aAAa,IAAI,iBAAiB,aAAa;YAEtE,MAAM,eAAe,eAAe,MAAM,CAAC,CAAC;gBAC1C,MAAM,UAAU,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,IAAI,KAAK;gBAC1D,OAAO,SAAS,SAAS,aAAa,IAAI,SAAS;YACrD;YAEA,MAAM,qBAAqB,aAAa,MAAM,CAAC,CAAC,OAAO;gBACrD,MAAM,UAAU,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,IAAI,KAAK;gBAC1D,IAAI,CAAC,SAAS,OAAO;gBAErB,IAAI,IAAI,IAAI,EAAE;oBACZ,MAAM,cAAc,IAAI,IAAI;oBAC5B,IAAI,YAAY,WAAW,EAAE;wBAC3B,OAAO,QAAQ,YAAY,WAAW;oBACxC,OAAO,IAAI,YAAY,aAAa,IAAI,QAAQ,MAAM,IAAI,QAAQ,IAAI,EAAE;wBACtE,MAAM,gBAAgB,YAAY,aAAa,CAAC,MAAM,CAAC,SAAS,MAAM;wBACtE,OAAO,QAAS,gBAAgB,QAAQ,MAAM,GAAG,QAAQ,IAAI;oBAC/D;gBACF,OAAO,IAAI,QAAQ,MAAM,IAAI,QAAQ,IAAI,IAAI,QAAQ,IAAI,EAAE;oBACzD,kBAAkB;oBAClB,OAAO,QAAS,QAAQ,MAAM,GAAG,QAAQ,IAAI,GAAG,QAAQ,IAAI;gBAC9D;gBAEA,OAAO;YACT,GAAG;YAEH,MAAM,eAA2B;gBAC/B,GAAG,WAAW;gBACd;gBACA,UAAU;gBACV;gBACA,YAAY;oBACV;oBACA;oBACA,sBAAsB,aAAa,MAAM;oBACzC;oBACA;gBACF;YACF;YAEA,IAAI,CAAC,QAAU,CAAC;oBACd,aAAa;2BAAI,MAAM,WAAW;wBAAE;qBAAa;gBACnD,CAAC;QACH;QAEA,gBAAgB,CAAC;YACf,MAAM,EAAE,WAAW,EAAE,GAAG;YACxB,MAAM,SAAS,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAChD,IAAI,QAAQ;gBACV,IAAI;oBACF,aAAa;oBACb,gBAAgB,OAAO,cAAc;gBACvC;YACF;QACF;QAEA,gBAAgB,CAAC;YACf,MAAM,EAAE,WAAW,EAAE,GAAG;YACxB,MAAM,SAAS,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAChD,IAAI,CAAC,QAAQ;YAEb,MAAM,gBAAgB,IAAI,KAAK,OAAO,OAAO;YAC7C,cAAc,OAAO,CAAC,cAAc,OAAO,KAAK;YAEhD,MAAM,qBAAqB,CAAC;YAE5B,cAAc;YACd,MAAM,cAAc,OAAO,cAAc,CAAC,GAAG,CAAC,CAAC,MAAQ,CAAC;oBACtD,GAAG,GAAG;oBACN,IAAI,IAAA,+IAAU;oBACd,QAAQ,MAAM,WAAW,CAAE,EAAE;oBAC7B,WAAW;oBACX,aAAa;gBACf,CAAC;YAED,IAAI;gBACF,gBAAgB;YAClB;QACF;QAEA,KAAK;QACL,mBAAmB;YACjB,MAAM,EAAE,cAAc,EAAE,KAAK,EAAE,GAAG;YAClC,MAAM,iBAAiB,eAAe,MAAM,CAAC,CAAC,MAAQ,IAAI,SAAS;YACnE,MAAM,aAAa,eAAe,MAAM;YAExC,MAAM,kBAAkB;gBACtB,SAAS;gBACT,UAAU;gBACV,OAAO;YACT;YAEA,IAAI,mBAAmB;YACvB,IAAI,qBAAqB;YACzB,IAAI,uBAAuB;YAE3B,eAAe,OAAO,CAAC,CAAC;gBACtB,MAAM,UAAU,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,IAAI,KAAK;gBACpD,IAAI,SAAS;oBACX,eAAe,CAAC,QAAQ,IAAI,CAAC;oBAE7B,IAAI,QAAQ,IAAI,KAAK,WAAW;wBAC9B,oBAAoB,IAAI,QAAQ;wBAChC;wBAEA,kCAAkC;wBAClC,IAAI,IAAI,IAAI,EAAE;4BACZ,MAAM,cAAc,IAAI,IAAI;4BAC5B,eAAe;4BACf,IAAI,YAAY,WAAW,EAAE;gCAC3B,sBAAsB,YAAY,WAAW;4BAC/C,OAAO,IAAI,YAAY,aAAa,IAAI,QAAQ,MAAM,IAAI,QAAQ,IAAI,EAAE;gCACtE,aAAa;gCACb,MAAM,gBAAgB,YAAY,aAAa,CAAC,MAAM,CAAC,SAAS,MAAM;gCACtE,sBAAsB,gBAAgB,QAAQ,MAAM,GAAG,QAAQ,IAAI;4BACrE;wBACF,OAAO,IAAI,QAAQ,MAAM,IAAI,QAAQ,IAAI,IAAI,QAAQ,IAAI,EAAE;4BACzD,2BAA2B;4BAC3B,sBAAsB,QAAQ,MAAM,GAAG,QAAQ,IAAI,GAAG,QAAQ,IAAI;wBACpE;oBACF;gBACF;YACF;YAEA,OAAO;gBACL,gBAAgB,aAAa,IAAI,eAAe,MAAM,GAAG,aAAa;gBACtE;gBACA;gBACA;gBACA;YACF;QACF;QAEA,kBAAkB,CAAC;YACjB,MAAM,EAAE,WAAW,EAAE,GAAG;YACxB,OAAO,YACJ,KAAK,CAAC,CAAC,OACP,GAAG,CAAC,CAAC,SAAW,CAAC;oBAChB,MAAM,GAAG,OAAO,SAAS,CAAC,QAAQ,KAAK,EAAE,CAAC,EAAE,OAAO,SAAS,CAAC,OAAO,IAAI;oBACxE,QAAQ,OAAO,UAAU,CAAC,kBAAkB,IAAI;oBAChD,UAAU,OAAO,UAAU,CAAC,oBAAoB,IAAI;oBACpD,gBAAgB,OAAO,UAAU,CAAC,cAAc;gBAClD,CAAC;QACL;QAEA,MAAM;QACN,uBAAuB,CAAC;YACtB,MAAM,UAAU,WAAW;YAC3B,MAAM,UAAsB;gBAC1B,IAAI,IAAA,+IAAU;gBACd,QAAQ;gBACR,WAAW,aAAa;gBACxB;gBACA,UAAU;gBACV,gBAAgB,EAAE;gBAClB,YAAY;oBACV,gBAAgB;oBAChB,gBAAgB;oBAChB,YAAY;gBACd;YACF;YAEA,IAAI;gBACF,aAAa;gBACb,gBAAgB,EAAE;YACpB;QACF;IACF,CAAC,GACD;IACE,MAAM;IACN,SAAS;AACX","debugId":null}},
    {"offset": {"line": 1504, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.memo(React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n))\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,6MAAU,eAAC,mNAAgB,CACxC,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1564, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,gBAAgB,6KAAuB;AAE7C,MAAM,eAAe,4KAAsB;AAE3C,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,2KAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,iMAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,iLAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1704, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/box-selector.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useTimeboxStore } from '@/stores/timebox-store'\nimport { Button } from '@/components/ui/button'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Dumbbell, MessageSquare, Package } from 'lucide-react'\n\nconst typeIcons = {\n  workout: Dumbbell,\n  reminder: MessageSquare,\n  basic: Package,\n}\n\nconst typeLabels = {\n  workout: '重訓箱子',\n  reminder: '文字提示箱子',\n  basic: '普通箱子',\n}\n\ninterface BoxSelectorProps {\n  onSelect: (boxId: string, duration: number) => void\n  onClose: () => void\n  timeInterval: 30 | 60\n}\n\nexport default function BoxSelector({ onSelect, onClose, timeInterval }: BoxSelectorProps) {\n  const { boxes } = useTimeboxStore()\n  const [selectedBox, setSelectedBox] = useState<string | null>(null)\n  const [duration, setDuration] = useState(timeInterval)\n\n\n  // 生成持續時間選項（30分鐘的倍數）\n  const durationOptions = []\n  for (let i = timeInterval; i <= 480; i += timeInterval) { // 最多8小時\n    durationOptions.push(i)\n  }\n\n  const formatDuration = (minutes: number) => {\n    if (minutes >= 60) {\n      const hours = Math.floor(minutes / 60)\n      const mins = minutes % 60\n      return mins > 0 ? `${hours}小時 ${mins}分鐘` : `${hours}小時`\n    }\n    return `${minutes}分鐘`\n  }\n\n  const handleConfirm = () => {\n    if (selectedBox) {\n      onSelect(selectedBox, duration)\n    }\n  }\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>選擇箱子</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* 箱子選擇 */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              選擇箱子\n            </label>\n            {boxes.length === 0 ? (\n              <div className=\"text-center text-gray-500 py-4\">\n                <div className=\"mb-3\">還沒有建立任何箱子</div>\n                <Button\n                  onClick={() => {\n                    onClose()\n                    // 觸發建立箱子對話框\n                    const createButton = document.querySelector('[data-create-box]') as HTMLButtonElement\n                    if (createButton) {\n                      createButton.click()\n                    }\n                  }}\n                  className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white\"\n                >\n                  立即建立箱子\n                </Button>\n              </div>\n            ) : (\n              <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                {boxes.map((box) => {\n                  const Icon = typeIcons[box.type]\n                  return (\n                    <button\n                      key={box.id}\n                      type=\"button\"\n                      onClick={() => setSelectedBox(box.id)}\n                      className={`w-full p-3 rounded-lg border text-left transition-colors ${\n                        selectedBox === box.id\n                          ? 'border-blue-500 bg-blue-50'\n                          : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div\n                          className=\"w-8 h-8 rounded-md flex items-center justify-center text-white\"\n                          style={{ backgroundColor: box.color }}\n                        >\n                          <Icon className=\"h-4 w-4\" />\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"font-medium text-gray-900\">{box.name}</div>\n                          <div className=\"text-sm text-gray-500\">{typeLabels[box.type]}</div>\n                        </div>\n                      </div>\n                    </button>\n                  )\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* 持續時間選擇 */}\n          {selectedBox && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                持續時間\n              </label>\n              <div className=\"grid grid-cols-3 gap-2\">\n                {durationOptions.slice(0, 12).map((option) => (\n                  <button\n                    key={option}\n                    type=\"button\"\n                    onClick={() => setDuration(option)}\n                    className={`p-2 text-sm rounded border transition-colors ${\n                      duration === option\n                        ? 'border-blue-500 bg-blue-50 text-blue-700'\n                        : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                  >\n                    {formatDuration(option)}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* 按鈕 */}\n          <div className=\"flex justify-end space-x-2 pt-4\">\n            <Button variant=\"outline\" onClick={onClose}>\n              取消\n            </Button>\n            <Button\n              onClick={handleConfirm}\n              disabled={!selectedBox}\n            >\n              確認\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1977, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/box-dialogs/workout-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useTimeboxStore, WorkoutData, ScheduledBox } from '@/stores/timebox-store'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Check, Clock, Dumbbell, Trash2 } from 'lucide-react'\n\ninterface WorkoutDialogProps {\n  scheduledBox: ScheduledBox\n  onClose: () => void\n}\n\nexport default function WorkoutDialog({ scheduledBox, onClose }: WorkoutDialogProps) {\n  const { boxes, toggleSetCompletion, toggleBoxCompletion, removeScheduledBox } = useTimeboxStore()\n  const [editingBox, setEditingBox] = useState(false)\n  const [boxData, setBoxData] = useState({\n    name: '',\n    equipment: '',\n    weight: 0,\n    reps: 0,\n    sets: 3\n  })\n\n  const box = boxes.find(b => b.id === scheduledBox.boxId)\n\n  // 載入現有資料\n  useEffect(() => {\n    if (box) {\n      setBoxData({\n        name: box.name,\n        equipment: box.equipment || '',\n        weight: box.weight || 0,\n        reps: box.reps || 0,\n        sets: box.sets || 3\n      })\n    }\n  }, [box])\n\n  // 獲取組別完成狀態\n  const getWorkoutProgress = () => {\n    const workoutData = scheduledBox.data as WorkoutData\n    if (!workoutData || !workoutData.setsCompleted) {\n      // 初始化狀態\n      return Array(boxData.sets).fill(false).map((_, index) => ({\n        completed: false,\n        completedAt: null,\n        setNumber: index + 1\n      }))\n    }\n\n    return workoutData.setsCompleted.map((completed, index) => ({\n      completed,\n      completedAt: workoutData.completedSetsTime?.[index] || null,\n      setNumber: index + 1\n    }))\n  }\n\n  // 點擊組別完成\n  const handleSetComplete = (setIndex: number) => {\n    toggleSetCompletion(scheduledBox.id, setIndex)\n  }\n\n  // 標記整個訓練完成\n  const handleComplete = () => {\n    if (!scheduledBox.completed) {\n      toggleBoxCompletion(scheduledBox.id)\n    }\n    onClose()\n  }\n\n  // 刪除排程\n  const handleDelete = () => {\n    const confirmMessage = `確定要移除此訓練排程嗎？\\n\\n箱子：${box?.name}\\n動作：${boxData.equipment}\\n重量：${boxData.weight}kg x ${boxData.reps}次 x ${boxData.sets}組`;\n\n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    removeScheduledBox(scheduledBox.id);\n    onClose();\n  }\n\n  // 計算總訓練量\n  const getTotalVolume = () => {\n    const completedSets = getWorkoutProgress().filter(set => set.completed).length\n    return completedSets * (boxData.weight * boxData.reps)\n  }\n\n  if (!box) return null\n\n  const formatDateTime = (dayOfWeek: number, startTime: string) => {\n    const days = ['週日', '週一', '週二', '週三', '週四', '週五', '週六']\n    return `${days[dayOfWeek]} ${startTime}`\n  }\n\n  const workoutProgress = getWorkoutProgress()\n  const completedSets = workoutProgress.filter(set => set.completed).length\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-lg max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center space-x-2\">\n            <Dumbbell className=\"h-5 w-5\" />\n            <span>{box.name}</span>\n          </DialogTitle>\n          <p className=\"text-sm text-gray-500\">\n            {formatDateTime(scheduledBox.dayOfWeek, scheduledBox.startTime)}\n          </p>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* 運動資訊 */}\n          <div className=\"bg-morandi-container/10 rounded-lg p-4\">\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-morandi-secondary\">器材:</span>\n                <p className=\"font-medium\">{boxData.equipment || '未設定'}</p>\n              </div>\n              <div>\n                <span className=\"text-morandi-secondary\">重量:</span>\n                <p className=\"font-medium\">{boxData.weight} kg</p>\n              </div>\n              <div>\n                <span className=\"text-morandi-secondary\">次數:</span>\n                <p className=\"font-medium\">{boxData.reps} 次</p>\n              </div>\n              <div>\n                <span className=\"text-morandi-secondary\">組數:</span>\n                <p className=\"font-medium\">{boxData.sets} 組</p>\n              </div>\n            </div>\n          </div>\n\n          {/* 進度追蹤 */}\n          <div>\n            <h3 className=\"font-medium mb-3 flex items-center justify-between\">\n              <span>進度追蹤</span>\n              <span className=\"text-sm text-morandi-secondary\">\n                {completedSets}/{boxData.sets} 組完成\n              </span>\n            </h3>\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              {workoutProgress.map((setProgress, index) => (\n                <Button\n                  key={index}\n                  variant={setProgress.completed ? \"default\" : \"outline\"}\n                  className={`h-16 flex flex-col items-center justify-center space-y-1 ${\n                    setProgress.completed ? 'bg-morandi-green text-white' : ''\n                  }`}\n                  onClick={() => handleSetComplete(index)}\n                >\n                  <div className=\"flex items-center space-x-1\">\n                    {setProgress.completed && <Check className=\"h-4 w-4\" />}\n                    <span className=\"font-medium\">第 {setProgress.setNumber} 組</span>\n                  </div>\n\n                  {setProgress.completed && setProgress.completedAt && (\n                    <div className=\"flex items-center text-xs opacity-80\">\n                      <Clock className=\"h-3 w-3 mr-1\" />\n                      {new Date(setProgress.completedAt).toLocaleTimeString('zh-TW', {\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </div>\n                  )}\n                </Button>\n              ))}\n            </div>\n          </div>\n\n          {/* 統計 */}\n          <div className=\"bg-morandi-container/10 rounded-lg p-4\">\n            <h3 className=\"font-medium mb-2\">本次統計</h3>\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-morandi-secondary\">已完成重量:</span>\n                <p className=\"font-medium\">{getTotalVolume().toLocaleString()} kg</p>\n              </div>\n              <div>\n                <span className=\"text-morandi-secondary\">完成率:</span>\n                <p className=\"font-medium\">{Math.round((completedSets / boxData.sets) * 100)}%</p>\n              </div>\n            </div>\n          </div>\n\n          {/* 按鈕 */}\n          <div className=\"flex justify-between pt-4 border-t\">\n            <Button\n              variant=\"outline\"\n              onClick={handleDelete}\n              className=\"text-morandi-red border-morandi-red hover:bg-morandi-red/10\"\n            >\n              <Trash2 size={16} className=\"mr-1\" />\n              移除排程\n            </Button>\n            <div className=\"flex space-x-2\">\n              <Button variant=\"outline\" onClick={onClose}>\n                關閉\n              </Button>\n              {completedSets === boxData.sets && !scheduledBox.completed && (\n                <Button onClick={handleComplete} className=\"bg-morandi-gold hover:bg-morandi-gold/90\">\n                  標記完成\n                </Button>\n              )}\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2509, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<\"textarea\">>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,0OACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2536, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/box-dialogs/reminder-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useTimeboxStore, ReminderData, ScheduledBox } from '@/stores/timebox-store'\nimport { Button } from '@/components/ui/button'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Trash2 } from 'lucide-react'\n\ninterface ReminderDialogProps {\n  scheduledBox: ScheduledBox\n  onClose: () => void\n}\n\nexport default function ReminderDialog({ scheduledBox, onClose }: ReminderDialogProps) {\n  const { boxes, updateReminderData, toggleBoxCompletion, removeScheduledBox } = useTimeboxStore()\n  const [text, setText] = useState('')\n\n  const box = boxes.find(b => b.id === scheduledBox.boxId)\n\n  // 載入現有資料\n  useEffect(() => {\n    if (scheduledBox.data) {\n      const reminderData = scheduledBox.data as ReminderData\n      setText(reminderData.text || '')\n    }\n  }, [scheduledBox.data])\n\n  // 更新內容\n  const handleUpdate = () => {\n    const reminderData: ReminderData = {\n      text,\n      lastUpdated: new Date()\n    }\n\n    updateReminderData(scheduledBox.id, reminderData)\n    onClose()\n  }\n\n  // 標記完成\n  const handleComplete = () => {\n    if (text.trim()) {\n      handleUpdate()\n    }\n    if (!scheduledBox.completed) {\n      toggleBoxCompletion(scheduledBox.id)\n    }\n    onClose()\n  }\n\n  // 刪除排程\n  const handleDelete = () => {\n    const confirmMessage = `確定要移除此提醒排程嗎？\\n\\n箱子：${box?.name}`;\n\n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    removeScheduledBox(scheduledBox.id);\n    onClose();\n  }\n\n  if (!box) return null\n\n  const formatDateTime = (dayOfWeek: number, startTime: string) => {\n    const days = ['週日', '週一', '週二', '週三', '週四', '週五', '週六']\n    return `${days[dayOfWeek]} ${startTime}`\n  }\n\n  const getLastUpdated = () => {\n    if (scheduledBox.data) {\n      const reminderData = scheduledBox.data as ReminderData\n      if (reminderData.lastUpdated) {\n        return new Date(reminderData.lastUpdated).toLocaleString('zh-TW')\n      }\n    }\n    return null\n  }\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>\n            {box.name} - {formatDateTime(scheduledBox.dayOfWeek, scheduledBox.startTime)}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* 提示內容 */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              提示內容\n            </label>\n            <Textarea\n              placeholder=\"例如：保濕程序&#10;1. 卸妝&#10;2. 洗臉&#10;3. 化妝水&#10;4. 精華液&#10;5. 乳液&#10;6. 面膜敷30分鐘\"\n              value={text}\n              onChange={(e) => setText(e.target.value)}\n              rows={10}\n              className=\"resize-none\"\n            />\n          </div>\n\n          {/* 最後更新時間 */}\n          {getLastUpdated() && (\n            <div className=\"text-sm text-gray-500\">\n              最後更新：{getLastUpdated()}\n            </div>\n          )}\n\n          {/* 按鈕 */}\n          <div className=\"flex justify-between pt-4 border-t\">\n            <Button\n              variant=\"outline\"\n              onClick={handleDelete}\n              className=\"text-morandi-red border-morandi-red hover:bg-morandi-red/10\"\n            >\n              <Trash2 size={16} className=\"mr-1\" />\n              移除排程\n            </Button>\n            <div className=\"flex space-x-2\">\n              <Button variant=\"outline\" onClick={onClose}>\n                取消\n              </Button>\n              <Button onClick={handleUpdate}>\n                更新內容\n              </Button>\n              <Button onClick={handleComplete}>\n                {scheduledBox.completed ? '已完成' : '標記完成'}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AAce,SAAS,eAAe,EAAE,YAAY,EAAE,OAAO,EAAuB;IACnF,MAAM,EAAE,KAAK,EAAE,kBAAkB,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,GAAG,IAAA,oJAAe;IAC9F,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IAEjC,MAAM,MAAM,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,aAAa,KAAK;IAEvD,SAAS;IACT,IAAA,kNAAS,EAAC;QACR,IAAI,aAAa,IAAI,EAAE;YACrB,MAAM,eAAe,aAAa,IAAI;YACtC,QAAQ,aAAa,IAAI,IAAI;QAC/B;IACF,GAAG;QAAC,aAAa,IAAI;KAAC;IAEtB,OAAO;IACP,MAAM,eAAe;QACnB,MAAM,eAA6B;YACjC;YACA,aAAa,IAAI;QACnB;QAEA,mBAAmB,aAAa,EAAE,EAAE;QACpC;IACF;IAEA,OAAO;IACP,MAAM,iBAAiB;QACrB,IAAI,KAAK,IAAI,IAAI;YACf;QACF;QACA,IAAI,CAAC,aAAa,SAAS,EAAE;YAC3B,oBAAoB,aAAa,EAAE;QACrC;QACA;IACF;IAEA,OAAO;IACP,MAAM,eAAe;QACnB,MAAM,iBAAiB,CAAC,mBAAmB,EAAE,KAAK,MAAM;QAExD,IAAI,CAAC,QAAQ,iBAAiB;YAC5B;QACF;QAEA,mBAAmB,aAAa,EAAE;QAClC;IACF;IAEA,IAAI,CAAC,KAAK,OAAO;IAEjB,MAAM,iBAAiB,CAAC,WAAmB;QACzC,MAAM,OAAO;YAAC;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;SAAK;QACvD,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,WAAW;IAC1C;IAEA,MAAM,iBAAiB;QACrB,IAAI,aAAa,IAAI,EAAE;YACrB,MAAM,eAAe,aAAa,IAAI;YACtC,IAAI,aAAa,WAAW,EAAE;gBAC5B,OAAO,IAAI,KAAK,aAAa,WAAW,EAAE,cAAc,CAAC;YAC3D;QACF;QACA,OAAO;IACT;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;8BACX,cAAA,8OAAC,iJAAW;;4BACT,IAAI,IAAI;4BAAC;4BAAI,eAAe,aAAa,SAAS,EAAE,aAAa,SAAS;;;;;;;;;;;;8BAI/E,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC,gJAAQ;oCACP,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,MAAM;oCACN,WAAU;;;;;;;;;;;;wBAKb,kCACC,8OAAC;4BAAI,WAAU;;gCAAwB;gCAC/B;;;;;;;sCAKV,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4IAAM;oCACL,SAAQ;oCACR,SAAS;oCACT,WAAU;;sDAEV,8OAAC,oNAAM;4CAAC,MAAM;4CAAI,WAAU;;;;;;wCAAS;;;;;;;8CAGvC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,4IAAM;4CAAC,SAAQ;4CAAU,SAAS;sDAAS;;;;;;sDAG5C,8OAAC,4IAAM;4CAAC,SAAS;sDAAc;;;;;;sDAG/B,8OAAC,4IAAM;4CAAC,SAAS;sDACd,aAAa,SAAS,GAAG,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQlD","debugId":null}},
    {"offset": {"line": 2767, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/box-dialogs/basic-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useTimeboxStore, ScheduledBox } from '@/stores/timebox-store'\nimport { Button } from '@/components/ui/button'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Trash2 } from 'lucide-react'\n\ninterface BasicDialogProps {\n  scheduledBox: ScheduledBox\n  onClose: () => void\n}\n\nexport default function BasicDialog({ scheduledBox, onClose }: BasicDialogProps) {\n  const { boxes, toggleBoxCompletion, removeScheduledBox } = useTimeboxStore()\n\n  const box = boxes.find(b => b.id === scheduledBox.boxId)\n\n  // 標記完成\n  const handleComplete = () => {\n    if (!scheduledBox.completed) {\n      toggleBoxCompletion(scheduledBox.id)\n    }\n    onClose()\n  }\n\n  // 刪除排程\n  const handleDelete = () => {\n    const confirmMessage = `確定要移除此排程嗎？\\n\\n箱子：${box?.name}\\n時間：${formatDateTime(scheduledBox.dayOfWeek, scheduledBox.startTime)}`;\n\n    if (!confirm(confirmMessage)) {\n      return;\n    }\n\n    removeScheduledBox(scheduledBox.id);\n    onClose();\n  }\n\n  if (!box) return null\n\n  const formatDateTime = (dayOfWeek: number, startTime: string) => {\n    const days = ['週日', '週一', '週二', '週三', '週四', '週五', '週六']\n    return `${days[dayOfWeek]} ${startTime}`\n  }\n\n  const formatDuration = (minutes: number) => {\n    if (minutes >= 60) {\n      const hours = Math.floor(minutes / 60)\n      const mins = minutes % 60\n      return mins > 0 ? `${hours}小時 ${mins}分鐘` : `${hours}小時`\n    }\n    return `${minutes}分鐘`\n  }\n\n  return (\n    <Dialog open={true} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle>\n            {box.name} - {formatDateTime(scheduledBox.dayOfWeek, scheduledBox.startTime)}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          {/* 基本資訊 */}\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">持續時間：</span>\n                <span className=\"font-medium\">{formatDuration(scheduledBox.duration)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600\">狀態：</span>\n                <span className={`font-medium ${scheduledBox.completed ? 'text-green-600' : 'text-gray-600'}`}>\n                  {scheduledBox.completed ? '已完成' : '未完成'}\n                </span>\n              </div>\n              {scheduledBox.completed && scheduledBox.completedAt && (\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">完成時間：</span>\n                  <span className=\"text-sm\">\n                    {new Date(scheduledBox.completedAt).toLocaleString('zh-TW')}\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* 按鈕 */}\n          <div className=\"flex justify-between pt-4 border-t\">\n            <Button\n              variant=\"outline\"\n              onClick={handleDelete}\n              className=\"text-morandi-red border-morandi-red hover:bg-morandi-red/10\"\n            >\n              <Trash2 size={16} className=\"mr-1\" />\n              移除排程\n            </Button>\n            <div className=\"flex space-x-2\">\n              <Button variant=\"outline\" onClick={onClose}>\n                取消\n              </Button>\n              <Button onClick={handleComplete}>\n                {scheduledBox.completed ? '已完成' : '標記完成'}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAYe,SAAS,YAAY,EAAE,YAAY,EAAE,OAAO,EAAoB;IAC7E,MAAM,EAAE,KAAK,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,GAAG,IAAA,oJAAe;IAE1E,MAAM,MAAM,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,aAAa,KAAK;IAEvD,OAAO;IACP,MAAM,iBAAiB;QACrB,IAAI,CAAC,aAAa,SAAS,EAAE;YAC3B,oBAAoB,aAAa,EAAE;QACrC;QACA;IACF;IAEA,OAAO;IACP,MAAM,eAAe;QACnB,MAAM,iBAAiB,CAAC,iBAAiB,EAAE,KAAK,KAAK,KAAK,EAAE,eAAe,aAAa,SAAS,EAAE,aAAa,SAAS,GAAG;QAE5H,IAAI,CAAC,QAAQ,iBAAiB;YAC5B;QACF;QAEA,mBAAmB,aAAa,EAAE;QAClC;IACF;IAEA,IAAI,CAAC,KAAK,OAAO;IAEjB,MAAM,iBAAiB,CAAC,WAAmB;QACzC,MAAM,OAAO;YAAC;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;SAAK;QACvD,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,WAAW;IAC1C;IAEA,MAAM,iBAAiB,CAAC;QACtB,IAAI,WAAW,IAAI;YACjB,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;YACnC,MAAM,OAAO,UAAU;YACvB,OAAO,OAAO,IAAI,GAAG,MAAM,GAAG,EAAE,KAAK,EAAE,CAAC,GAAG,GAAG,MAAM,EAAE,CAAC;QACzD;QACA,OAAO,GAAG,QAAQ,EAAE,CAAC;IACvB;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,mJAAa;YAAC,WAAU;;8BACvB,8OAAC,kJAAY;8BACX,cAAA,8OAAC,iJAAW;;4BACT,IAAI,IAAI;4BAAC;4BAAI,eAAe,aAAa,SAAS,EAAE,aAAa,SAAS;;;;;;;;;;;;8BAI/E,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DAAwB;;;;;;0DACxC,8OAAC;gDAAK,WAAU;0DAAe,eAAe,aAAa,QAAQ;;;;;;;;;;;;kDAErE,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DAAwB;;;;;;0DACxC,8OAAC;gDAAK,WAAW,CAAC,YAAY,EAAE,aAAa,SAAS,GAAG,mBAAmB,iBAAiB;0DAC1F,aAAa,SAAS,GAAG,QAAQ;;;;;;;;;;;;oCAGrC,aAAa,SAAS,IAAI,aAAa,WAAW,kBACjD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DAAwB;;;;;;0DACxC,8OAAC;gDAAK,WAAU;0DACb,IAAI,KAAK,aAAa,WAAW,EAAE,cAAc,CAAC;;;;;;;;;;;;;;;;;;;;;;;sCAQ7D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4IAAM;oCACL,SAAQ;oCACR,SAAS;oCACT,WAAU;;sDAEV,8OAAC,oNAAM;4CAAC,MAAM;4CAAI,WAAU;;;;;;wCAAS;;;;;;;8CAGvC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,4IAAM;4CAAC,SAAQ;4CAAU,SAAS;sDAAS;;;;;;sDAG5C,8OAAC,4IAAM;4CAAC,SAAS;sDACd,aAAa,SAAS,GAAG,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQlD","debugId":null}},
    {"offset": {"line": 3016, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/scheduled-box-item.tsx"],"sourcesContent":["'use client'\n\nimport { useState, memo, useEffect } from 'react'\nimport { useTimeboxStore, ScheduledBox } from '@/stores/timebox-store'\nimport { Dumbbell, MessageSquare, Package, Check } from 'lucide-react'\nimport WorkoutDialog from './box-dialogs/workout-dialog'\nimport ReminderDialog from './box-dialogs/reminder-dialog'\nimport BasicDialog from './box-dialogs/basic-dialog'\n\nconst typeIcons = {\n  workout: Dumbbell,\n  reminder: MessageSquare,\n  basic: Package,\n}\n\ninterface ScheduledBoxItemProps {\n  scheduledBox: ScheduledBox\n  height: number\n}\n\nfunction ScheduledBoxItem({ scheduledBox, height }: ScheduledBoxItemProps) {\n  const { boxes } = useTimeboxStore()\n  const [showDialog, setShowDialog] = useState(false)\n\n  // 監聽來自中間格子的點擊事件\n  useEffect(() => {\n    const handleOpenDialog = (event: CustomEvent) => {\n      if (event.detail.scheduledBoxId === scheduledBox.id) {\n        setShowDialog(true)\n      }\n    }\n\n    window.addEventListener('openBoxDialog', handleOpenDialog as EventListener)\n    return () => {\n      window.removeEventListener('openBoxDialog', handleOpenDialog as EventListener)\n    }\n  }, [scheduledBox.id])\n\n  const box = boxes.find(b => b.id === scheduledBox.boxId)\n  if (!box) return null\n\n  const Icon = typeIcons[box.type]\n\n  const formatDuration = (minutes: number) => {\n    if (minutes >= 60) {\n      const hours = Math.floor(minutes / 60)\n      const mins = minutes % 60\n      return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`\n    }\n    return `${minutes}m`\n  }\n\n  return (\n    <div\n      className={`h-full w-full rounded-t-md shadow-sm border-l-4 p-2 text-white cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${\n        scheduledBox.completed ? 'opacity-75' : ''\n      }`}\n      style={{\n        backgroundColor: box.color,\n        borderLeftColor: scheduledBox.completed ? '#10B981' : box.color,\n      }}\n      onClick={() => setShowDialog(true)}\n    >\n      <div className=\"flex items-start justify-between h-full\">\n        <div className=\"flex-1 min-w-0\">\n          {/* 箱子名稱 */}\n          <div className=\"font-medium text-sm truncate mb-1\">\n            {box.name}\n          </div>\n\n          {/* 時間資訊 */}\n          <div className=\"text-xs opacity-90\">\n            {scheduledBox.startTime} • {formatDuration(scheduledBox.duration)}\n          </div>\n\n          {/* 完成狀態 */}\n          {scheduledBox.completed && scheduledBox.completedAt && (\n            <div className=\"text-xs opacity-90 mt-1\">\n              ✓ {new Date(scheduledBox.completedAt).toLocaleTimeString('zh-TW', {\n                hour: '2-digit',\n                minute: '2-digit'\n              })}\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex flex-col items-center space-y-1 ml-2\">\n          {/* 類型圖示 */}\n          <Icon className=\"h-4 w-4\" />\n\n          {/* 完成標記 */}\n          {scheduledBox.completed && (\n            <Check className=\"h-3 w-3 text-green-300\" />\n          )}\n        </div>\n      </div>\n\n      {/* 對話框 */}\n      {showDialog && (\n        <>\n          {box.type === 'workout' && (\n            <WorkoutDialog\n              scheduledBox={scheduledBox}\n              onClose={() => setShowDialog(false)}\n            />\n          )}\n          {box.type === 'reminder' && (\n            <ReminderDialog\n              scheduledBox={scheduledBox}\n              onClose={() => setShowDialog(false)}\n            />\n          )}\n          {box.type === 'basic' && (\n            <BasicDialog\n              scheduledBox={scheduledBox}\n              onClose={() => setShowDialog(false)}\n            />\n          )}\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default memo(ScheduledBoxItem)"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAPA;;;;;;;;AASA,MAAM,YAAY;IAChB,SAAS,sNAAQ;IACjB,UAAU,yOAAa;IACvB,OAAO,mNAAO;AAChB;AAOA,SAAS,iBAAiB,EAAE,YAAY,EAAE,MAAM,EAAyB;IACvE,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,oJAAe;IACjC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,gBAAgB;IAChB,IAAA,kNAAS,EAAC;QACR,MAAM,mBAAmB,CAAC;YACxB,IAAI,MAAM,MAAM,CAAC,cAAc,KAAK,aAAa,EAAE,EAAE;gBACnD,cAAc;YAChB;QACF;QAEA,OAAO,gBAAgB,CAAC,iBAAiB;QACzC,OAAO;YACL,OAAO,mBAAmB,CAAC,iBAAiB;QAC9C;IACF,GAAG;QAAC,aAAa,EAAE;KAAC;IAEpB,MAAM,MAAM,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,aAAa,KAAK;IACvD,IAAI,CAAC,KAAK,OAAO;IAEjB,MAAM,OAAO,SAAS,CAAC,IAAI,IAAI,CAAC;IAEhC,MAAM,iBAAiB,CAAC;QACtB,IAAI,WAAW,IAAI;YACjB,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;YACnC,MAAM,OAAO,UAAU;YACvB,OAAO,OAAO,IAAI,GAAG,MAAM,EAAE,EAAE,KAAK,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC;QACtD;QACA,OAAO,GAAG,QAAQ,CAAC,CAAC;IACtB;IAEA,qBACE,8OAAC;QACC,WAAW,CAAC,0IAA0I,EACpJ,aAAa,SAAS,GAAG,eAAe,IACxC;QACF,OAAO;YACL,iBAAiB,IAAI,KAAK;YAC1B,iBAAiB,aAAa,SAAS,GAAG,YAAY,IAAI,KAAK;QACjE;QACA,SAAS,IAAM,cAAc;;0BAE7B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCAAI,WAAU;0CACZ,IAAI,IAAI;;;;;;0CAIX,8OAAC;gCAAI,WAAU;;oCACZ,aAAa,SAAS;oCAAC;oCAAI,eAAe,aAAa,QAAQ;;;;;;;4BAIjE,aAAa,SAAS,IAAI,aAAa,WAAW,kBACjD,8OAAC;gCAAI,WAAU;;oCAA0B;oCACpC,IAAI,KAAK,aAAa,WAAW,EAAE,kBAAkB,CAAC,SAAS;wCAChE,MAAM;wCACN,QAAQ;oCACV;;;;;;;;;;;;;kCAKN,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCAAK,WAAU;;;;;;4BAGf,aAAa,SAAS,kBACrB,8OAAC,6MAAK;gCAAC,WAAU;;;;;;;;;;;;;;;;;;YAMtB,4BACC;;oBACG,IAAI,IAAI,KAAK,2BACZ,8OAAC,sLAAa;wBACZ,cAAc;wBACd,SAAS,IAAM,cAAc;;;;;;oBAGhC,IAAI,IAAI,KAAK,4BACZ,8OAAC,uLAAc;wBACb,cAAc;wBACd,SAAS,IAAM,cAAc;;;;;;oBAGhC,IAAI,IAAI,KAAK,yBACZ,8OAAC,oLAAW;wBACV,cAAc;wBACd,SAAS,IAAM,cAAc;;;;;;;;;;;;;;AAO3C;qDAEe,IAAA,6MAAI,EAAC","debugId":null}},
    {"offset": {"line": 3194, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/time-grid.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useTimeboxStore } from '@/stores/timebox-store'\nimport BoxSelector from './box-selector'\nimport ScheduledBoxItem from './scheduled-box-item'\n\ninterface TimeGridProps {\n  weekDays: Date[]\n  timeInterval: 30 | 60\n}\n\nexport default function TimeGrid({ weekDays, timeInterval }: TimeGridProps) {\n  const { scheduledBoxes, addScheduledBox, currentWeek, initializeCurrentWeek, boxes } = useTimeboxStore()\n  const [selectedCell, setSelectedCell] = useState<{\n    dayOfWeek: number\n    startTime: string\n  } | null>(null)\n\n  // 生成時間段\n  const timeSlots = []\n  for (let hour = 6; hour < 24; hour++) {\n    if (timeInterval === 30) {\n      timeSlots.push(`${hour.toString().padStart(2, '0')}:00`)\n      timeSlots.push(`${hour.toString().padStart(2, '0')}:30`)\n    } else {\n      timeSlots.push(`${hour.toString().padStart(2, '0')}:00`)\n    }\n  }\n\n  // 檢查時間衝突\n  const hasConflict = (dayOfWeek: number, startTime: string, duration: number) => {\n    const startMinutes = timeToMinutes(startTime)\n    const endMinutes = startMinutes + duration\n\n    return scheduledBoxes.some(box => {\n      if (box.dayOfWeek !== dayOfWeek) return false\n\n      const boxStartMinutes = timeToMinutes(box.startTime)\n      const boxEndMinutes = boxStartMinutes + box.duration\n\n      return (startMinutes < boxEndMinutes && endMinutes > boxStartMinutes)\n    })\n  }\n\n  const timeToMinutes = (time: string) => {\n    const [hours, minutes] = time.split(':').map(Number)\n    return hours * 60 + minutes\n  }\n\n  const minutesToTime = (minutes: number) => {\n    const hours = Math.floor(minutes / 60)\n    const mins = minutes % 60\n    return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`\n  }\n\n  // 處理箱子選擇\n  const handleBoxSelect = (boxId: string, duration: number) => {\n    if (!selectedCell) return\n\n    // 確保有 currentWeek，如果沒有則創建\n    let weekId = currentWeek?.id\n    if (!currentWeek) {\n      const weekDays = []\n      const today = new Date()\n      const weekStart = getWeekStart(today)\n\n      for (let i = 0; i < 7; i++) {\n        const day = new Date(weekStart)\n        day.setDate(weekStart.getDate() + i)\n        weekDays.push(day)\n      }\n\n      // 使用第一天作為 weekStart 來初始化\n      initializeCurrentWeek(weekDays[0])\n      weekId = generateId() // 臨時 ID，實際會在 store 中生成\n    }\n\n    // 檢查衝突\n    if (hasConflict(selectedCell.dayOfWeek, selectedCell.startTime, duration)) {\n      alert('此時段已有其他箱子，請選擇其他時間')\n      return\n    }\n\n    addScheduledBox({\n      boxId,\n      weekId: weekId || generateId(),\n      dayOfWeek: selectedCell.dayOfWeek,\n      startTime: selectedCell.startTime,\n      duration,\n      completed: false,\n    })\n\n    setSelectedCell(null)\n  }\n\n  // 週開始計算函數（與頁面中的保持一致）\n  const getWeekStart = (date: Date) => {\n    const d = new Date(date)\n    const day = d.getDay()\n    const diff = d.getDate() - day + (day === 0 ? -6 : 1) // 調整為週一開始\n    return new Date(d.setDate(diff))\n  }\n\n  // 簡單的 ID 生成器\n  const generateId = () => {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2)\n  }\n\n  // 獲取單元格中的箱子（起始時段）\n  const getBoxInCell = (dayOfWeek: number, timeSlot: string) => {\n    return scheduledBoxes.find(box =>\n      box.dayOfWeek === dayOfWeek && box.startTime === timeSlot\n    )\n  }\n\n  // 檢查時段是否被任何箱子佔用\n  const isTimeSlotOccupied = (dayOfWeek: number, timeSlot: string) => {\n    const currentMinutes = timeToMinutes(timeSlot)\n\n    return scheduledBoxes.some(box => {\n      if (box.dayOfWeek !== dayOfWeek) return false\n\n      const boxStartMinutes = timeToMinutes(box.startTime)\n      const boxEndMinutes = boxStartMinutes + box.duration\n\n      return currentMinutes >= boxStartMinutes && currentMinutes < boxEndMinutes\n    })\n  }\n\n  // 獲取佔用此時段的箱子\n  const getOccupyingBox = (dayOfWeek: number, timeSlot: string) => {\n    const currentMinutes = timeToMinutes(timeSlot)\n\n    return scheduledBoxes.find(box => {\n      if (box.dayOfWeek !== dayOfWeek) return false\n\n      const boxStartMinutes = timeToMinutes(box.startTime)\n      const boxEndMinutes = boxStartMinutes + box.duration\n\n      return currentMinutes >= boxStartMinutes && currentMinutes < boxEndMinutes\n    })\n  }\n\n  // 判斷箱子在此時段的位置類型\n  const getBoxPositionType = (scheduledBox: any, timeSlot: string) => {\n    const currentMinutes = timeToMinutes(timeSlot)\n    const boxStartMinutes = timeToMinutes(scheduledBox.startTime)\n    const boxEndMinutes = boxStartMinutes + scheduledBox.duration\n\n    if (currentMinutes === boxStartMinutes) return 'start'\n    if (currentMinutes + timeInterval === boxEndMinutes) return 'end'\n    return 'middle'\n  }\n\n  // 計算箱子高度\n  const getBoxHeight = (duration: number) => {\n    const slotHeight = timeInterval === 30 ? 32 : 64 // 每個時段的高度（px）- 適配 h-8/h-12\n    const slotsNeeded = duration / timeInterval\n    return slotsNeeded * slotHeight\n  }\n\n  // 處理拖放\n  const handleDrop = (e: React.DragEvent, dayOfWeek: number, timeSlot: string) => {\n    e.preventDefault()\n\n    try {\n      const data = JSON.parse(e.dataTransfer.getData('application/json'))\n\n      if (data.type === 'box') {\n        setSelectedCell({ dayOfWeek, startTime: timeSlot })\n      }\n    } catch (error) {\n      console.error('Invalid drag data')\n    }\n  }\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault()\n  }\n\n  return (\n    <div className=\"relative\">\n      <div className=\"grid grid-cols-8 min-h-[600px]\">\n        {/* 時間軸 */}\n        <div className=\"border-r border-border bg-morandi-container/10\">\n          {timeSlots.map((timeSlot) => (\n            <div\n              key={timeSlot}\n              className=\"h-8 sm:h-12 flex items-center justify-center text-xs sm:text-sm text-morandi-secondary border-b border-border/50\"\n            >\n              {timeSlot}\n            </div>\n          ))}\n        </div>\n\n        {/* 日期列 */}\n        {weekDays.map((day, dayIndex) => (\n          <div key={dayIndex} className=\"border-r border-border last:border-r-0 relative bg-card\">\n            {timeSlots.map((timeSlot, timeIndex) => {\n              const existingBox = getBoxInCell(dayIndex, timeSlot)\n              const occupyingBox = getOccupyingBox(dayIndex, timeSlot)\n              const isOccupied = !!occupyingBox\n              const isStartTime = !!existingBox\n\n              // 如果時段被佔用，渲染箱子的對應部分\n              if (isOccupied && !isStartTime) {\n                const baseBox = boxes.find(b => b.id === occupyingBox.boxId)\n                const positionType = getBoxPositionType(occupyingBox, timeSlot)\n\n                const borderRadius = positionType === 'start' ? 'rounded-t-md' :\n                                    positionType === 'end' ? 'rounded-b-md' : ''\n\n                return (\n                  <div\n                    key={`${dayIndex}-${timeIndex}`}\n                    className={`h-8 sm:h-12 border-b border-border/50 relative cursor-pointer ${borderRadius}`}\n                    style={{ backgroundColor: baseBox?.color }}\n                    onClick={() => {\n                      // 點擊中間部分，通過 window 事件通知打開對話框\n                      window.dispatchEvent(new CustomEvent('openBoxDialog', {\n                        detail: { scheduledBoxId: occupyingBox.id }\n                      }))\n                    }}\n                  >\n                    {/* 中間和結尾部分可以顯示簡化資訊 */}\n                    {positionType === 'end' && (\n                      <div className=\"absolute bottom-1 right-2 text-xs text-white opacity-75\">\n                        {minutesToTime(timeToMinutes(occupyingBox.startTime) + occupyingBox.duration)}\n                      </div>\n                    )}\n                  </div>\n                )\n              }\n\n              return (\n                <div\n                  key={`${dayIndex}-${timeIndex}`}\n                  className={`h-8 sm:h-12 border-b border-border/50 relative cursor-pointer hover:bg-morandi-container/20 transition-colors duration-150 ${\n                    selectedCell?.dayOfWeek === dayIndex && selectedCell?.startTime === timeSlot\n                      ? 'bg-morandi-gold/10 border-morandi-gold/30'\n                      : ''\n                  }`}\n                  onClick={() => {\n                    if (!isOccupied) {\n                      setSelectedCell({ dayOfWeek: dayIndex, startTime: timeSlot })\n                    }\n                  }}\n                  onDrop={(e) => handleDrop(e, dayIndex, timeSlot)}\n                  onDragOver={handleDragOver}\n                >\n                  {isStartTime && (\n                    <div\n                      data-box-id={existingBox.id}\n                      className=\"h-full w-full\"\n                    >\n                      <ScheduledBoxItem\n                        scheduledBox={existingBox}\n                        height={getBoxHeight(existingBox.duration)}\n                      />\n                    </div>\n                  )}\n\n                  {/* 提示文字 - 只在空白時段顯示 */}\n                  {!isOccupied && selectedCell?.dayOfWeek === dayIndex && selectedCell?.startTime === timeSlot && (\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\n                      <span className=\"text-xs text-morandi-gold font-medium\">點擊新增箱子</span>\n                    </div>\n                  )}\n                </div>\n              )\n            })}\n          </div>\n        ))}\n      </div>\n\n      {/* 箱子選擇器 */}\n      {selectedCell && (\n        <BoxSelector\n          onSelect={handleBoxSelect}\n          onClose={() => setSelectedCell(null)}\n          timeInterval={timeInterval}\n        />\n      )}\n\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3487, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/week-view.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect } from 'react'\nimport { useTimeboxStore } from '@/stores/timebox-store'\nimport TimeGrid from './time-grid'\n\ninterface WeekViewProps {\n  selectedWeek: Date\n  timeInterval: 30 | 60\n}\n\nexport default function WeekView({ selectedWeek, timeInterval }: WeekViewProps) {\n  const { currentWeek, initializeCurrentWeek } = useTimeboxStore()\n\n  // 初始化當前週\n  useEffect(() => {\n    if (!currentWeek ||\n        new Date(currentWeek.weekStart).getTime() !== getWeekStart(selectedWeek).getTime()) {\n      initializeCurrentWeek(selectedWeek)\n    }\n  }, [selectedWeek, currentWeek, initializeCurrentWeek])\n\n  const getWeekStart = (date: Date) => {\n    const d = new Date(date)\n    const day = d.getDay()\n    const diff = d.getDate() - day + (day === 0 ? -6 : 1) // 調整為週一開始\n    return new Date(d.setDate(diff))\n  }\n\n  const weekDays = []\n  const weekStart = getWeekStart(selectedWeek)\n\n  for (let i = 0; i < 7; i++) {\n    const day = new Date(weekStart)\n    day.setDate(weekStart.getDate() + i)\n    weekDays.push(day)\n  }\n\n  const dayLabels = ['週日', '週一', '週二', '週三', '週四', '週五', '週六']\n\n  return (\n    <div className=\"flex-1 overflow-hidden bg-card\">\n      {/* 日期標題列 */}\n      <div className=\"grid grid-cols-8 border-b border-border bg-morandi-container/30\">\n        {/* 時間欄標題 */}\n        <div className=\"p-2 sm:p-4 text-xs sm:text-sm font-medium text-morandi-secondary border-r border-border flex items-center justify-center\">\n          時間\n        </div>\n\n        {/* 日期欄標題 */}\n        {weekDays.map((day, index) => {\n          const isToday = day.toDateString() === new Date().toDateString()\n          return (\n            <div\n              key={index}\n              className={`p-2 sm:p-4 text-center border-r border-border last:border-r-0 flex items-center justify-center ${\n                isToday ? 'bg-morandi-gold/10' : ''\n              }`}\n            >\n              <div className={`text-xs sm:text-sm font-medium ${isToday ? 'text-morandi-gold' : 'text-morandi-secondary'}`}>\n                <span className=\"hidden sm:inline\">{dayLabels[day.getDay()]} {day.getDate()}</span>\n                <span className=\"sm:hidden\">{dayLabels[day.getDay()].slice(1)} {day.getDate()}</span>\n              </div>\n            </div>\n          )\n        })}\n      </div>\n\n      {/* 時間網格 */}\n      <div className=\"flex-1 overflow-auto scrollable-content\">\n        <TimeGrid\n          weekDays={weekDays}\n          timeInterval={timeInterval}\n        />\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAWe,SAAS,SAAS,EAAE,YAAY,EAAE,YAAY,EAAiB;IAC5E,MAAM,EAAE,WAAW,EAAE,qBAAqB,EAAE,GAAG,IAAA,oJAAe;IAE9D,SAAS;IACT,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,eACD,IAAI,KAAK,YAAY,SAAS,EAAE,OAAO,OAAO,aAAa,cAAc,OAAO,IAAI;YACtF,sBAAsB;QACxB;IACF,GAAG;QAAC;QAAc;QAAa;KAAsB;IAErD,MAAM,eAAe,CAAC;QACpB,MAAM,IAAI,IAAI,KAAK;QACnB,MAAM,MAAM,EAAE,MAAM;QACpB,MAAM,OAAO,EAAE,OAAO,KAAK,MAAM,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,EAAE,UAAU;;QAChE,OAAO,IAAI,KAAK,EAAE,OAAO,CAAC;IAC5B;IAEA,MAAM,WAAW,EAAE;IACnB,MAAM,YAAY,aAAa;IAE/B,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;QAC1B,MAAM,MAAM,IAAI,KAAK;QACrB,IAAI,OAAO,CAAC,UAAU,OAAO,KAAK;QAClC,SAAS,IAAI,CAAC;IAChB;IAEA,MAAM,YAAY;QAAC;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;KAAK;IAE5D,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCAA2H;;;;;;oBAKzI,SAAS,GAAG,CAAC,CAAC,KAAK;wBAClB,MAAM,UAAU,IAAI,YAAY,OAAO,IAAI,OAAO,YAAY;wBAC9D,qBACE,8OAAC;4BAEC,WAAW,CAAC,+FAA+F,EACzG,UAAU,uBAAuB,IACjC;sCAEF,cAAA,8OAAC;gCAAI,WAAW,CAAC,+BAA+B,EAAE,UAAU,sBAAsB,0BAA0B;;kDAC1G,8OAAC;wCAAK,WAAU;;4CAAoB,SAAS,CAAC,IAAI,MAAM,GAAG;4CAAC;4CAAE,IAAI,OAAO;;;;;;;kDACzE,8OAAC;wCAAK,WAAU;;4CAAa,SAAS,CAAC,IAAI,MAAM,GAAG,CAAC,KAAK,CAAC;4CAAG;4CAAE,IAAI,OAAO;;;;;;;;;;;;;2BAPxE;;;;;oBAWX;;;;;;;0BAIF,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,+JAAQ;oBACP,UAAU;oBACV,cAAc;;;;;;;;;;;;;;;;;AAKxB","debugId":null}},
    {"offset": {"line": 3624, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-morandi-gold disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,qXACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 3652, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-morandi-container bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-morandi-secondary focus:outline-none focus:ring-2 focus:ring-morandi-gold focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,0KAAoB;AAEnC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,cAAc,2KAAqB;AAEzC,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,6KAAuB;QACtB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wUACA;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8OAAC,mOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,mNAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,6NAAS;YAAC,WAAU;;;;;;;;;;;AAGzB,qBAAqB,WAAW,GAAG,oLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,mOAAW;YAAC,WAAU;;;;;;;;;;;AAG3B,uBAAuB,WAAW,GAChC,sLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,8OAAC,4KAAsB;kBACrB,cAAA,8OAAC,6KAAuB;YACtB,KAAK;YACL,WAAW,IAAA,yHAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,8OAAC;;;;;8BACD,8OAAC,8KAAwB;oBACvB,WAAW,IAAA,yHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8OAAC;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,6KAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,mLAA6B;8BAC5B,cAAA,8OAAC,6MAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,8OAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,+KAAyB;QACxB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG,+KAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 3852, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/color-picker.tsx"],"sourcesContent":["'use client'\n\nimport { morandiColors } from '@/stores/timebox-store'\n\ninterface ColorPickerProps {\n  value: string\n  onChange: (color: string) => void\n  className?: string\n}\n\nexport default function ColorPicker({ value, onChange, className = '' }: ColorPickerProps) {\n  return (\n    <div className={className}>\n      {/* 顏色選擇面板 - 直接展開 */}\n      <div className=\"grid grid-cols-4 gap-2\">\n        {morandiColors.map((color) => (\n          <button\n            key={color.value}\n            type=\"button\"\n            onClick={() => onChange(color.value)}\n            className={`w-12 h-12 rounded-lg transition-transform hover:scale-105 ${\n              color.value === value\n                ? 'ring-2 ring-gray-600 ring-offset-2'\n                : 'border border-gray-200'\n            }`}\n            style={{ backgroundColor: color.value }}\n            title={color.name}\n          >\n            <span className=\"sr-only\">{color.name}</span>\n          </button>\n        ))}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUe,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAoB;IACvF,qBACE,8OAAC;QAAI,WAAW;kBAEd,cAAA,8OAAC;YAAI,WAAU;sBACZ,kJAAa,CAAC,GAAG,CAAC,CAAC,sBAClB,8OAAC;oBAEC,MAAK;oBACL,SAAS,IAAM,SAAS,MAAM,KAAK;oBACnC,WAAW,CAAC,0DAA0D,EACpE,MAAM,KAAK,KAAK,QACZ,uCACA,0BACJ;oBACF,OAAO;wBAAE,iBAAiB,MAAM,KAAK;oBAAC;oBACtC,OAAO,MAAM,IAAI;8BAEjB,cAAA,8OAAC;wBAAK,WAAU;kCAAW,MAAM,IAAI;;;;;;mBAXhC,MAAM,KAAK;;;;;;;;;;;;;;;AAiB5B","debugId":null}},
    {"offset": {"line": 3902, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/box-manager.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useTimeboxStore, morandiColors } from '@/stores/timebox-store'\nimport { useAuthStore } from '@/stores/auth-store'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport ColorPicker from '@/components/ui/color-picker'\nimport { Plus, Dumbbell, MessageSquare, Package, Edit, Trash2 } from 'lucide-react'\n\nconst typeIcons = {\n  workout: Dumbbell,\n  reminder: MessageSquare,\n  basic: Package,\n}\n\nconst typeLabels = {\n  workout: '重訓箱子',\n  reminder: '文字提示箱子',\n  basic: '普通箱子',\n}\n\nexport default function BoxManager() {\n  const { boxes, createBox, updateBox, deleteBox } = useTimeboxStore()\n  const { user } = useAuthStore()\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false)\n  const [editingBox, setEditingBox] = useState<string | null>(null)\n\n  // 新增/編輯表單狀態\n  const [formData, setFormData] = useState({\n    name: '',\n    type: 'basic' as 'workout' | 'reminder' | 'basic',\n    color: morandiColors[0].value,\n  })\n\n  const handleSubmit = () => {\n    if (!formData.name.trim()) return\n\n    if (editingBox) {\n      updateBox(editingBox, {\n        name: formData.name,\n        type: formData.type,\n        color: formData.color,\n      })\n      setEditingBox(null)\n    } else {\n      createBox({\n        name: formData.name,\n        type: formData.type,\n        color: formData.color,\n        userId: user?.employeeNumber || 'guest',\n      })\n    }\n\n    setFormData({\n      name: '',\n      type: 'basic',\n      color: morandiColors[0].value,\n    })\n    setIsCreateDialogOpen(false)\n  }\n\n  const handleEdit = (box: any) => {\n    setFormData({\n      name: box.name,\n      type: box.type,\n      color: box.color,\n    })\n    setEditingBox(box.id)\n    setIsCreateDialogOpen(true)\n  }\n\n  const handleDelete = (id: string) => {\n    if (confirm('確定要刪除這個箱子嗎？')) {\n      deleteBox(id)\n    }\n  }\n\n  return (\n    <div className=\"w-full bg-white flex flex-col\">\n      {/* 標題與新增按鈕 */}\n      <div className=\"p-4 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">我的箱子</h2>\n          <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n            <DialogTrigger asChild>\n              <Button size=\"sm\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                新增箱子\n              </Button>\n            </DialogTrigger>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle>\n                  {editingBox ? '編輯箱子' : '新增箱子'}\n                </DialogTitle>\n              </DialogHeader>\n              <div className=\"space-y-4\">\n                {/* 箱子名稱 */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    箱子名稱 *\n                  </label>\n                  <Input\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    placeholder=\"請輸入箱子名稱\"\n                  />\n                </div>\n\n                {/* 箱子類型 */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    箱子類型\n                  </label>\n                  <Select\n                    value={formData.type}\n                    onValueChange={(value: 'workout' | 'reminder' | 'basic') =>\n                      setFormData({ ...formData, type: value })\n                    }\n                  >\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"basic\">普通箱子</SelectItem>\n                      <SelectItem value=\"workout\">重訓箱子</SelectItem>\n                      <SelectItem value=\"reminder\">文字提示箱子</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* 顏色選擇 */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    顏色選擇\n                  </label>\n                  <ColorPicker\n                    value={formData.color}\n                    onChange={(color) => setFormData({ ...formData, color })}\n                  />\n                </div>\n\n                {/* 按鈕 */}\n                <div className=\"flex justify-end space-x-2 pt-4\">\n                  <Button\n                    variant=\"outline\"\n                    onClick={() => {\n                      setIsCreateDialogOpen(false)\n                      setEditingBox(null)\n                      setFormData({\n                        name: '',\n                        type: 'basic',\n                        color: morandiColors[0].value,\n                      })\n                    }}\n                  >\n                    取消\n                  </Button>\n                  <Button onClick={handleSubmit} disabled={!formData.name.trim()}>\n                    {editingBox ? '更新' : '建立'}\n                  </Button>\n                </div>\n              </div>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      {/* 箱子列表 */}\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        {boxes.length === 0 ? (\n          <div className=\"text-center text-gray-500 py-8\">\n            還沒有建立任何箱子\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {boxes.map((box) => {\n              const Icon = typeIcons[box.type]\n              return (\n                <div\n                  key={box.id}\n                  className=\"group relative p-3 rounded-lg border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all duration-200 cursor-move transform hover:scale-105\"\n                  style={{ borderLeftColor: box.color, borderLeftWidth: '4px' }}\n                  draggable\n                  onDragStart={(e) => {\n                    e.dataTransfer.setData('application/json', JSON.stringify({\n                      type: 'box',\n                      boxId: box.id,\n                    }))\n                  }}\n                >\n                  <div className=\"flex items-center space-x-3\">\n                    {/* 圖示 */}\n                    <div\n                      className=\"w-8 h-8 rounded-md flex items-center justify-center text-white\"\n                      style={{ backgroundColor: box.color }}\n                    >\n                      <Icon className=\"h-4 w-4\" />\n                    </div>\n\n                    {/* 箱子資訊 */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"font-medium text-gray-900 truncate\">\n                        {box.name}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        {typeLabels[box.type]}\n                      </div>\n                    </div>\n\n                    {/* 操作按鈕 */}\n                    <div className=\"opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleEdit(box)\n                        }}\n                      >\n                        <Edit className=\"h-3 w-3\" />\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handleDelete(box.id)\n                        }}\n                      >\n                        <Trash2 className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4395, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/statistics-panel.tsx"],"sourcesContent":["'use client'\n\nimport { memo } from 'react'\nimport { useTimeboxStore } from '@/stores/timebox-store'\nimport { Card } from '@/components/ui/card'\n\nfunction StatisticsPanel() {\n  const { getWeekStatistics } = useTimeboxStore()\n  const stats = getWeekStatistics()\n\n  const formatTime = (minutes: number) => {\n    const hours = Math.floor(minutes / 60)\n    const mins = minutes % 60\n    if (hours > 0) {\n      return `${hours}小時${mins > 0 ? ` ${mins}分鐘` : ''}`\n    }\n    return `${mins}分鐘`\n  }\n\n  const hasWorkoutStats = stats.totalWorkoutSessions > 0 && stats.totalWorkoutVolume && stats.totalWorkoutVolume > 0\n\n  return (\n    <div className=\"bg-card border-b border-border px-6 py-4\">\n      <div className={`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-${hasWorkoutStats ? '4' : '3'} gap-4`}>\n        {/* 完成率 */}\n        <div className=\"morandi-card p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs sm:text-sm font-medium text-morandi-secondary\">本週完成率</p>\n              <p className=\"text-lg sm:text-2xl font-bold text-morandi-primary\">\n                {Math.round(stats.completionRate * 100)}%\n              </p>\n            </div>\n            <div className=\"w-8 h-8 sm:w-12 sm:h-12 rounded-full bg-morandi-container flex items-center justify-center\">\n              <div className=\"text-morandi-gold font-semibold text-xs sm:text-base\">\n                {Math.round(stats.completionRate * 100)}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 運動時間 */}\n        <div className=\"morandi-card p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs sm:text-sm font-medium text-morandi-secondary\">運動時間</p>\n              <p className=\"text-lg sm:text-2xl font-bold text-morandi-primary\">\n                <span className=\"hidden sm:inline\">{formatTime(stats.totalWorkoutTime)}</span>\n                <span className=\"sm:hidden\">{Math.floor(stats.totalWorkoutTime / 60)}h</span>\n              </p>\n            </div>\n            <div className=\"w-8 h-8 sm:w-12 sm:h-12 rounded-full bg-morandi-container flex items-center justify-center\">\n              <div className=\"text-morandi-green font-semibold text-xs sm:text-sm\">\n                {Math.floor(stats.totalWorkoutTime / 60)}h\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 完成項目分布 */}\n        <div className=\"morandi-card p-4\">\n          <div>\n            <p className=\"text-xs sm:text-sm font-medium text-morandi-secondary mb-2\">完成項目</p>\n            <div className=\"space-y-1.5\">\n              <div className=\"flex justify-between text-xs sm:text-sm\">\n                <span className=\"text-morandi-secondary\">運動</span>\n                <span className=\"font-medium text-morandi-primary\">{stats.completedByType.workout} 次</span>\n              </div>\n              <div className=\"flex justify-between text-xs sm:text-sm\">\n                <span className=\"text-morandi-secondary\">保養</span>\n                <span className=\"font-medium text-morandi-primary\">{stats.completedByType.reminder} 次</span>\n              </div>\n              <div className=\"flex justify-between text-xs sm:text-sm\">\n                <span className=\"text-morandi-secondary\">其他</span>\n                <span className=\"font-medium text-morandi-primary\">{stats.completedByType.basic} 次</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 重訓統計 */}\n        {hasWorkoutStats && (\n          <div className=\"morandi-card p-4\">\n            <div>\n              <p className=\"text-xs sm:text-sm font-medium text-morandi-secondary mb-2\">重訓統計</p>\n              <div className=\"space-y-1.5\">\n                <div className=\"flex justify-between text-xs sm:text-sm\">\n                  <span className=\"text-morandi-secondary\">本週訓練量</span>\n                  <span className=\"font-medium text-morandi-primary\">{stats.totalWorkoutVolume?.toLocaleString()} kg</span>\n                </div>\n                <div className=\"flex justify-between text-xs sm:text-sm\">\n                  <span className=\"text-morandi-secondary\">訓練次數</span>\n                  <span className=\"font-medium text-morandi-primary\">{stats.totalWorkoutSessions} 次</span>\n                </div>\n                <div className=\"flex justify-between text-xs sm:text-sm\">\n                  <span className=\"text-morandi-secondary\">平均每次</span>\n                  <span className=\"font-medium text-morandi-primary\">\n                    {Math.round((stats.totalWorkoutVolume || 0) / stats.totalWorkoutSessions).toLocaleString()} kg\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default memo(StatisticsPanel)"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4808, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, indeterminate, ...props }, ref) => {\n  const checkboxRef = React.useRef<HTMLButtonElement>(null);\n\n  React.useImperativeHandle(ref, () => checkboxRef.current!);\n\n  React.useEffect(() => {\n    if (checkboxRef.current) {\n      checkboxRef.current.indeterminate = indeterminate ?? false;\n    }\n  }, [indeterminate]);\n\n  return (\n    <CheckboxPrimitive.Root\n      ref={checkboxRef}\n      className={cn(\n        \"peer h-4 w-4 shrink-0 rounded-sm border border-morandi-container ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-morandi-gold focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-morandi-gold data-[state=checked]:text-white\",\n        className\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        className={cn(\"flex items-center justify-center text-current\")}\n      >\n        <Check className=\"h-4 w-4\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  );\n})\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,mNAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,aAAa,EAAE,GAAG,OAAO,EAAE;IACzC,MAAM,cAAc,+MAAY,CAAoB;IAEpD,4NAAyB,CAAC,KAAK,IAAM,YAAY,OAAO;IAExD,kNAAe,CAAC;QACd,IAAI,YAAY,OAAO,EAAE;YACvB,YAAY,OAAO,CAAC,aAAa,GAAG,iBAAiB;QACvD;IACF,GAAG;QAAC;KAAc;IAElB,qBACE,8OAAC,4KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,4TACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,iLAA2B;YAC1B,WAAW,IAAA,yHAAE,EAAC;sBAEd,cAAA,8OAAC,6MAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIzB;AACA,SAAS,WAAW,GAAG,4KAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 4863, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/review-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useTimeboxStore } from '@/stores/timebox-store'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\n\ninterface ReviewDialogProps {\n  isOpen: boolean\n  onClose: () => void\n  weekStart: Date\n  weekEnd: Date\n}\n\nexport default function ReviewDialog({ isOpen, onClose, weekStart, weekEnd }: ReviewDialogProps) {\n  const {\n    getWeekStatistics,\n    archiveCurrentWeek,\n    copyToNextWeek,\n    weekRecords,\n    initializeCurrentWeek\n  } = useTimeboxStore()\n\n  const [archiveName, setArchiveName] = useState('')\n  const [copyToNext, setCopyToNext] = useState(false)\n  const [selectedTemplate, setSelectedTemplate] = useState<string>('')\n  const [notes, setNotes] = useState('')\n\n  const stats = getWeekStatistics()\n\n  // 生成預設存檔名稱\n  const getDefaultArchiveName = () => {\n    const year = weekStart.getFullYear()\n    const weekNumber = getWeekNumber(weekStart)\n    return `${year}年第${weekNumber}週`\n  }\n\n  // 計算週數\n  const getWeekNumber = (date: Date) => {\n    const firstDayOfYear = new Date(date.getFullYear(), 0, 1)\n    const pastDaysOfYear = (date.getTime() - firstDayOfYear.getTime()) / 86400000\n    return Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7)\n  }\n\n  // 格式化日期範圍\n  const formatDateRange = () => {\n    return `${weekStart.getMonth() + 1}/${weekStart.getDate()} - ${weekEnd.getMonth() + 1}/${weekEnd.getDate()}`\n  }\n\n  // 格式化時間\n  const formatTime = (minutes: number) => {\n    const hours = Math.floor(minutes / 60)\n    const mins = minutes % 60\n    if (hours > 0) {\n      return `${hours}小時${mins > 0 ? ` ${mins}分鐘` : ''}`\n    }\n    return `${mins}分鐘`\n  }\n\n  const handleArchive = () => {\n    const finalArchiveName = archiveName.trim() || getDefaultArchiveName()\n\n    // 存檔當前週\n    archiveCurrentWeek(finalArchiveName)\n\n    // 如果選擇複製到下週\n    if (copyToNext) {\n      const nextWeekStart = new Date(weekEnd)\n      nextWeekStart.setDate(nextWeekStart.getDate() + 1)\n\n      if (selectedTemplate) {\n        // 使用選擇的模板\n        copyToNextWeek(selectedTemplate)\n      } else {\n        // 初始化空白的下週\n        initializeCurrentWeek(nextWeekStart)\n      }\n    }\n\n    onClose()\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>\n            本週覆盤 ({formatDateRange()})\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* 本週統計 */}\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <h3 className=\"font-medium mb-3\">本週統計</h3>\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-gray-600\">完成率：</span>\n                <span className=\"font-medium\">{Math.round(stats.completionRate * 100)}%</span>\n              </div>\n              <div>\n                <span className=\"text-gray-600\">運動時間：</span>\n                <span className=\"font-medium\">{formatTime(stats.totalWorkoutTime)}</span>\n              </div>\n              {stats.totalWorkoutVolume && stats.totalWorkoutVolume > 0 && (\n                <div className=\"col-span-2\">\n                  <span className=\"text-gray-600\">總訓練量：</span>\n                  <span className=\"font-medium\">{stats.totalWorkoutVolume.toLocaleString()} kg</span>\n                </div>\n              )}\n            </div>\n\n            <div className=\"mt-3 pt-3 border-t border-gray-200\">\n              <div className=\"text-sm text-gray-600\">完成項目分布：</div>\n              <div className=\"flex space-x-4 mt-1 text-sm\">\n                <span>運動 {stats.completedByType.workout} 次</span>\n                <span>保養 {stats.completedByType.reminder} 次</span>\n                <span>其他 {stats.completedByType.basic} 次</span>\n              </div>\n            </div>\n          </div>\n\n          {/* 存檔名稱 */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              存檔名稱\n            </label>\n            <Input\n              value={archiveName}\n              onChange={(e) => setArchiveName(e.target.value)}\n              placeholder={getDefaultArchiveName()}\n            />\n          </div>\n\n          {/* 覆盤筆記 */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              覆盤筆記 (選填)\n            </label>\n            <Textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"記錄本週的心得、改進建議或下週計劃...\"\n              rows={3}\n            />\n          </div>\n\n          {/* 複製到下週選項 */}\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"copyToNext\"\n                checked={copyToNext}\n                onCheckedChange={(checked) => setCopyToNext(checked as boolean)}\n              />\n              <label htmlFor=\"copyToNext\" className=\"text-sm font-medium\">\n                複製排程到下週（清除完成狀態）\n              </label>\n            </div>\n\n            {/* 模板選擇 */}\n            {copyToNext && weekRecords.length > 0 && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  選擇存檔模板（選填）\n                </label>\n                <Select value={selectedTemplate} onValueChange={setSelectedTemplate}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"選擇之前的週存檔作為模板\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {weekRecords\n                      .filter(record => record.archived)\n                      .slice(-10) // 只顯示最近10週\n                      .map((record) => (\n                        <SelectItem key={record.id} value={record.id}>\n                          {record.name} (完成率: {Math.round(record.statistics.completionRate * 100)}%)\n                        </SelectItem>\n                      ))}\n                  </SelectContent>\n                </Select>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  選擇模板會複製該週的排程安排\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* 按鈕 */}\n          <div className=\"flex justify-end space-x-2 pt-4 border-t\">\n            <Button variant=\"outline\" onClick={onClose}>\n              取消\n            </Button>\n            <Button onClick={handleArchive}>\n              存檔\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5329, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/components/create-box-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useTimeboxStore, morandiColors } from '@/stores/timebox-store'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\nimport ColorPicker from '@/components/ui/color-picker'\n\ninterface CreateBoxDialogProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport default function CreateBoxDialog({ isOpen, onClose }: CreateBoxDialogProps) {\n  const { createBox } = useTimeboxStore()\n  const [formData, setFormData] = useState({\n    name: '',\n    type: 'basic' as 'workout' | 'reminder' | 'basic',\n    color: morandiColors[0].value,\n  })\n\n  const handleSubmit = () => {\n    if (!formData.name.trim()) return\n\n    createBox({\n      name: formData.name,\n      type: formData.type,\n      color: formData.color,\n      userId: 'current-user', // TODO: 實際用戶ID\n    })\n\n    setFormData({\n      name: '',\n      type: 'basic',\n      color: morandiColors[0].value,\n    })\n    onClose()\n  }\n\n  const handleClose = () => {\n    setFormData({\n      name: '',\n      type: 'basic',\n      color: morandiColors[0].value,\n    })\n    onClose()\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>新增箱子</DialogTitle>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          {/* 箱子名稱 */}\n          <div>\n            <label className=\"block text-sm font-medium text-morandi-primary mb-2\">\n              箱子名稱 *\n            </label>\n            <Input\n              value={formData.name}\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n              placeholder=\"請輸入箱子名稱\"\n            />\n          </div>\n\n          {/* 箱子類型 */}\n          <div>\n            <label className=\"block text-sm font-medium text-morandi-primary mb-2\">\n              箱子類型\n            </label>\n            <Select\n              value={formData.type}\n              onValueChange={(value: 'workout' | 'reminder' | 'basic') =>\n                setFormData({ ...formData, type: value })\n              }\n            >\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"basic\">普通箱子</SelectItem>\n                <SelectItem value=\"workout\">重訓箱子</SelectItem>\n                <SelectItem value=\"reminder\">文字提示箱子</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* 顏色選擇 */}\n          <div>\n            <label className=\"block text-sm font-medium text-morandi-primary mb-2\">\n              顏色選擇\n            </label>\n            <ColorPicker\n              value={formData.color}\n              onChange={(color) => setFormData({ ...formData, color })}\n            />\n          </div>\n\n          {/* 按鈕 */}\n          <div className=\"flex justify-end space-x-2 pt-4\">\n            <Button\n              variant=\"outline\"\n              onClick={handleClose}\n              className=\"text-morandi-secondary hover:text-morandi-primary border-border hover:border-morandi-gold\"\n            >\n              取消\n            </Button>\n            <Button\n              onClick={handleSubmit}\n              disabled={!formData.name.trim()}\n              className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white\"\n            >\n              建立\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAee,SAAS,gBAAgB,EAAE,MAAM,EAAE,OAAO,EAAwB;IAC/E,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,oJAAe;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QACvC,MAAM;QACN,MAAM;QACN,OAAO,kJAAa,CAAC,EAAE,CAAC,KAAK;IAC/B;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,IAAI;QAE3B,UAAU;YACR,MAAM,SAAS,IAAI;YACnB,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,KAAK;YACrB,QAAQ;QACV;QAEA,YAAY;YACV,MAAM;YACN,MAAM;YACN,OAAO,kJAAa,CAAC,EAAE,CAAC,KAAK;QAC/B;QACA;IACF;IAEA,MAAM,cAAc;QAClB,YAAY;YACV,MAAM;YACN,MAAM;YACN,OAAO,kJAAa,CAAC,EAAE,CAAC,KAAK;QAC/B;QACA;IACF;IAEA,qBACE,8OAAC,4IAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,8OAAC,mJAAa;;8BACZ,8OAAC,kJAAY;8BACX,cAAA,8OAAC,iJAAW;kCAAC;;;;;;;;;;;8BAEf,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAAsD;;;;;;8CAGvE,8OAAC,0IAAK;oCACJ,OAAO,SAAS,IAAI;oCACpB,UAAU,CAAC,IAAM,YAAY;4CAAE,GAAG,QAAQ;4CAAE,MAAM,EAAE,MAAM,CAAC,KAAK;wCAAC;oCACjE,aAAY;;;;;;;;;;;;sCAKhB,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAAsD;;;;;;8CAGvE,8OAAC,4IAAM;oCACL,OAAO,SAAS,IAAI;oCACpB,eAAe,CAAC,QACd,YAAY;4CAAE,GAAG,QAAQ;4CAAE,MAAM;wCAAM;;sDAGzC,8OAAC,mJAAa;sDACZ,cAAA,8OAAC,iJAAW;;;;;;;;;;sDAEd,8OAAC,mJAAa;;8DACZ,8OAAC,gJAAU;oDAAC,OAAM;8DAAQ;;;;;;8DAC1B,8OAAC,gJAAU;oDAAC,OAAM;8DAAU;;;;;;8DAC5B,8OAAC,gJAAU;oDAAC,OAAM;8DAAW;;;;;;;;;;;;;;;;;;;;;;;;sCAMnC,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAAsD;;;;;;8CAGvE,8OAAC,sJAAW;oCACV,OAAO,SAAS,KAAK;oCACrB,UAAU,CAAC,QAAU,YAAY;4CAAE,GAAG,QAAQ;4CAAE;wCAAM;;;;;;;;;;;;sCAK1D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4IAAM;oCACL,SAAQ;oCACR,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC,4IAAM;oCACL,SAAS;oCACT,UAAU,CAAC,SAAS,IAAI,CAAC,IAAI;oCAC7B,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 5579, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/timebox/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { ResponsiveHeader } from '@/components/layout/responsive-header'\nimport WeekView from './components/week-view'\nimport BoxManager from './components/box-manager'\nimport StatisticsPanel from './components/statistics-panel'\nimport ReviewDialog from './components/review-dialog'\nimport CreateBoxDialog from './components/create-box-dialog'\nimport { Button } from '@/components/ui/button'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Plus, Calendar, Clock } from 'lucide-react'\nimport { useTimeboxStore } from '@/stores/timebox-store'\n\nexport default function TimeboxPage() {\n  const [selectedWeek, setSelectedWeek] = useState(new Date())\n  const [timeInterval, setTimeInterval] = useState<30 | 60>(60) // 分鐘\n  const [showReviewDialog, setShowReviewDialog] = useState(false)\n  const [showBoxManager, setShowBoxManager] = useState(false)\n  const [showCreateBoxDialog, setShowCreateBoxDialog] = useState(false)\n\n  const { currentWeek, initializeCurrentWeek } = useTimeboxStore()\n\n  // 初始化當前週（純本地模式）\n  useEffect(() => {\n    if (!currentWeek) {\n      initializeCurrentWeek(new Date())\n    }\n  }, [currentWeek, initializeCurrentWeek])\n\n  // 計算週的開始和結束日期\n  const getWeekStart = (date: Date) => {\n    const d = new Date(date)\n    const day = d.getDay()\n    const diff = d.getDate() - day + (day === 0 ? -6 : 1) // 調整為週一開始\n    return new Date(d.setDate(diff))\n  }\n\n  const getWeekEnd = (date: Date) => {\n    const start = getWeekStart(date)\n    const end = new Date(start)\n    end.setDate(start.getDate() + 6)\n    return end\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <ResponsiveHeader\n        title=\"時間箱管理\"\n        icon={Clock}\n        breadcrumb={[\n          { label: '首頁', href: '/' },\n          { label: '箱型時間', href: '/timebox' }\n        ]}\n        onAdd={() => setShowCreateBoxDialog(true)}\n        addLabel=\"新增箱子\"\n      >\n        <div className=\"flex items-center gap-6\">\n          {/* 週選擇器 */}\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => {\n                const prev = new Date(selectedWeek)\n                prev.setDate(prev.getDate() - 7)\n                setSelectedWeek(prev)\n              }}\n              className=\"text-morandi-secondary hover:text-morandi-primary border-border hover:border-morandi-gold\"\n            >\n              ←\n            </Button>\n            <span className=\"text-sm text-morandi-secondary min-w-[120px] text-center font-medium\">\n              {selectedWeek.toLocaleDateString('zh-TW', {\n                month: 'numeric',\n                day: 'numeric'\n              })} - {\n                new Date(selectedWeek.getTime() + 6 * 24 * 60 * 60 * 1000)\n                  .toLocaleDateString('zh-TW', {\n                    month: 'numeric',\n                    day: 'numeric'\n                  })\n              }\n            </span>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => {\n                const next = new Date(selectedWeek)\n                next.setDate(next.getDate() + 7)\n                setSelectedWeek(next)\n              }}\n              className=\"text-morandi-secondary hover:text-morandi-primary border-border hover:border-morandi-gold\"\n            >\n              →\n            </Button>\n          </div>\n\n          {/* 時間間隔切換 */}\n          <div className=\"flex items-center gap-1\">\n            <Button\n              variant={timeInterval === 30 ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setTimeInterval(30)}\n              className={timeInterval === 30\n                ? \"bg-morandi-gold hover:bg-morandi-gold-hover text-white border-morandi-gold\"\n                : \"text-morandi-secondary hover:text-morandi-primary border-border hover:border-morandi-gold\"\n              }\n            >\n              30分鐘\n            </Button>\n            <Button\n              variant={timeInterval === 60 ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setTimeInterval(60)}\n              className={timeInterval === 60\n                ? \"bg-morandi-gold hover:bg-morandi-gold-hover text-white border-morandi-gold\"\n                : \"text-morandi-secondary hover:text-morandi-primary border-border hover:border-morandi-gold\"\n              }\n            >\n              1小時\n            </Button>\n          </div>\n\n          {/* 功能按鈕群組 */}\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowBoxManager(true)}\n              className=\"text-morandi-secondary hover:text-morandi-primary border-border hover:border-morandi-gold\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              管理箱子\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowReviewDialog(true)}\n              className=\"text-morandi-secondary hover:text-morandi-primary border-border hover:border-morandi-gold\"\n            >\n              <Calendar className=\"h-4 w-4 mr-2\" />\n              覆盤本週\n            </Button>\n          </div>\n        </div>\n      </ResponsiveHeader>\n\n      {/* 統計面板 */}\n      <StatisticsPanel />\n\n      {/* 主要內容區域 */}\n      <div className=\"flex gap-6\">\n        <div className=\"flex-1\">\n          <div className=\"morandi-card overflow-hidden\">\n            <WeekView\n              selectedWeek={selectedWeek}\n              timeInterval={timeInterval}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* 週覆盤對話框 */}\n      <ReviewDialog\n        isOpen={showReviewDialog}\n        onClose={() => setShowReviewDialog(false)}\n        weekStart={getWeekStart(selectedWeek)}\n        weekEnd={getWeekEnd(selectedWeek)}\n      />\n\n      {/* 新增箱子對話框 */}\n      <CreateBoxDialog\n        isOpen={showCreateBoxDialog}\n        onClose={() => setShowCreateBoxDialog(false)}\n      />\n\n      {/* 管理箱子對話框 */}\n      {showBoxManager && (\n        <Dialog open={showBoxManager} onOpenChange={() => setShowBoxManager(false)}>\n          <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-hidden\">\n            <DialogHeader>\n              <DialogTitle>管理箱子</DialogTitle>\n            </DialogHeader>\n            <div className=\"overflow-auto\">\n              <BoxManager />\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}}]
}