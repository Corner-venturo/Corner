{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/layout/responsive-header.tsx"],"sourcesContent":["'use client';\n\nimport { useState, memo } from 'react';\nimport { useAuthStore } from '@/stores/auth-store';\nimport { cn } from '@/lib/utils';\n\ninterface ResponsiveHeaderProps {\n  title: string;\n  breadcrumb?: { label: string; href: string }[];\n  tabs?: {\n    value: string;\n    label: string;\n    icon?: any;\n  }[];\n  activeTab?: string;\n  onTabChange?: (value: string) => void;\n  onAdd?: () => void;\n  addLabel?: string;\n  children?: React.ReactNode;\n  actions?: React.ReactNode;\n  showBackButton?: boolean;\n  onBack?: () => void;\n  // 搜尋功能\n  showSearch?: boolean;\n  searchTerm?: string;\n  onSearchChange?: (term: string) => void;\n  searchPlaceholder?: string;\n}\n\nexport const ResponsiveHeader = memo(function ResponsiveHeader(props: ResponsiveHeaderProps) {\n  const { sidebarCollapsed } = useAuthStore();\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n\n  return (\n    <div className={cn(\n      'fixed top-0 right-0 h-[72px] bg-background z-40 flex items-center justify-between px-6',\n      'left-16'\n    )}>\n      {/* 分割線 */}\n      <div className=\"absolute bottom-0 left-0 right-0\" style={{ marginLeft: '24px', marginRight: '24px', borderTop: '1px solid var(--border)', height: '1px' }}></div>\n      {/* 左側 - 返回按鈕和主標題 */}\n      <div className=\"flex items-center gap-3\">\n        {props.showBackButton && (\n          <button\n            onClick={props.onBack}\n            className=\"text-morandi-secondary hover:text-morandi-primary transition-colors\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n          </button>\n        )}\n        <h1 className=\"text-base font-bold text-morandi-primary\">{props.title}</h1>\n      </div>\n\n      {/* 右側區域 - 功能、標籤頁和操作按鈕 - 統一無空白設計 */}\n      <div className=\"flex items-center\">\n        {/* 搜尋功能 - 最左邊 */}\n        {props.showSearch && (\n          <div className=\"flex items-center mr-4\">\n            {!isSearchOpen ? (\n              <button\n                onClick={() => setIsSearchOpen(true)}\n                className=\"p-2 text-morandi-secondary hover:text-morandi-primary transition-colors\"\n                title=\"搜尋\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                </svg>\n              </button>\n            ) : (\n              <div className=\"flex items-center gap-2\">\n                <input\n                  type=\"text\"\n                  value={props.searchTerm || ''}\n                  onChange={(e) => props.onSearchChange?.(e.target.value)}\n                  placeholder={props.searchPlaceholder || '搜尋...'}\n                  className=\"w-48 px-3 py-1 text-sm border border-border rounded-md focus:outline-none focus:ring-1 focus:ring-morandi-primary\"\n                  autoFocus\n                  onBlur={() => {\n                    if (!props.searchTerm) {\n                      setIsSearchOpen(false);\n                    }\n                  }}\n                />\n                <button\n                  onClick={() => {\n                    props.onSearchChange?.('');\n                    setIsSearchOpen(false);\n                  }}\n                  className=\"p-1 text-morandi-secondary hover:text-morandi-primary transition-colors\"\n                  title=\"清除搜尋\"\n                >\n                  <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* 功能區域 */}\n        {props.children && (\n          <div className=\"flex items-center mr-6\">\n            {props.children}\n          </div>\n        )}\n\n        {/* 自定義操作區域 */}\n        {props.actions && (\n          <div className=\"mr-3\">\n            {props.actions}\n          </div>\n        )}\n\n        {/* 標籤頁和操作按鈕緊密排列 */}\n        <div className=\"flex items-center\">\n          {/* 標籤頁 */}\n          {props.tabs && props.tabs.length > 0 && (\n            <div className=\"flex items-center space-x-1\">\n              {props.tabs.map((tab) => (\n                <button\n                  key={tab.value}\n                  onClick={() => props.onTabChange?.(tab.value)}\n                  className={cn(\n                    'relative px-3 py-2 text-sm font-medium transition-colors',\n                    'text-morandi-secondary hover:text-morandi-primary',\n                    props.activeTab === tab.value\n                      ? 'text-morandi-primary after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-morandi-gold'\n                      : ''\n                  )}\n                >\n                  {tab.label}\n                </button>\n              ))}\n            </div>\n          )}\n\n          {/* 操作按鈕緊接在標籤頁後面 */}\n          {props.onAdd && (\n            <button\n              onClick={props.onAdd}\n              data-create-box\n              className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center transition-colors ml-3\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n              </svg>\n              {props.addLabel || '新增'}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n});"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AA6BO,MAAM,iCAAmB,GAAA,IAAA,qKAAI,UAAC,SAAS,iBAAiB,KAA4B;;IACzF,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,iJAAY;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAChB,0FACA;;0BAGA,6LAAC;gBAAI,WAAU;gBAAmC,OAAO;oBAAE,YAAY;oBAAQ,aAAa;oBAAQ,WAAW;oBAA2B,QAAQ;gBAAM;;;;;;0BAExJ,6LAAC;gBAAI,WAAU;;oBACZ,MAAM,cAAc,kBACnB,6LAAC;wBACC,SAAS,MAAM,MAAM;wBACrB,WAAU;kCAEV,cAAA,6LAAC;4BAAI,WAAU;4BAAU,MAAK;4BAAO,QAAO;4BAAe,SAAQ;sCACjE,cAAA,6LAAC;gCAAK,eAAc;gCAAQ,gBAAe;gCAAQ,aAAa;gCAAG,GAAE;;;;;;;;;;;;;;;;kCAI3E,6LAAC;wBAAG,WAAU;kCAA4C,MAAM,KAAK;;;;;;;;;;;;0BAIvE,6LAAC;gBAAI,WAAU;;oBAEZ,MAAM,UAAU,kBACf,6LAAC;wBAAI,WAAU;kCACZ,CAAC,6BACA,6LAAC;4BACC,SAAS,IAAM,gBAAgB;4BAC/B,WAAU;4BACV,OAAM;sCAEN,cAAA,6LAAC;gCAAI,WAAU;gCAAU,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CACjE,cAAA,6LAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;iDAIzE,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,MAAK;oCACL,OAAO,MAAM,UAAU,IAAI;oCAC3B,UAAU,CAAC;4CAAM;gDAAA,wBAAA,MAAM,cAAc,cAApB,4CAAA,2BAAA,OAAuB,EAAE,MAAM,CAAC,KAAK;;oCACtD,aAAa,MAAM,iBAAiB,IAAI;oCACxC,WAAU;oCACV,SAAS;oCACT,QAAQ;wCACN,IAAI,CAAC,MAAM,UAAU,EAAE;4CACrB,gBAAgB;wCAClB;oCACF;;;;;;8CAEF,6LAAC;oCACC,SAAS;4CACP;yCAAA,wBAAA,MAAM,cAAc,cAApB,4CAAA,2BAAA,OAAuB;wCACvB,gBAAgB;oCAClB;oCACA,WAAU;oCACV,OAAM;8CAEN,cAAA,6LAAC;wCAAI,WAAU;wCAAU,MAAK;wCAAO,QAAO;wCAAe,SAAQ;kDACjE,cAAA,6LAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;oBAShF,MAAM,QAAQ,kBACb,6LAAC;wBAAI,WAAU;kCACZ,MAAM,QAAQ;;;;;;oBAKlB,MAAM,OAAO,kBACZ,6LAAC;wBAAI,WAAU;kCACZ,MAAM,OAAO;;;;;;kCAKlB,6LAAC;wBAAI,WAAU;;4BAEZ,MAAM,IAAI,IAAI,MAAM,IAAI,CAAC,MAAM,GAAG,mBACjC,6LAAC;gCAAI,WAAU;0CACZ,MAAM,IAAI,CAAC,GAAG,CAAC,CAAC,oBACf,6LAAC;wCAEC,SAAS;gDAAM;oDAAA,qBAAA,MAAM,WAAW,cAAjB,yCAAA,wBAAA,OAAoB,IAAI,KAAK;;wCAC5C,WAAW,IAAA,4HAAE,EACX,4DACA,qDACA,MAAM,SAAS,KAAK,IAAI,KAAK,GACzB,oHACA;kDAGL,IAAI,KAAK;uCAVL,IAAI,KAAK;;;;;;;;;;4BAiBrB,MAAM,KAAK,kBACV,6LAAC;gCACC,SAAS,MAAM,KAAK;gCACpB,iBAAe;gCACf,WAAU;;kDAEV,6LAAC;wCAAI,WAAU;wCAAe,MAAK;wCAAO,QAAO;wCAAe,SAAQ;kDACtE,cAAA,6LAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;oCAEtE,MAAM,QAAQ,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;AAOjC;;QA9H+B,iJAAY;;;;QAAZ,iJAAY","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.memo(React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n))\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,qKAAU,qBAAC,2KAAgB,MACxC,QAA0D;QAAzD,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO;IACtD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,2KAAgB,OAGpC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,4HAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe;QAAC,EACpB,SAAS,EACT,GAAG,OACkC;yBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe;QAAC,EACpB,SAAS,EACT,GAAG,OACkC;yBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 537, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-morandi-gold disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAC5B,QAAgC;QAA/B,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO;IAC5B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,4HAAE,EACX,qXACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 573, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<\"textarea\">>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,2KAAgB,MAC/B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;IACtB,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,0OACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 608, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/stores/workspace-store.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\n// ⚠️ 純本地模式 - Workspace Store\n// 所有資料存在 localStorage，不使用 Supabase\n\ninterface Workspace {\n  id: string;\n  name: string;\n  description?: string;\n  icon?: string;\n  is_active: boolean;\n  created_by?: string;\n  created_at?: string;\n  updated_at?: string;\n}\n\ninterface Bulletin {\n  id: string;\n  workspace_id: string;\n  title: string;\n  content: string;\n  type: 'announcement' | 'notice' | 'event';\n  priority: number;\n  is_pinned: boolean;\n  author_id: string;\n  created_at: string;\n  updated_at: string;\n  author?: {\n    chinese_name: string;\n    english_name: string;\n  };\n}\n\ninterface Channel {\n  id: string;\n  workspace_id: string;\n  name: string;\n  description?: string;\n  type: 'public' | 'private' | 'direct';\n  created_by?: string;\n  created_at: string;\n}\n\ninterface Message {\n  id: string;\n  channel_id: string;\n  author_id: string;\n  content: string;\n  reactions: Record<string, string[]>;\n  attachments?: any[];\n  created_at: string;\n  edited_at?: string;\n  author?: {\n    id: string;\n    chinese_name: string;\n    avatar?: string;\n  };\n}\n\ninterface WorkspaceState {\n  workspaces: Workspace[];\n  currentWorkspace: Workspace | null;\n  bulletins: Bulletin[];\n  channels: Channel[];\n  messages: Message[];\n  loading: boolean;\n  error: string | null;\n\n  loadWorkspaces: () => Promise<void>;\n  setCurrentWorkspace: (workspace: Workspace) => void;\n\n  loadBulletins: (workspaceId?: string) => Promise<void>;\n  createBulletin: (bulletin: Omit<Bulletin, 'id' | 'created_at' | 'updated_at'>) => Promise<void>;\n  updateBulletin: (id: string, updates: Partial<Bulletin>) => Promise<void>;\n  deleteBulletin: (id: string) => Promise<void>;\n\n  loadChannels: (workspaceId?: string) => Promise<void>;\n  createChannel: (channel: Omit<Channel, 'id' | 'created_at'>) => Promise<void>;\n\n  loadMessages: (channelId: string) => Promise<void>;\n  sendMessage: (message: Omit<Message, 'id' | 'created_at' | 'reactions'>) => Promise<void>;\n  updateMessageReactions: (messageId: string, reactions: Record<string, string[]>) => Promise<void>;\n\n  clearError: () => void;\n}\n\nexport const useWorkspaceStore = create<WorkspaceState>()(\n  persist(\n    (set, get) => ({\n      workspaces: [],\n      currentWorkspace: null,\n      bulletins: [],\n      channels: [],\n      messages: [],\n      loading: false,\n      error: null,\n\n      loadWorkspaces: async () => {\n        set({ loading: true });\n\n        // 模擬延遲\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        const data: Workspace[] = [\n          {\n            id: 'workspace-001',\n            name: '總部辦公室',\n            description: 'Venturo 總部工作空間',\n            icon: '🏢',\n            is_active: true,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          }\n        ];\n\n        set({\n          workspaces: data,\n          currentWorkspace: data[0] || null,\n          loading: false\n        });\n      },\n\n      setCurrentWorkspace: (workspace) => set({ currentWorkspace: workspace }),\n\n      loadBulletins: async (workspaceId) => {\n        const currentWorkspaceId = workspaceId || get().currentWorkspace?.id;\n        if (!currentWorkspaceId) {\n          set({ loading: false });\n          return;\n        }\n\n        set({ loading: true });\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        // 使用本地資料\n        const allBulletins = get().bulletins;\n        const filtered = allBulletins.filter(b => b.workspace_id === currentWorkspaceId);\n\n        set({ bulletins: filtered, loading: false });\n      },\n\n      createBulletin: async (bulletin) => {\n        const newBulletin: Bulletin = {\n          ...bulletin,\n          id: `bulletin-${Date.now()}`,\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString()\n        };\n\n        set(state => ({\n          bulletins: [...state.bulletins, newBulletin]\n        }));\n      },\n\n      updateBulletin: async (id, updates) => {\n        set(state => ({\n          bulletins: state.bulletins.map(b =>\n            b.id === id ? { ...b, ...updates, updated_at: new Date().toISOString() } : b\n          )\n        }));\n      },\n\n      deleteBulletin: async (id) => {\n        set(state => ({\n          bulletins: state.bulletins.filter(b => b.id !== id)\n        }));\n      },\n\n      loadChannels: async (workspaceId) => {\n        const currentWorkspaceId = workspaceId || get().currentWorkspace?.id;\n        if (!currentWorkspaceId) {\n          set({ loading: false });\n          return;\n        }\n\n        set({ loading: true });\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        // 預設頻道\n        const defaultChannels: Channel[] = [\n          {\n            id: 'channel-001',\n            workspace_id: currentWorkspaceId,\n            name: '一般討論',\n            description: '一般事務討論',\n            type: 'public',\n            created_at: new Date().toISOString()\n          }\n        ];\n\n        set({ channels: defaultChannels, loading: false });\n      },\n\n      createChannel: async (channel) => {\n        const newChannel: Channel = {\n          ...channel,\n          id: `channel-${Date.now()}`,\n          created_at: new Date().toISOString()\n        };\n\n        set(state => ({\n          channels: [...state.channels, newChannel]\n        }));\n      },\n\n      loadMessages: async (channelId) => {\n        set({ loading: true });\n        await new Promise(resolve => setTimeout(resolve, 100));\n\n        const allMessages = get().messages;\n        const filtered = allMessages.filter(m => m.channel_id === channelId);\n\n        set({ messages: filtered, loading: false });\n      },\n\n      sendMessage: async (message) => {\n        const newMessage: Message = {\n          ...message,\n          id: `message-${Date.now()}`,\n          reactions: {},\n          created_at: new Date().toISOString()\n        };\n\n        set(state => ({\n          messages: [...state.messages, newMessage]\n        }));\n      },\n\n      updateMessageReactions: async (messageId, reactions) => {\n        set(state => ({\n          messages: state.messages.map(m =>\n            m.id === messageId ? { ...m, reactions } : m\n          )\n        }));\n      },\n\n      clearError: () => set({ error: null })\n    }),\n    {\n      name: 'workspace-storage',\n      partialize: (state) => ({\n        workspaces: state.workspaces,\n        currentWorkspace: state.currentWorkspace,\n        bulletins: state.bulletins,\n        channels: state.channels,\n        messages: state.messages\n      })\n    }\n  )\n);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 795, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/workspace/BulletinBoard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Pin, Calendar, AlertCircle, Plus, Edit, Trash2, Building2 } from 'lucide-react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useWorkspaceStore } from '@/stores/workspace-store';\nimport { useAuthStore } from '@/stores/auth-store';\nimport { format } from 'date-fns';\nimport { cn } from '@/lib/utils';\n\ninterface Bulletin {\n  id: string;\n  title: string;\n  content: string;\n  type: 'announcement' | 'notice' | 'event';\n  is_pinned: boolean;\n  author?: {\n    chinese_name: string;\n    english_name: string;\n  };\n  created_at: string;\n  updated_at: string;\n}\n\nexport function BulletinBoard() {\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [editingBulletin, setEditingBulletin] = useState<Bulletin | null>(null);\n  const [newBulletin, setNewBulletin] = useState({\n    title: '',\n    content: '',\n    type: 'announcement' as const,\n    is_pinned: false\n  });\n\n  const {\n    bulletins,\n    currentWorkspace,\n    loading,\n    loadBulletins,\n    createBulletin,\n    updateBulletin,\n    deleteBulletin\n  } = useWorkspaceStore();\n\n  const { user } = useAuthStore();\n\n  useEffect(() => {\n    if (currentWorkspace?.id) {\n      loadBulletins(currentWorkspace.id);\n    }\n  }, [currentWorkspace?.id, loadBulletins]);\n\n  const handleSubmit = async () => {\n    if (!user?.id || !currentWorkspace?.id) return;\n\n    try {\n      if (editingBulletin) {\n        await updateBulletin(editingBulletin.id, newBulletin);\n        setEditingBulletin(null);\n      } else {\n        await createBulletin({\n          ...newBulletin,\n          workspace_id: currentWorkspace.id,\n          author_id: user.id,\n          priority: newBulletin.is_pinned ? 10 : 0\n        });\n      }\n\n      setShowAddDialog(false);\n      resetForm();\n    } catch (error) {\n      console.error('操作失敗:', error);\n    }\n  };\n\n  const handleEdit = (bulletin: Bulletin) => {\n    setNewBulletin({\n      title: bulletin.title,\n      content: bulletin.content,\n      type: bulletin.type,\n      is_pinned: bulletin.is_pinned\n    });\n    setEditingBulletin(bulletin);\n    setShowAddDialog(true);\n  };\n\n  const handleDelete = async (bulletinId: string) => {\n    if (confirm('確定要刪除這則公告嗎？')) {\n      await deleteBulletin(bulletinId);\n    }\n  };\n\n  const resetForm = () => {\n    setNewBulletin({ title: '', content: '', type: 'announcement', is_pinned: false });\n    setEditingBulletin(null);\n  };\n\n  const getTypeIcon = (type: string) => {\n    switch (type) {\n      case 'announcement':\n        return <AlertCircle className=\"w-4 h-4 text-morandi-gold\" />;\n      case 'notice':\n        return <AlertCircle className=\"w-4 h-4 text-morandi-red\" />;\n      case 'event':\n        return <Calendar className=\"w-4 h-4 text-morandi-green\" />;\n      default:\n        return <AlertCircle className=\"w-4 h-4 text-morandi-secondary\" />;\n    }\n  };\n\n  const getTypeLabel = (type: string) => {\n    const labels = {\n      'announcement': '一般公告',\n      'notice': '重要通知',\n      'event': '活動訊息'\n    };\n    return labels[type as keyof typeof labels] || type;\n  };\n\n  const getBorderColor = (type: string, isPinned: boolean) => {\n    if (isPinned) return 'border-morandi-gold';\n    switch (type) {\n      case 'notice': return 'border-morandi-red/30';\n      case 'event': return 'border-morandi-green/30';\n      default: return 'border-border';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-card border-b border-border px-6 py-4\">\n        <div className=\"animate-pulse space-y-4 px-6 py-4\">\n          {[...Array(3)].map((_, i) => (\n            <div key={i} className=\"morandi-card p-4 h-32\"></div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* 頂部操作列 */}\n      <div className=\"morandi-card p-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h2 className=\"text-lg sm:text-xl font-bold text-morandi-primary\">公告欄</h2>\n            <p className=\"text-xs sm:text-sm text-morandi-secondary mt-1\">\n              {currentWorkspace?.name || '工作空間'} 的最新消息\n            </p>\n          </div>\n          <Button\n            onClick={() => setShowAddDialog(true)}\n            className=\"bg-morandi-gold hover:bg-morandi-gold/80 text-white border-0\"\n          >\n            <Plus size={16} className=\"mr-2\" />\n            <span className=\"hidden sm:inline\">發布公告</span>\n            <span className=\"sm:hidden\">發布</span>\n          </Button>\n        </div>\n      </div>\n\n      {/* 公告列表 */}\n      <div className=\"space-y-4\">\n        {bulletins.length === 0 ? (\n          <div className=\"morandi-card p-8 text-center\">\n            <Building2 className=\"w-12 h-12 mx-auto mb-4 text-morandi-secondary opacity-50\" />\n            <p className=\"text-morandi-secondary\">目前沒有任何公告</p>\n            <p className=\"text-sm text-morandi-secondary/70 mt-1\">\n              點擊上方按鈕發布第一則公告\n            </p>\n          </div>\n        ) : (\n          bulletins.map(bulletin => (\n            <div\n              key={bulletin.id}\n              className={cn(\n                \"morandi-card p-6 transition-all hover:shadow-md\",\n                bulletin.is_pinned && \"border-morandi-gold bg-morandi-gold/5\"\n              )}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    {bulletin.is_pinned && (\n                      <Pin className=\"w-4 h-4 text-morandi-gold fill-morandi-gold\" />\n                    )}\n                    {getTypeIcon(bulletin.type)}\n                    <span className=\"text-xs px-2 py-1 rounded-full bg-morandi-container text-morandi-secondary\">\n                      {getTypeLabel(bulletin.type)}\n                    </span>\n                    <h3 className=\"font-semibold text-morandi-primary text-sm sm:text-base\">\n                      {bulletin.title}\n                    </h3>\n                  </div>\n\n                  <p className=\"text-morandi-secondary whitespace-pre-wrap mb-3 leading-relaxed\">\n                    {bulletin.content}\n                  </p>\n\n                  <div className=\"flex items-center gap-4 text-sm text-morandi-secondary\">\n                    <span>\n                      {bulletin.author?.chinese_name || '系統'}\n                    </span>\n                    <span>\n                      {format(new Date(bulletin.created_at), 'yyyy/MM/dd HH:mm')}\n                    </span>\n                    {bulletin.created_at !== bulletin.updated_at && (\n                      <span className=\"text-xs\">(已編輯)</span>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"flex gap-1 ml-4\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"w-8 h-8 hover:bg-morandi-container text-morandi-secondary hover:text-morandi-primary\"\n                    onClick={() => handleEdit(bulletin)}\n                    title=\"編輯公告\"\n                  >\n                    <Edit size={14} />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"w-8 h-8 hover:bg-morandi-container text-morandi-secondary hover:text-morandi-red\"\n                    onClick={() => handleDelete(bulletin.id)}\n                    title=\"刪除公告\"\n                  >\n                    <Trash2 size={14} />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* 新增/編輯公告對話框 */}\n      <Dialog open={showAddDialog} onOpenChange={(open) => {\n        setShowAddDialog(open);\n        if (!open) resetForm();\n      }}>\n        <DialogContent className=\"max-w-md morandi-card border-0\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingBulletin ? '編輯公告' : '發布新公告'}\n            </DialogTitle>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium text-morandi-primary\">標題</label>\n              <Input\n                value={newBulletin.title}\n                onChange={(e) => setNewBulletin({...newBulletin, title: e.target.value})}\n                className=\"mt-1\"\n                placeholder=\"請輸入公告標題\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-morandi-primary\">內容</label>\n              <Textarea\n                value={newBulletin.content}\n                onChange={(e) => setNewBulletin({...newBulletin, content: e.target.value})}\n                className=\"mt-1 min-h-[120px]\"\n                placeholder=\"請輸入公告內容\"\n              />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <label className=\"text-sm font-medium text-morandi-primary\">類型</label>\n                <select\n                  value={newBulletin.type}\n                  onChange={(e) => setNewBulletin({...newBulletin, type: e.target.value as any})}\n                  className=\"mt-1 px-3 py-2 border border-border rounded-md text-sm\"\n                >\n                  <option value=\"announcement\">一般公告</option>\n                  <option value=\"notice\">重要通知</option>\n                  <option value=\"event\">活動訊息</option>\n                </select>\n              </div>\n\n              <label className=\"flex items-center gap-2 text-sm\">\n                <input\n                  type=\"checkbox\"\n                  checked={newBulletin.is_pinned}\n                  onChange={(e) => setNewBulletin({...newBulletin, is_pinned: e.target.checked})}\n                  className=\"rounded\"\n                />\n                <span>置頂公告</span>\n              </label>\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setShowAddDialog(false)}\n              >\n                取消\n              </Button>\n              <Button\n                onClick={handleSubmit}\n                className=\"bg-morandi-gold hover:bg-morandi-gold/80 text-morandi-primary border-0\"\n                disabled={!newBulletin.title.trim() || !newBulletin.content.trim()}\n              >\n                {editingBulletin ? '更新' : '發布'}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1481, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/components/workspace/ChannelChat.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport {\n  Hash,\n  Users,\n  Send,\n  Plus,\n  Settings,\n  Smile,\n  MoreHorizontal,\n  Trash2,\n  Paperclip,\n  X,\n  FileText,\n  Image as ImageIcon,\n  Receipt,\n  DollarSign,\n  CheckSquare,\n  Link2,\n  TrendingUp,\n  Download,\n  ShoppingCart\n} from 'lucide-react';\nimport { useWorkspaceStore } from '@/stores/workspace-store';\nimport { useAuthStore } from '@/stores/auth-store';\nimport { format, isToday, isYesterday } from 'date-fns';\nimport { cn } from '@/lib/utils';\n\n// 本地模式下載檔案（暫時停用）\nconst downloadFile = (path: string, bucket: string, fileName: string) => {\n  console.log('📦 本地模式：檔案下載功能暫時停用', { path, bucket, fileName });\n  alert('檔案下載功能目前僅支援線上模式');\n};\n\ninterface Channel {\n  id: string;\n  workspace_id: string;\n  name: string;\n  description?: string;\n  type: 'public' | 'private' | 'direct';\n  created_by?: string;\n  created_at: string;\n}\n\ninterface Message {\n  id: string;\n  channel_id: string;\n  author_id: string;\n  content: string;\n  reactions: Record<string, string[]>;\n  created_at: string;\n  edited_at?: string;\n  author?: {\n    id: string;\n    chinese_name: string;\n    avatar?: string;\n  };\n}\n\nexport function ChannelChat() {\n  const [selectedChannel, setSelectedChannel] = useState<Channel | null>(null);\n  const [messageText, setMessageText] = useState('');\n  const [showChannelForm, setShowChannelForm] = useState(false);\n  const [newChannelName, setNewChannelName] = useState('');\n  const [showMemberSidebar, setShowMemberSidebar] = useState(false);\n  const [showSettingsDialog, setShowSettingsDialog] = useState(false);\n  const [attachedFiles, setAttachedFiles] = useState<File[]>([]);\n  const [isDragging, setIsDragging] = useState(false);\n  const [showQuickMenu, setShowQuickMenu] = useState(false);\n  const [showShareQuoteDialog, setShowShareQuoteDialog] = useState(false);\n  const [showShareTourDialog, setShowShareTourDialog] = useState(false);\n  const [showNewOrderDialog, setShowNewOrderDialog] = useState(false);\n  const [showNewPaymentDialog, setShowNewPaymentDialog] = useState(false);\n  const [showNewReceiptDialog, setShowNewReceiptDialog] = useState(false);\n  const [showNewTaskDialog, setShowNewTaskDialog] = useState(false);\n  const [uploadingFiles, setUploadingFiles] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [editChannelName, setEditChannelName] = useState('');\n  const [editChannelDescription, setEditChannelDescription] = useState('');\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const messageInputRef = useRef<HTMLDivElement>(null);\n  const quickMenuRef = useRef<HTMLDivElement>(null);\n\n  const {\n    channels,\n    messages,\n    currentWorkspace,\n    loading,\n    loadChannels,\n    createChannel,\n    updateChannel,\n    deleteChannel,\n    loadMessages,\n    sendMessage,\n    updateMessageReactions\n  } = useWorkspaceStore();\n\n  const { user } = useAuthStore();\n\n  useEffect(() => {\n    console.log('ChannelChat - 用戶狀態:', user);\n  }, [user]);\n\n  // 只在 workspace 改變時載入頻道\n  useEffect(() => {\n    if (currentWorkspace?.id) {\n      console.log('載入頻道列表...');\n      loadChannels(currentWorkspace.id);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentWorkspace?.id]);\n\n  useEffect(() => {\n    if (channels.length > 0 && !selectedChannel) {\n      const defaultChannel = channels.find(c => c.name === 'general') || channels[0];\n      setSelectedChannel(defaultChannel);\n    }\n  }, [channels, selectedChannel]);\n\n  // 當打開設定對話框時，載入當前頻道資訊\n  useEffect(() => {\n    if (showSettingsDialog && selectedChannel) {\n      setEditChannelName(selectedChannel.name);\n      setEditChannelDescription(selectedChannel.description || '');\n    }\n  }, [showSettingsDialog, selectedChannel]);\n\n  // 只在頻道改變時載入訊息\n  useEffect(() => {\n    if (selectedChannel?.id) {\n      console.log('載入訊息列表...', selectedChannel.id);\n      loadMessages(selectedChannel.id);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedChannel?.id]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    console.log('嘗試發送訊息:', { messageText, selectedChannel, user, attachedFiles });\n\n    if (!messageText.trim() && attachedFiles.length === 0) {\n      console.log('訊息內容為空且無附件');\n      return;\n    }\n\n    if (!selectedChannel) {\n      console.log('未選擇頻道');\n      return;\n    }\n\n    if (!user) {\n      console.log('用戶未登入');\n      alert('請先登入才能發送訊息');\n      return;\n    }\n\n    try {\n      setUploadingFiles(true);\n      setUploadProgress(0);\n\n      await sendMessage({\n        channel_id: selectedChannel.id,\n        author_id: user.id,\n        content: messageText.trim() || '（傳送了附件）',\n        author: {\n          id: user.id,\n          chinese_name: user.chineseName || '未知用戶',\n          avatar: undefined\n        }\n      }, attachedFiles.length > 0 ? attachedFiles : undefined);\n\n      setMessageText('');\n      setAttachedFiles([]);\n      setUploadProgress(100);\n      console.log('訊息發送成功');\n    } catch (error) {\n      console.error('發送訊息失敗:', error);\n      alert('發送訊息失敗，請稍後再試');\n    } finally {\n      setUploadingFiles(false);\n      setTimeout(() => setUploadProgress(0), 1000);\n    }\n  };\n\n  const handleCreateChannel = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newChannelName.trim() || !currentWorkspace) return;\n\n    try {\n      await createChannel({\n        workspace_id: currentWorkspace.id,\n        name: newChannelName.toLowerCase().replace(/\\s+/g, '-'),\n        type: 'public',\n        created_by: user?.id\n      });\n      setNewChannelName('');\n      setShowChannelForm(false);\n    } catch (error) {\n      console.error('建立頻道失敗:', error);\n    }\n  };\n\n  const handleReaction = async (messageId: string, emoji: string) => {\n    if (!user) return;\n\n    const message = messages.find(m => m.id === messageId);\n    if (!message) return;\n\n    const currentReactions = { ...message.reactions };\n    if (!currentReactions[emoji]) {\n      currentReactions[emoji] = [];\n    }\n\n    const userIndex = currentReactions[emoji].indexOf(user.id);\n    if (userIndex > -1) {\n      currentReactions[emoji].splice(userIndex, 1);\n      if (currentReactions[emoji].length === 0) {\n        delete currentReactions[emoji];\n      }\n    } else {\n      currentReactions[emoji].push(user.id);\n    }\n\n    await updateMessageReactions(messageId, currentReactions);\n  };\n\n  const formatMessageTime = (dateString: string) => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    if (isNaN(date.getTime())) return '';\n\n    if (isToday(date)) {\n      return format(date, 'HH:mm');\n    } else if (isYesterday(date)) {\n      return `昨天 ${format(date, 'HH:mm')}`;\n    } else {\n      return format(date, 'MM/dd HH:mm');\n    }\n  };\n\n  // 檔案驗證設定\n  const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10 MB\n  const ALLOWED_FILE_TYPES = {\n    'image/*': ['.jpg', '.jpeg', '.png', '.gif', '.webp'],\n    'application/pdf': ['.pdf'],\n    'application/msword': ['.doc'],\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\n    'application/vnd.ms-excel': ['.xls'],\n    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': ['.xlsx'],\n    'text/plain': ['.txt']\n  };\n\n  // 檔案驗證函數\n  const validateFile = (file: File): { valid: boolean; error?: string } => {\n    // 檢查檔案大小\n    if (file.size > MAX_FILE_SIZE) {\n      return {\n        valid: false,\n        error: `檔案 \"${file.name}\" 超過 10 MB 限制 (${formatFileSize(file.size)})`\n      };\n    }\n\n    // 檢查檔案類型\n    const isValidType = Object.keys(ALLOWED_FILE_TYPES).some(type => {\n      if (type.endsWith('/*')) {\n        return file.type.startsWith(type.replace('/*', '/'));\n      }\n      return file.type === type;\n    });\n\n    if (!isValidType) {\n      const fileExtension = '.' + file.name.split('.').pop()?.toLowerCase();\n      const isValidExtension = Object.values(ALLOWED_FILE_TYPES)\n        .flat()\n        .includes(fileExtension);\n\n      if (!isValidExtension) {\n        return {\n          valid: false,\n          error: `不支援的檔案格式 \"${file.name}\" (僅支援圖片、PDF、Word、Excel、文字檔)`\n        };\n      }\n    }\n\n    return { valid: true };\n  };\n\n  // 檔案處理函數\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    const validFiles: File[] = [];\n    const errors: string[] = [];\n\n    files.forEach(file => {\n      const validation = validateFile(file);\n      if (validation.valid) {\n        validFiles.push(file);\n      } else if (validation.error) {\n        errors.push(validation.error);\n      }\n    });\n\n    if (errors.length > 0) {\n      alert(errors.join('\\n'));\n    }\n\n    if (validFiles.length > 0) {\n      setAttachedFiles(prev => [...prev, ...validFiles]);\n    }\n\n    // 清空 input value 以允許重複選擇同一檔案\n    if (e.target) {\n      e.target.value = '';\n    }\n  };\n\n  const handleRemoveFile = (index: number) => {\n    setAttachedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const files = Array.from(e.dataTransfer.files);\n    const validFiles: File[] = [];\n    const errors: string[] = [];\n\n    files.forEach(file => {\n      const validation = validateFile(file);\n      if (validation.valid) {\n        validFiles.push(file);\n      } else if (validation.error) {\n        errors.push(validation.error);\n      }\n    });\n\n    if (errors.length > 0) {\n      alert(errors.join('\\n'));\n    }\n\n    if (validFiles.length > 0) {\n      setAttachedFiles(prev => [...prev, ...validFiles]);\n    }\n  };\n\n  const handlePaste = (e: React.ClipboardEvent) => {\n    const items = e.clipboardData.items;\n    const files: File[] = [];\n\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].kind === 'file') {\n        const file = items[i].getAsFile();\n        if (file) files.push(file);\n      }\n    }\n\n    if (files.length > 0) {\n      e.preventDefault();\n      const validFiles: File[] = [];\n      const errors: string[] = [];\n\n      files.forEach(file => {\n        const validation = validateFile(file);\n        if (validation.valid) {\n          validFiles.push(file);\n        } else if (validation.error) {\n          errors.push(validation.error);\n        }\n      });\n\n      if (errors.length > 0) {\n        alert(errors.join('\\n'));\n      }\n\n      if (validFiles.length > 0) {\n        setAttachedFiles(prev => [...prev, ...validFiles]);\n      }\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return bytes + ' B';\n    if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\n    return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\n  };\n\n  // 快捷選單操作\n  const quickMenuActions = [\n    {\n      id: 'new-order',\n      icon: ShoppingCart,\n      label: '新增訂單',\n      color: 'text-purple-600',\n      action: () => {\n        setShowNewOrderDialog(true);\n        setShowQuickMenu(false);\n      }\n    },\n    {\n      id: 'share-order',\n      icon: ShoppingCart,\n      label: '分享訂單',\n      color: 'text-indigo-600',\n      action: () => {\n        setShowShareTourDialog(true);  // 暫時共用對話框，之後改為分享訂單\n        setShowQuickMenu(false);\n      }\n    },\n    {\n      id: 'share-quote',\n      icon: Receipt,\n      label: '分享報價單',\n      color: 'text-blue-600',\n      action: () => {\n        setShowShareQuoteDialog(true);\n        setShowQuickMenu(false);\n      }\n    },\n    {\n      id: 'new-payment',\n      icon: DollarSign,\n      label: '新增請款單',\n      color: 'text-orange-600',\n      action: () => {\n        setShowNewPaymentDialog(true);\n        setShowQuickMenu(false);\n      }\n    },\n    {\n      id: 'new-receipt',\n      icon: DollarSign,\n      label: '新增收款單',\n      color: 'text-emerald-600',\n      action: () => {\n        setShowNewReceiptDialog(true);\n        setShowQuickMenu(false);\n      }\n    },\n    {\n      id: 'new-task',\n      icon: CheckSquare,\n      label: '新增任務',\n      color: 'text-morandi-gold',\n      action: () => {\n        setShowNewTaskDialog(true);\n        setShowQuickMenu(false);\n      }\n    },\n    {\n      id: 'upload-file',\n      icon: Paperclip,\n      label: '上傳檔案',\n      color: 'text-morandi-secondary',\n      action: () => {\n        fileInputRef.current?.click();\n        setShowQuickMenu(false);\n      }\n    }\n  ];\n\n  // 點擊外部關閉選單\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (quickMenuRef.current && !quickMenuRef.current.contains(event.target as Node)) {\n        setShowQuickMenu(false);\n      }\n    };\n\n    if (showQuickMenu) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showQuickMenu]);\n\n  if (loading) {\n    return (\n      <div className=\"h-full flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-morandi-gold border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex rounded-lg border border-border overflow-hidden bg-white\">\n      {/* 頻道側邊欄 */}\n      <div className=\"w-64 bg-morandi-container/5 border-r border-morandi-gold/20 flex flex-col shrink-0\">\n        {/* 工作空間標題 */}\n        <div className=\"px-4 py-3 border-b border-morandi-gold/20 bg-gradient-to-r from-morandi-gold/5 to-transparent\">\n          <h2 className=\"font-semibold text-morandi-primary truncate\">\n            {currentWorkspace?.icon} {currentWorkspace?.name || '工作空間'}\n          </h2>\n        </div>\n\n        {/* 頻道區塊 */}\n        <div className=\"flex-1 overflow-y-auto\">\n          {/* 頻道標題 */}\n          <div className=\"px-3 py-2 flex items-center justify-between sticky top-0 bg-morandi-container/5 z-10\">\n            <div className=\"flex items-center gap-2\">\n              <Hash size={16} className=\"text-morandi-secondary\" />\n              <span className=\"text-xs font-semibold text-morandi-secondary uppercase tracking-wider\">頻道</span>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"w-5 h-5 hover:bg-morandi-gold/10\"\n              onClick={() => setShowChannelForm(true)}\n            >\n              <Plus size={12} className=\"text-morandi-secondary\" />\n            </Button>\n          </div>\n\n          {/* 頻道列表 */}\n          <div className=\"px-2 pb-2 space-y-0.5\">\n            {channels.map(channel => (\n              <button\n                key={channel.id}\n                onClick={() => setSelectedChannel(channel)}\n                className={cn(\n                  \"w-full flex items-center gap-2 px-2 py-1.5 text-left rounded text-sm transition-all group\",\n                  selectedChannel?.id === channel.id\n                    ? \"bg-morandi-gold/15 text-morandi-primary font-medium\"\n                    : \"text-morandi-secondary hover:bg-morandi-container/20 hover:text-morandi-primary\"\n                )}\n              >\n                <Hash size={14} className={cn(\n                  \"shrink-0\",\n                  selectedChannel?.id === channel.id ? \"text-morandi-gold\" : \"text-morandi-secondary group-hover:text-morandi-gold\"\n                )} />\n                <span className=\"truncate\">{channel.name}</span>\n                {/* 未讀訊息數（預留） */}\n                {/* <span className=\"ml-auto text-xs bg-morandi-gold text-white rounded-full px-1.5 py-0.5\">3</span> */}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* 新增頻道表單 */}\n        {showChannelForm && (\n          <div className=\"p-4 border-t border-border\">\n            <form onSubmit={handleCreateChannel} className=\"space-y-2\">\n              <Input\n                value={newChannelName}\n                onChange={(e) => setNewChannelName(e.target.value)}\n                placeholder=\"頻道名稱\"\n                className=\"text-sm\"\n              />\n              <div className=\"flex gap-2\">\n                <Button type=\"submit\" size=\"sm\" className=\"flex-1\">\n                  建立\n                </Button>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setShowChannelForm(false);\n                    setNewChannelName('');\n                  }}\n                >\n                  取消\n                </Button>\n              </div>\n            </form>\n          </div>\n        )}\n      </div>\n\n      {/* 主要聊天區域 */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        {selectedChannel ? (\n          <>\n            {/* 頻道標題列 */}\n            <div className=\"p-4 border-b border-border bg-white shrink-0\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <Hash size={20} className=\"text-morandi-gold\" />\n                  <div>\n                    <h3 className=\"font-medium text-morandi-primary\">\n                      {selectedChannel.name}\n                    </h3>\n                    {selectedChannel.description && (\n                      <p className=\"text-sm text-morandi-secondary\">\n                        {selectedChannel.description}\n                      </p>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"w-8 h-8\"\n                    onClick={() => setShowMemberSidebar(!showMemberSidebar)}\n                  >\n                    <Users size={16} />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"w-8 h-8\"\n                    onClick={() => setShowSettingsDialog(true)}\n                  >\n                    <Settings size={16} />\n                  </Button>\n                </div>\n              </div>\n            </div>\n\n            {/* 訊息與成員區域 */}\n            <div className=\"flex-1 flex min-h-0\">\n              {/* 訊息區域 */}\n              <div className=\"flex-1 overflow-y-auto p-4 space-y-4 min-h-0\">\n              {messages.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center h-full text-center\">\n                  <Hash size={48} className=\"text-morandi-secondary/50 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-morandi-primary mb-2\">\n                    歡迎來到 #{selectedChannel.name}\n                  </h3>\n                  <p className=\"text-morandi-secondary\">\n                    這裡還沒有任何訊息。開始對話吧！\n                  </p>\n                </div>\n              ) : (\n                messages.map(message => (\n                  <div key={message.id} className=\"flex gap-3 group hover:bg-morandi-container/5 -mx-2 px-3 py-1.5 rounded transition-colors\">\n                    {/* 用戶頭像 */}\n                    <div className=\"w-9 h-9 bg-gradient-to-br from-morandi-gold/30 to-morandi-gold/10 rounded-md flex items-center justify-center text-sm font-semibold text-morandi-gold shrink-0 mt-0.5\">\n                      {(message.author?.chineseName || message.author?.chinese_name)?.charAt(0) || '?'}\n                    </div>\n\n                    {/* 訊息內容 */}\n                    <div className=\"flex-1 min-w-0 relative pt-0.5\">\n                      {/* 訊息標題 */}\n                      <div className=\"flex items-baseline gap-2 mb-0.5\">\n                        <span className=\"font-semibold text-morandi-primary text-[15px]\">\n                          {message.author?.chineseName || message.author?.chinese_name || '未知用戶'}\n                        </span>\n                        <span className=\"text-[11px] text-morandi-secondary/80 font-normal\">\n                          {formatMessageTime(message.created_at)}\n                        </span>\n                        {message.edited_at && (\n                          <span className=\"text-[11px] text-morandi-secondary/60\">(已編輯)</span>\n                        )}\n                      </div>\n\n                      {/* 訊息文字 */}\n                      <div className=\"text-morandi-primary text-[15px] whitespace-pre-wrap leading-[1.46668] break-words\">\n                        {message.content}\n                      </div>\n\n                      {/* 附件列表 */}\n                      {message.attachments && message.attachments.length > 0 && (\n                        <div className=\"mt-2 space-y-2\">\n                          {message.attachments.map((attachment, index) => {\n                            const isImage = attachment.fileType.startsWith('image/');\n                            return (\n                              <div\n                                key={index}\n                                className=\"inline-flex items-center gap-2 px-3 py-2 bg-morandi-container/10 border border-morandi-container rounded-lg hover:bg-morandi-container/20 transition-colors group/attachment\"\n                              >\n                                {isImage ? (\n                                  <ImageIcon size={16} className=\"text-morandi-gold shrink-0\" />\n                                ) : (\n                                  <FileText size={16} className=\"text-morandi-secondary shrink-0\" />\n                                )}\n                                <div className=\"flex-1 min-w-0\">\n                                  <p className=\"text-sm text-morandi-primary truncate max-w-[200px]\">\n                                    {attachment.fileName}\n                                  </p>\n                                  <p className=\"text-xs text-morandi-secondary\">\n                                    {formatFileSize(attachment.fileSize)}\n                                  </p>\n                                </div>\n                                <button\n                                  onClick={() => downloadFile(attachment.path, 'workspace-files', attachment.fileName)}\n                                  className=\"opacity-0 group-hover/attachment:opacity-100 transition-opacity p-1 hover:bg-morandi-gold/10 rounded\"\n                                  title=\"下載檔案\"\n                                >\n                                  <Download size={14} className=\"text-morandi-gold\" />\n                                </button>\n                              </div>\n                            );\n                          })}\n                        </div>\n                      )}\n\n                      {/* 反應列 */}\n                      {Object.keys(message.reactions).length > 0 && (\n                        <div className=\"flex flex-wrap gap-1 mt-2\">\n                          {Object.entries(message.reactions).map(([emoji, users]) => (\n                            <button\n                              key={emoji}\n                              onClick={() => handleReaction(message.id, emoji)}\n                              className={cn(\n                                \"flex items-center gap-1 px-2 py-1 text-xs rounded-full border transition-colors\",\n                                users.includes(user?.id || '')\n                                  ? \"bg-morandi-gold/20 border-morandi-gold text-morandi-primary\"\n                                  : \"bg-morandi-container/20 border-border text-morandi-secondary hover:bg-morandi-container/30\"\n                              )}\n                            >\n                              <span>{emoji}</span>\n                              <span>{users.length}</span>\n                            </button>\n                          ))}\n                        </div>\n                      )}\n\n                      {/* 反應按鈕 - hover 訊息時顯示 */}\n                      <div className=\"flex gap-0.5 mt-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                        {['👍', '❤️', '😄', '😮', '🎉'].map(emoji => (\n                          <button\n                            key={emoji}\n                            onClick={() => handleReaction(message.id, emoji)}\n                            className=\"w-6 h-6 flex items-center justify-center text-xs hover:bg-morandi-container/30 rounded border border-morandi-container hover:border-morandi-gold/40 transition-all hover:scale-110\"\n                            title={`加上 ${emoji} 反應`}\n                          >\n                            {emoji}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                ))\n              )}\n              <div ref={messagesEndRef} />\n              </div>\n\n              {/* 成員側邊欄 */}\n              {showMemberSidebar && (\n                <div className=\"w-64 border-l border-border bg-morandi-container/5 flex flex-col shrink-0\">\n                  <div className=\"p-4 border-b border-border\">\n                    <h3 className=\"font-medium text-morandi-primary\">成員列表</h3>\n                  </div>\n                  <div className=\"flex-1 overflow-y-auto p-2\">\n                    <div className=\"text-center text-morandi-secondary text-sm py-4\">\n                      載入成員列表中...\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* 輸入區域 */}\n            <div\n              className={cn(\n                \"p-4 border-t border-morandi-gold/20 bg-morandi-container/5 shrink-0 transition-colors\",\n                isDragging && \"bg-morandi-gold/10 border-morandi-gold\"\n              )}\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={handleDrop}\n            >\n              {/* 檔案預覽區 */}\n              {attachedFiles.length > 0 && (\n                <div className=\"mb-3 flex flex-wrap gap-2\">\n                  {attachedFiles.map((file, index) => {\n                    const isImage = file.type.startsWith('image/');\n                    return (\n                      <div\n                        key={index}\n                        className=\"relative bg-white border border-morandi-container rounded-lg p-2 pr-8 flex items-center gap-2 max-w-xs\"\n                      >\n                        {isImage ? (\n                          <ImageIcon size={16} className=\"text-morandi-gold shrink-0\" />\n                        ) : (\n                          <FileText size={16} className=\"text-morandi-secondary shrink-0\" />\n                        )}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm text-morandi-primary truncate\">{file.name}</p>\n                          <p className=\"text-xs text-morandi-secondary\">{formatFileSize(file.size)}</p>\n                        </div>\n                        <button\n                          type=\"button\"\n                          onClick={() => handleRemoveFile(index)}\n                          className=\"absolute right-2 top-1/2 -translate-y-1/2 text-morandi-secondary hover:text-morandi-red transition-colors\"\n                        >\n                          <X size={14} />\n                        </button>\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n\n              {/* 上傳進度條 */}\n              {uploadingFiles && uploadProgress > 0 && (\n                <div className=\"mb-3\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <span className=\"text-xs text-morandi-secondary\">上傳檔案中...</span>\n                    <span className=\"text-xs text-morandi-secondary\">{uploadProgress}%</span>\n                  </div>\n                  <div className=\"w-full h-1.5 bg-morandi-container/20 rounded-full overflow-hidden\">\n                    <div\n                      className=\"h-full bg-morandi-gold transition-all duration-300\"\n                      style={{ width: `${uploadProgress}%` }}\n                    />\n                  </div>\n                </div>\n              )}\n\n              <form onSubmit={handleSendMessage} className=\"flex gap-2\">\n                <div className=\"flex items-center gap-1 relative\">\n                  {/* 快捷選單按鈕 */}\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"w-9 h-9 text-morandi-secondary hover:text-morandi-gold hover:bg-morandi-gold/10\"\n                    onClick={() => setShowQuickMenu(!showQuickMenu)}\n                  >\n                    <Plus size={18} />\n                  </Button>\n\n                  {/* 快捷選單 */}\n                  {showQuickMenu && (\n                    <div\n                      ref={quickMenuRef}\n                      className=\"absolute bottom-full left-0 mb-2 bg-white border border-morandi-gold/20 rounded-lg shadow-xl py-1.5 min-w-[220px] z-50 animate-in fade-in slide-in-from-bottom-2 duration-200\"\n                    >\n                      <div className=\"px-3 py-1.5 border-b border-morandi-container/30\">\n                        <p className=\"text-xs font-semibold text-morandi-secondary uppercase tracking-wider\">快捷操作</p>\n                      </div>\n                      {quickMenuActions.map((action, index) => {\n                        const Icon = action.icon;\n                        const isLast = index === quickMenuActions.length - 1;\n                        return (\n                          <div key={action.id}>\n                            {isLast && <div className=\"my-1 border-t border-morandi-container/30\" />}\n                            <button\n                              type=\"button\"\n                              onClick={action.action}\n                              className=\"w-full flex items-center gap-3 px-3 py-2 hover:bg-morandi-gold/10 transition-all text-left group\"\n                            >\n                              <div className={cn(\n                                \"w-8 h-8 rounded-md flex items-center justify-center transition-all\",\n                                \"bg-gradient-to-br from-morandi-container/20 to-morandi-container/5\",\n                                \"group-hover:from-morandi-gold/10 group-hover:to-morandi-gold/5\"\n                              )}>\n                                <Icon size={16} className={cn(action.color, \"group-hover:scale-110 transition-transform\")} />\n                              </div>\n                              <span className=\"text-sm text-morandi-primary font-medium\">{action.label}</span>\n                            </button>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  )}\n\n                  {/* 附件上傳按鈕 (隱藏的 input) */}\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    multiple\n                    className=\"hidden\"\n                    onChange={handleFileSelect}\n                    accept=\"image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt\"\n                  />\n                </div>\n\n                <div\n                  className=\"flex-1 relative\"\n                  ref={messageInputRef}\n                  onPaste={handlePaste}\n                >\n                  <Input\n                    value={messageText}\n                    onChange={(e) => setMessageText(e.target.value)}\n                    placeholder={`在 #${selectedChannel.name} 中輸入訊息...`}\n                    className=\"pr-10 bg-white border-morandi-container\"\n                  />\n                  <button\n                    type=\"button\"\n                    className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-morandi-secondary hover:text-morandi-gold transition-colors pointer-events-auto z-10\"\n                  >\n                    <Smile size={16} />\n                  </button>\n                </div>\n\n                <Button\n                  type=\"submit\"\n                  disabled={(!messageText.trim() && attachedFiles.length === 0) || uploadingFiles}\n                  className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {uploadingFiles ? (\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                  ) : (\n                    <Send size={16} />\n                  )}\n                </Button>\n              </form>\n\n              {isDragging && (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-morandi-gold/5 border-2 border-dashed border-morandi-gold rounded-lg pointer-events-none\">\n                  <div className=\"text-center\">\n                    <Paperclip size={32} className=\"mx-auto mb-2 text-morandi-gold\" />\n                    <p className=\"text-morandi-gold font-medium\">放開以上傳檔案</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-center\">\n            <div className=\"text-center\">\n              <Hash size={48} className=\"text-morandi-secondary/50 mx-auto mb-4\" />\n              <p className=\"text-morandi-secondary\">選擇一個頻道開始對話</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* 頻道設定對話框 */}\n      <Dialog open={showSettingsDialog} onOpenChange={setShowSettingsDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>頻道設定</DialogTitle>\n            <DialogDescription>\n              管理 #{selectedChannel?.name} 的設定\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">頻道名稱</label>\n              <Input\n                value={editChannelName}\n                onChange={(e) => setEditChannelName(e.target.value)}\n                placeholder=\"頻道名稱\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">頻道描述</label>\n              <Input\n                value={editChannelDescription}\n                onChange={(e) => setEditChannelDescription(e.target.value)}\n                placeholder=\"頻道描述（選填）\"\n              />\n            </div>\n            <div className=\"pt-4 border-t border-border\">\n              <Button\n                variant=\"destructive\"\n                className=\"w-full\"\n                onClick={async () => {\n                  console.log('刪除按鈕被點擊', { selectedChannel });\n                  if (!selectedChannel) {\n                    console.log('沒有選擇頻道');\n                    return;\n                  }\n\n                  const confirmed = confirm(`確定要刪除 #${selectedChannel.name} 頻道嗎？此操作無法復原。`);\n                  console.log('確認刪除:', confirmed);\n\n                  if (confirmed) {\n                    try {\n                      console.log('開始刪除頻道:', selectedChannel.id);\n                      await deleteChannel(selectedChannel.id);\n                      console.log('頻道刪除成功');\n                      setSelectedChannel(null);\n                      setShowSettingsDialog(false);\n                      alert('頻道已刪除');\n                    } catch (error) {\n                      console.error('刪除頻道失敗:', error);\n                      alert('刪除頻道失敗，請稍後再試');\n                    }\n                  }\n                }}\n              >\n                <Trash2 size={16} className=\"mr-2\" />\n                刪除頻道\n              </Button>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowSettingsDialog(false)}>\n              取消\n            </Button>\n            <Button onClick={async () => {\n              console.log('儲存變更按鈕被點擊');\n              if (!selectedChannel) {\n                console.log('沒有選擇頻道');\n                return;\n              }\n\n              if (!editChannelName.trim()) {\n                alert('頻道名稱不能為空');\n                return;\n              }\n\n              try {\n                console.log('開始更新頻道:', selectedChannel.id, { name: editChannelName, description: editChannelDescription });\n                await updateChannel(selectedChannel.id, {\n                  name: editChannelName.toLowerCase().replace(/\\s+/g, '-'),\n                  description: editChannelDescription.trim() || undefined\n                });\n                setShowSettingsDialog(false);\n                alert('頻道設定已更新');\n              } catch (error) {\n                console.error('更新頻道失敗:', error);\n                alert('更新頻道失敗，請稍後再試');\n              }\n            }}>\n              儲存變更\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* 分享報價單對話框 */}\n      <Dialog open={showShareQuoteDialog} onOpenChange={setShowShareQuoteDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>分享報價單</DialogTitle>\n            <DialogDescription>\n              選擇要分享到頻道的報價單\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">報價單編號</label>\n              <Input placeholder=\"輸入報價單編號搜尋...\" />\n            </div>\n            <div className=\"border border-morandi-container rounded-lg p-3 space-y-2\">\n              <p className=\"text-sm text-morandi-secondary\">暫無報價單資料</p>\n              <p className=\"text-xs text-morandi-secondary\">提示：完整功能將連接報價單系統</p>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowShareQuoteDialog(false)}>\n              取消\n            </Button>\n            <Button onClick={() => {\n              // TODO: 實作分享報價單卡片\n              console.log('分享報價單卡片');\n              setShowShareQuoteDialog(false);\n            }}>\n              分享到頻道\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* 分享團況對話框 */}\n      <Dialog open={showShareTourDialog} onOpenChange={setShowShareTourDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>分享團況</DialogTitle>\n            <DialogDescription>\n              選擇要分享到頻道的團況資訊\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">團號</label>\n              <Input placeholder=\"輸入團號搜尋...\" />\n            </div>\n            <div className=\"border border-morandi-container rounded-lg p-3 space-y-2\">\n              <p className=\"text-sm text-morandi-secondary\">暫無團況資料</p>\n              <p className=\"text-xs text-morandi-secondary\">提示：完整功能將連接團況管理系統</p>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowShareTourDialog(false)}>\n              取消\n            </Button>\n            <Button onClick={() => {\n              // TODO: 實作分享團況卡片\n              console.log('分享團況卡片');\n              setShowShareTourDialog(false);\n            }}>\n              分享到頻道\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* 新增訂單對話框 */}\n      <Dialog open={showNewOrderDialog} onOpenChange={setShowNewOrderDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>新增訂單</DialogTitle>\n            <DialogDescription>\n              建立新訂單並分享到頻道\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">訂單名稱</label>\n              <Input placeholder=\"輸入訂單名稱...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">客戶名稱</label>\n              <Input placeholder=\"輸入客戶名稱...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">金額</label>\n              <Input type=\"number\" placeholder=\"輸入金額...\" />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowNewOrderDialog(false)}>\n              取消\n            </Button>\n            <Button onClick={() => {\n              // TODO: 實作新增訂單\n              console.log('新增訂單');\n              setShowNewOrderDialog(false);\n            }}>\n              建立並分享\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* 新增請款單對話框 */}\n      <Dialog open={showNewPaymentDialog} onOpenChange={setShowNewPaymentDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>新增請款單</DialogTitle>\n            <DialogDescription>\n              建立新請款單並分享到頻道\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">請款項目</label>\n              <Input placeholder=\"輸入請款項目...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">請款金額</label>\n              <Input type=\"number\" placeholder=\"輸入請款金額...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">請款原因</label>\n              <Input placeholder=\"輸入請款原因...\" />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowNewPaymentDialog(false)}>\n              取消\n            </Button>\n            <Button onClick={() => {\n              // TODO: 實作新增請款單\n              console.log('新增請款單');\n              setShowNewPaymentDialog(false);\n            }}>\n              建立並分享\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* 新增收款單對話框 */}\n      <Dialog open={showNewReceiptDialog} onOpenChange={setShowNewReceiptDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>新增收款單</DialogTitle>\n            <DialogDescription>\n              建立新收款單並分享到頻道\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">收款項目</label>\n              <Input placeholder=\"輸入收款項目...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">收款金額</label>\n              <Input type=\"number\" placeholder=\"輸入收款金額...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">付款人</label>\n              <Input placeholder=\"輸入付款人...\" />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowNewReceiptDialog(false)}>\n              取消\n            </Button>\n            <Button onClick={() => {\n              // TODO: 實作新增收款單\n              console.log('新增收款單');\n              setShowNewReceiptDialog(false);\n            }}>\n              建立並分享\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* 新增任務對話框 */}\n      <Dialog open={showNewTaskDialog} onOpenChange={setShowNewTaskDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>新增任務</DialogTitle>\n            <DialogDescription>\n              建立新任務並分享到頻道\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">任務標題</label>\n              <Input placeholder=\"輸入任務標題...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">任務描述</label>\n              <Input placeholder=\"輸入任務描述...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">指派給</label>\n              <Input placeholder=\"輸入成員名稱...\" />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-morandi-primary\">截止日期</label>\n              <Input type=\"date\" />\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowNewTaskDialog(false)}>\n              取消\n            </Button>\n            <Button onClick={() => {\n              // TODO: 實作新增任務\n              console.log('新增任務');\n              setShowNewTaskDialog(false);\n            }}>\n              建立並分享\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4077, "column": 0}, "map": {"version":3,"sources":["file:///Users/williamchien/Desktop/Venturo/venturo-new/src/app/workspace/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { ResponsiveHeader } from '@/components/layout/responsive-header';\nimport { BulletinBoard } from '@/components/workspace/BulletinBoard';\nimport { ChannelChat } from '@/components/workspace/ChannelChat';\nimport { Building2, MessageSquare, Briefcase } from 'lucide-react';\nimport { useWorkspaceStore } from '@/stores/workspace-store';\nimport { useAuthStore } from '@/stores/auth-store';\nimport { cn } from '@/lib/utils';\n\nexport default function WorkspacePage() {\n  const [activeTab, setActiveTab] = useState('bulletin');\n\n  const {\n    workspaces,\n    currentWorkspace,\n    loading,\n    loadWorkspaces,\n    setCurrentWorkspace\n  } = useWorkspaceStore();\n\n  const { user } = useAuthStore();\n\n  useEffect(() => {\n    // 載入工作空間列表\n    loadWorkspaces().catch(err => {\n      console.error('載入工作空間失敗:', err);\n    });\n  }, []);\n\n  useEffect(() => {\n    // 設定預設工作空間\n    if (workspaces.length > 0 && !currentWorkspace) {\n      const defaultWorkspace = workspaces.find(w => w.name === '總部辦公室') || workspaces[0];\n      setCurrentWorkspace(defaultWorkspace);\n    }\n  }, [workspaces, currentWorkspace, setCurrentWorkspace]);\n\n  if (loading) {\n    return (\n      <div className=\"h-full flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-morandi-gold border-t-transparent rounded-full\"></div>\n      </div>\n    );\n  }\n\n  // 固定的核心標籤頁\n  const tabs = [\n    { value: 'bulletin', label: '公告欄', icon: Building2 },\n    { value: 'chat', label: '頻道對話', icon: MessageSquare }\n  ];\n\n  return (\n    <div className=\"flex flex-col h-full space-y-6\">\n      <ResponsiveHeader\n        title={`${currentWorkspace?.icon || '🏢'} ${currentWorkspace?.name || '工作空間'}`}\n        icon={Briefcase}\n        breadcrumb={[\n          { label: '首頁', href: '/' },\n          { label: '工作空間', href: '/workspace' }\n        ]}\n        tabs={tabs}\n        activeTab={activeTab}\n        onTabChange={(value) => {\n          setActiveTab(value);\n        }}\n      >\n        <div className=\"flex items-center gap-4\">\n          {/* 工作空間切換器 */}\n          {workspaces.length > 1 && (\n            <select\n              value={currentWorkspace?.id || ''}\n              onChange={(e) => {\n                const workspace = workspaces.find(w => w.id === e.target.value);\n                if (workspace) setCurrentWorkspace(workspace);\n              }}\n              className=\"px-3 py-2 border border-border rounded-md text-sm bg-white\"\n            >\n              {workspaces.map(workspace => (\n                <option key={workspace.id} value={workspace.id}>\n                  {workspace.icon} {workspace.name}\n                </option>\n              ))}\n            </select>\n          )}\n        </div>\n      </ResponsiveHeader>\n\n      {/* 內容區 - 撐滿剩餘高度 */}\n      <div className=\"flex-1 min-h-0\">\n        {activeTab === 'bulletin' && <BulletinBoard />}\n        {activeTab === 'chat' && <ChannelChat />}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AAVA;;;;;;;;AAae,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,EACJ,UAAU,EACV,gBAAgB,EAChB,OAAO,EACP,cAAc,EACd,mBAAmB,EACpB,GAAG,IAAA,2JAAiB;IAErB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,iJAAY;IAE7B,IAAA,0KAAS;mCAAC;YACR,WAAW;YACX,iBAAiB,KAAK;2CAAC,CAAA;oBACrB,QAAQ,KAAK,CAAC,aAAa;gBAC7B;;QACF;kCAAG,EAAE;IAEL,IAAA,0KAAS;mCAAC;YACR,WAAW;YACX,IAAI,WAAW,MAAM,GAAG,KAAK,CAAC,kBAAkB;gBAC9C,MAAM,mBAAmB,WAAW,IAAI;+CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;iDAAY,UAAU,CAAC,EAAE;gBAClF,oBAAoB;YACtB;QACF;kCAAG;QAAC;QAAY;QAAkB;KAAoB;IAEtD,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,WAAW;IACX,MAAM,OAAO;QACX;YAAE,OAAO;YAAY,OAAO;YAAO,MAAM,gOAAS;QAAC;QACnD;YAAE,OAAO;YAAQ,OAAO;YAAQ,MAAM,4OAAa;QAAC;KACrD;IAED,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2KAAgB;gBACf,OAAO,AAAC,GAAoC,OAAlC,CAAA,6BAAA,uCAAA,iBAAkB,IAAI,KAAI,MAAK,KAAoC,OAAjC,CAAA,6BAAA,uCAAA,iBAAkB,IAAI,KAAI;gBACtE,MAAM,4NAAS;gBACf,YAAY;oBACV;wBAAE,OAAO;wBAAM,MAAM;oBAAI;oBACzB;wBAAE,OAAO;wBAAQ,MAAM;oBAAa;iBACrC;gBACD,MAAM;gBACN,WAAW;gBACX,aAAa,CAAC;oBACZ,aAAa;gBACf;0BAEA,cAAA,6LAAC;oBAAI,WAAU;8BAEZ,WAAW,MAAM,GAAG,mBACnB,6LAAC;wBACC,OAAO,CAAA,6BAAA,uCAAA,iBAAkB,EAAE,KAAI;wBAC/B,UAAU,CAAC;4BACT,MAAM,YAAY,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK;4BAC9D,IAAI,WAAW,oBAAoB;wBACrC;wBACA,WAAU;kCAET,WAAW,GAAG,CAAC,CAAA,0BACd,6LAAC;gCAA0B,OAAO,UAAU,EAAE;;oCAC3C,UAAU,IAAI;oCAAC;oCAAE,UAAU,IAAI;;+BADrB,UAAU,EAAE;;;;;;;;;;;;;;;;;;;;0BAUnC,6LAAC;gBAAI,WAAU;;oBACZ,cAAc,4BAAc,6LAAC,oKAAa;;;;;oBAC1C,cAAc,wBAAU,6LAAC,gKAAW;;;;;;;;;;;;;;;;;AAI7C;GArFwB;;QASlB,2JAAiB;QAEJ,iJAAY;;;KAXP","debugId":null}}]
}