# Venturo 5.0 核心規範與設計原則

最後更新：2025-12-08

## 🎯 專案定位

- **目標用戶**：小型旅行社（10-50人）
- **使用場景**：辦公室為主，外勤為輔
- **核心價值**：簡單、實用、穩定

## 📐 設計原則

### 1. 簡單優先（Simplicity First）

- **統一 > 分散**：所有功能統一處理方式
- **簡單 > 完美**：可用性優先於完美設計
- **實用 > 理論**：解決實際問題，不過度設計

### 2. 雲端優先架構（Cloud-First）

- **Supabase 為唯一資料來源**（真實資料）
- **IndexedDB 為本地快取層**：加速載入、避免網路不穩誤判為 bug
- **即時同步**：資料變更立即反映到雲端
- **快取策略**：先顯示本地快取，背景同步最新資料

### 3. 編號系統設計

- **編號格式**：`{workspace_code}-{類型}{日期}{流水號}`
- **範例**：`TP-T2501001`（台北辦公室-旅遊團-25年1月-001）
- **workspace_code**：登入時從資料庫取得，存入 user 物件

## 🏗️ 技術決策

### 資料架構

1. **Supabase PostgreSQL**：所有資料的唯一來源
2. **Zustand Store**：前端狀態管理（記憶體快取）

### 多 Workspace 設計

- **TP**：台北辦公室
- **TC**：台中辦公室
- **workspace_id**：每筆資料都有所屬 workspace
- **workspace_code**：登入時取得，用於編號生成

### 資料表設計

- **預留擴充**：50+ 個表是為未來功能預留
- **目前使用**：約 15 個核心業務表
- **不急著刪**：開發階段保留彈性

## 🚫 常見誤解澄清

### ❌ 錯誤理解

1. ~~"需要完整離線支援"~~ → 不做離線編輯，但用 IndexedDB 快取避免網路不穩時白畫面
2. "資料表太多" → 開發中預留是正常的
3. "首頁應該顯示業務資訊" → 首頁定位是小工具頁面
4. "需要複雜的權限控制" → 小公司不需要

### ✅ 正確理解

1. **雲端優先**：Supabase 是唯一資料來源，IndexedDB 為快取層
2. **多 workspace**：台北/台中資料要正確隔離
3. **首頁小工具**：實用工具集中地
4. **簡單架構**：適合小團隊維護

## 💡 開發指引

### 新功能開發原則

1. 先確保基本功能可用
2. 確保 workspace 資料隔離正確
3. 介面遵循莫蘭迪色系
4. 不過度優化

### 不要做的事

- 不要假設資料已載入（先檢查）
- 不要用預設值掩蓋 null（會造成資料混亂）
- 不要追求完美架構
- 不要把 IndexedDB 當作資料來源（它只是快取，真實資料永遠在 Supabase）

## 📊 系統現狀

### 已完成

- ✅ 純雲端架構（Supabase）
- ✅ 多 workspace 支援（TP/TC）
- ✅ 統一的 Store 工廠
- ✅ 莫蘭迪色系 UI
- ✅ Realtime 即時同步
- ✅ IndexedDB 快取層（2026-02-12 重新啟用）

### 進行中

- 🔄 完善業務功能
- 🔄 優化使用者體驗

### 待開發

- 📝 更多業務功能
- 📝 報表系統
- 📝 數據分析

## ⚠️ 重要提醒

**給 AI 助手的提醒：**

1. 這是小公司系統，不需要企業級複雜度
2. 統一處理優於精細區分
3. 實用性優於理論完美
4. 不要建議複雜的權限系統
5. **workspace 資料隔離很重要**：台中同事不能看到台北的編號
6. 首頁就是小工具頁面，不是儀表板

**記住：Simple is Better！**
