# Venturo V1.0 ä¸Šç·šå‰ Final Checklist

**ç”¢å‡ºæ—¥æœŸ:** 2026-02-18  
**æ ¹æ“š:** å…¨ç³»çµ±å¯©æŸ¥ (79 commits, 424 tests, 12 æ‰¹æ¬¡å¯©æŸ¥)  
**Build:** âœ… é€šé | **Tests:** âœ… 424/424 é€šé

---

## âœ… å·²å®Œæˆ

### æ ¸å¿ƒæ¥­å‹™æµç¨‹
- [x] é–‹åœ˜ï¼šåœ˜åˆ—è¡¨æ­£å¸¸é¡¯ç¤º 18 ç­†ã€ç¯©é¸ï¼ˆææ¡ˆ/é€²è¡Œä¸­ï¼‰æ­£å¸¸
- [x] è¨‚å–®ï¼š13 ç­†è¨‚å–®æ­£å¸¸é¡¯ç¤ºã€æˆå“¡å±•é–‹æ­£å¸¸
- [x] å ±åƒ¹ï¼šäº¤é€š/ä½å®¿/é¤é£²/æ´»å‹•è²»ç”¨æ˜ç´°æ­£å¸¸
- [x] éœ€æ±‚ï¼š17 é …éœ€æ±‚ï¼ˆäº¤é€š/ä½å®¿/é¤é£Ÿï¼‰æ­£å¸¸
- [x] åœ˜ç¢ºå–®ï¼šå®Œæ•´åœ˜è³‡è¨Š/è¡Œç¨‹/é¤é£Ÿ/ä½å®¿æ­£å¸¸
- [x] æ”¶æ¬¾/è«‹æ¬¾/å‡ºç´ï¼šç¸½è¦½ tab æœ‰å ±åƒ¹å–®/æ”¶æ¬¾ç´€éŒ„/æˆæœ¬æ”¯å‡º
- [x] è¡Œç¨‹ç·¨è¼¯å™¨ï¼š6 å¤©è¡Œç¨‹ + æ™¯é»åº«/é£¯åº—åº«/é¤å»³åº«
- [x] æ‰€æœ‰ 11 å€‹ tab æ­£å¸¸åˆ‡æ›

### å®‰å…¨æ€§
- [x] Rate limiting middleware å·²åŠ ä¸Š
- [x] CSP headers å¼·åŒ–
- [x] `/api/debug` å…¬é–‹è·¯å¾‘å·²ç§»é™¤
- [x] Admin å¯†ç¢¼é‡è¨­æ¬Šé™æª¢æŸ¥å·²ä¿®å¾©ï¼ˆåŸæœ¬ä»»ä½•ç™»å…¥ç”¨æˆ¶å¯é‡è¨­ï¼‰
- [x] 44 å€‹ API routes å…¨éƒ¨æœ‰èªè­‰ä¿è­·
- [x] 31+ API routes æœ‰ Zod schema è¼¸å…¥é©—è­‰
- [x] RLSï¼šé™¤ `_migrations` å¤–æ‰€æœ‰è¡¨å·²å•Ÿç”¨
- [x] workspace_id IS NULL å…±ç”¨è³‡æ–™æ¢ä»¶ï¼š9 å¼µè¡¨å…¨éƒ¨æ­£ç¢º

### Bug ä¿®å¾©ï¼ˆåš´é‡ï¼‰
- [x] Login å£æ‰ â€” get-employee-data + CSP å•é¡Œ
- [x] Block editor ç„¡é™è¿´åœˆ â€” useEffect ref guard
- [x] Cron ticket-status èªè­‰å¤±æ•— â€” header åç¨±ä¿®æ­£
- [x] çºŒä½ checkbox é»æ“Šç„¡æ•ˆ
- [x] é£¯åº—åº«æ¬„ä½åéŒ¯èª¤ï¼ˆ`name_en` â†’ `english_name`ï¼‰
- [x] çµæ¡ˆå ±è¡¨æ¬„ä½éŒ¯èª¤ï¼ˆ`supplier_type` â†’ `request_type`ï¼‰
- [x] order_members ä¸å­˜åœ¨æ¬„ä½ä¿®æ­£
- [x] ~10 è™• DB query å¼•ç”¨ä¸å­˜åœ¨æ¬„ä½ä¿®æ­£
- [x] å‡ºç´æ¨¡çµ„ 4 å€‹ bug ä¿®å¾©
- [x] workspace ç§è¨Šé¡¯ç¤º UUID â†’ äººå

### ç¨‹å¼ç¢¼å“è³ª
- [x] æ­»ä»£ç¢¼æ¸…ç†ï¼š~8,873 è¡Œæœƒè¨ˆæ¨¡çµ„ç§»é™¤
- [x] æœªä½¿ç”¨ä¾è³´ç§»é™¤ï¼ˆreact-leaflet, @univerjs/*, cmdkï¼‰
- [x] `select('*')` â†’ æ˜ç¢ºæ¬„ä½ï¼ˆ10 å€‹é«˜æµé‡å¯¦é«”ï¼‰
- [x] 12 å€‹æ¨¡çµ„ i18n ç¡¬ç·¨ç¢¼ä¸­æ–‡æŠ½å–
- [x] é›™é‡æäº¤ä¿è­·ï¼ˆBatchReceiptDialog, AddRequestDialog, RequestDetailDialogï¼‰
- [x] Email/Phone é©—è­‰ï¼ˆCompanyFormDialogï¼‰
- [x] æ¸¬è©¦è¦†è“‹ï¼š0 â†’ 424 tests

---

## âš ï¸ å·²çŸ¥ä½†å¯æ¥å—ï¼ˆä¸å½±éŸ¿ V1 ä½¿ç”¨ï¼‰

| # | å•é¡Œ | åŸå›  |
|---|------|------|
| 1 | 37 å¼µè¡¨æœ‰ RLS ä½†ç„¡ Policyï¼ˆå¦‚ badge_definitions, social_groups, friends ç­‰ï¼‰ | é€™äº›éƒ½æ˜¯ V2 Online ç¤¾ç¾¤åŠŸèƒ½çš„è¡¨ï¼ŒERP ç«¯é€é service role å­˜å–ï¼ŒV1 ä¸å—å½±éŸ¿ |
| 2 | `itineraries/generate` å¤šå€‹æ¬„ä½å¼•ç”¨å¯èƒ½éŒ¯èª¤ï¼ˆcountry_id, city_id, iata_codeï¼‰ | AI è¡Œç¨‹ç”Ÿæˆç‚ºè¼”åŠ©åŠŸèƒ½ï¼Œä¸å½±éŸ¿æ ¸å¿ƒæµç¨‹ |
| 3 | `change-password` ä½¿ç”¨ `code` æŸ¥è©¢ employees | éœ€ç¢ºèª DB schemaï¼Œä½†å¯†ç¢¼ä¿®æ”¹æœ‰å…¶ä»–è·¯å¾‘å¯ç”¨ |
| 4 | ERP æª”æ¡ˆ tab å…§å®¹ç‚ºç©º | åŠŸèƒ½æ­£å¸¸ï¼Œåƒ…è©²åœ˜ç„¡ä¸Šå‚³æª”æ¡ˆ |
| 5 | `paper-texture.png` 404 | ç´”è£é£¾è³‡æºï¼Œä¸å½±éŸ¿åŠŸèƒ½ |
| 6 | éƒ¨åˆ† API ç¼º Rate Limitï¼ˆå¦‚ create-employee-auth, storage/uploadï¼‰ | å·²æœ‰èªè­‰ä¿è­·ï¼Œé¢¨éšªä½ |
| 7 | `<img>` æœªå…¨é¢è½‰ `next/image` | æ•ˆèƒ½å¾®å„ªåŒ–ï¼Œä¸å½±éŸ¿åŠŸèƒ½ |
| 8 | Native `alert()` æœªå…¨é¢æ›¿æ› | UX å•é¡Œï¼ŒéåŠŸèƒ½å•é¡Œ |

---

## âœ… ä¸Šç·šå‰å¿…åšï¼ˆå…¨éƒ¨å®Œæˆï¼‰

| # | é …ç›® | ç‹€æ…‹ | èªªæ˜ |
|---|------|------|------|
| 1 | **Online V2 åŠŸèƒ½å…¥å£éš±è—** | âœ… å·²å®Œæˆ | conversation API å‘¼å«ç§»é™¤ï¼Œprofile V2 tabs éš±è— |
| 2 | **Online Profile é¡¯ç¤ºåç¨±** | âœ… å·²å®Œæˆ | fallback: display_name â†’ chinese_name â†’ email prefix |
| 3 | **itinerary_days / itinerary_items RLS Policy** | âœ… å·²ç¢ºèªå®Œæ•´ | 4 å€‹ per-operation policy |
| 4 | **journal_lines RLS Policy** | âœ… å·²ç¢ºèªå®Œæ•´ | 4 å€‹ per-operation policy |

---

## ğŸ“‹ ä¸Šç·šå¾Œ TODOï¼ˆV2ï¼‰

### Online ç«¯
- [ ] ERP â†’ Online è³‡æ–™åŒæ­¥æ©Ÿåˆ¶ï¼ˆonline_trips ç›®å‰ç‚ºç©ºï¼‰
- [ ] ç¤¾ç¾¤åŠŸèƒ½ï¼špostsã€conversationsã€friends è¡¨ + API
- [ ] å‹³ç« ç³»çµ±ï¼ˆbadge_definitions ç­‰ï¼‰
- [ ] æ—…ä¼´åˆ†å¸³åŠŸèƒ½ï¼ˆtraveler_expenses ç³»åˆ—è¡¨ï¼‰
- [ ] é ˜éšŠ/å¸æ©ŸçœŸå¯¦å·¥ä½œæµç¨‹ç«¯å°ç«¯æ¸¬è©¦

### å®‰å…¨æ€§å¼·åŒ–
- [ ] 37 å¼µç„¡ Policy è¡¨è£œä¸Š RLS Policyï¼ˆéš¨åŠŸèƒ½é–‹ç™¼ï¼‰
- [ ] è£œé½Šæ‰€æœ‰ API çš„ Rate Limit
- [ ] E2E æ¸¬è©¦ï¼ˆbrowser-levelï¼‰

### æ•ˆèƒ½
- [ ] Load testing / benchmark
- [ ] é€²ä¸€æ­¥ N+1 æŸ¥è©¢å„ªåŒ–
- [ ] Database index å¯©æŸ¥

### æŠ€è¡“å‚µ
- [ ] Next.js eslint config é·ç§»æ–°æ ¼å¼
- [ ] middleware â†’ proxy é·ç§»ï¼ˆNext.js 16 deprecationï¼‰
- [ ] Sentry disableLogger deprecation ä¿®æ­£
- [ ] `next/image` å…¨é¢æ›¿æ›
- [ ] Native `alert()` â†’ custom dialog å…¨é¢æ›¿æ›

---

## ğŸš€ ä¸Šç·šåˆ¤å®š

| é¢å‘ | ç‹€æ…‹ | å‚™è¨» |
|------|------|------|
| æ ¸å¿ƒæ¥­å‹™æµç¨‹ | âœ… Ready | 22/22 é é¢æ¸¬è©¦é€šé |
| å®‰å…¨æ€§ | âœ… Ready | èªè­‰ + RLS + è¼¸å…¥é©—è­‰å®Œå‚™ |
| Online ç«¯ | âœ… Ready | V2 åŠŸèƒ½å·²éš±è—ã€åç¨±é¡¯ç¤ºå·²ä¿®æ­£ |
| è³‡æ–™å®Œæ•´æ€§ | âœ… Ready | DB schema vs code å·²æ¯”å°ä¿®æ­£ |
| æ•ˆèƒ½ | âœ… Acceptable | select('*') å·²æ”¹å–„ï¼Œç„¡å·²çŸ¥ç“¶é ¸ |
| æ¸¬è©¦ | âœ… Ready | 424 tests å…¨é€šé |

**çµè«–ï¼šæ‰€æœ‰å¿…åšé …å·²å®Œæˆï¼Œç³»çµ±å·²é”å¯ä¸Šç·šç‹€æ…‹ã€‚**
