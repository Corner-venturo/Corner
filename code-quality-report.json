{
  "largeFiles": [
    {
      "file": "src/app/visas/page.tsx",
      "lines": 1002
    },
    {
      "file": "src/components/TourPage.tsx",
      "lines": 897
    },
    {
      "file": "src/components/todos/todo-expanded-view.tsx",
      "lines": 777
    },
    {
      "file": "src/lib/db/index.ts",
      "lines": 735
    },
    {
      "file": "src/components/shared/react-datasheet-wrapper.tsx",
      "lines": 708
    },
    {
      "file": "src/stores/create-store.ts",
      "lines": 697
    },
    {
      "file": "src/components/workspace/QuickTools.tsx",
      "lines": 665
    },
    {
      "file": "src/lib/db/schemas.ts",
      "lines": 630
    },
    {
      "file": "src/app/finance/treasury/disbursement/page.tsx",
      "lines": 630
    },
    {
      "file": "src/components/workspace/ChannelChat.tsx",
      "lines": 622
    },
    {
      "file": "src/components/hr/tabs/basic-info-tab.tsx",
      "lines": 615
    },
    {
      "file": "src/stores/types.ts",
      "lines": 603
    },
    {
      "file": "src/components/workspace/PersonalCanvas.tsx",
      "lines": 599
    },
    {
      "file": "src/components/ui/enhanced-table.tsx",
      "lines": 599
    },
    {
      "file": "src/stores/timebox-store.ts",
      "lines": 574
    },
    {
      "file": "src/components/hr/add-employee-form.tsx",
      "lines": 553
    },
    {
      "file": "src/lib/supabase/types.ts",
      "lines": 540
    },
    {
      "file": "src/app/tours/page.tsx",
      "lines": 537
    },
    {
      "file": "src/components/todos/quick-actions/quick-disbursement.tsx",
      "lines": 532
    }
  ],
  "typeEscapes": [
    {
      "file": "src//app/settings/page.tsx",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 95,
          "code": "const isPasswordValid = await verifyPassword(passwordData.currentPassword, (userData as unknown).password_hash);"
        },
        {
          "lineNum": 105,
          "code": "const result: unknown = await (supabase as unknown)"
        },
        {
          "lineNum": 136,
          "code": "const employee = await localDB.read(TABLES.EMPLOYEES, user.id) as unknown;"
        }
      ]
    },
    {
      "file": "src//app/database/regions/page.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 47,
          "code": "// ✅ 修復：使用 satisfies 而非 as unknown"
        }
      ]
    },
    {
      "file": "src//app/database/transport/page.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 221,
          "code": "icon: Car} as unknown}"
        }
      ]
    },
    {
      "file": "src//app/database/suppliers/page.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 104,
          "code": "} as unknown);"
        }
      ]
    },
    {
      "file": "src//app/database/activities/page.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 197,
          "code": "icon: Ticket} as unknown}"
        }
      ]
    },
    {
      "file": "src//app/tours/page.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 485,
          "code": "} as unknown}"
        }
      ]
    },
    {
      "file": "src//app/quotes/page.tsx",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 94,
          "code": "{(quote as unknown).code || '-'}"
        },
        {
          "lineNum": 225,
          "code": "if (duplicated && (duplicated as unknown).id) {"
        },
        {
          "lineNum": 227,
          "code": "router.push(`/quotes/${(duplicated as unknown).id}`);"
        }
      ]
    },
    {
      "file": "src//app/visas/page.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 496,
          "code": "} as unknown);"
        },
        {
          "lineNum": 706,
          "code": "icon: FileText} as unknown}"
        }
      ]
    },
    {
      "file": "src//app/hr/page.tsx",
      "count": 4,
      "occurrences": [
        {
          "lineNum": 86,
          "code": "const confirmMessage = `⚠️ 確定要將員工「${employee.display_name || (employee as unknown).chinese_name || '未命名員工'}」辦理離職嗎？\\n\\n離職後將無法登入系統，但歷史記錄會保留。`;"
        },
        {
          "lineNum": 108,
          "code": "const confirmMessage = `⚠️⚠️⚠️ 確定要刪除員工「${employee.display_name || (employee as unknown).chinese_name || '未命名員工'}」嗎？\\n\\n此操作會：\\n- 永久刪除員工所有資料\\n- 移除所有歷史記錄\\n- 無法復原\\n\\n建議使用「辦理離職」功能來保留歷史記錄。\\n\\n真的要刪除嗎？`;"
        },
        {
          "lineNum": 119,
          "code": "alert(`✅ 員工「${employee.display_name || (employee as unknown).chinese_name || '未命名員工'}」已成功刪除`);"
        },
        {
          "lineNum": 216,
          "code": "{employee.display_name || (employee as unknown).chinese_name || '未命名員工'}"
        }
      ]
    },
    {
      "file": "src//app/api/workspaces/[workspaceId]/channels/[channelId]/members/route.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 25,
          "code": ".from('channel_members' as unknown)"
        },
        {
          "lineNum": 104,
          "code": ".from('channel_members' as unknown)"
        }
      ]
    },
    {
      "file": "src//app/finance/treasury/disbursement/page.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 60,
          "code": "} = {} as unknown;"
        },
        {
          "lineNum": 356,
          "code": "onTabChange={(tab) => setActiveTab(tab as unknown)}"
        }
      ]
    },
    {
      "file": "src//app/finance/travel-invoice/create/page.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 169,
          "code": "onChange={e => setTaxType(e.target.value as unknown)}"
        }
      ]
    },
    {
      "file": "src//app/orders/[orderId]/payment/page.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 20,
          "code": "const orders = (orderStore as unknown).orders || [];"
        },
        {
          "lineNum": 21,
          "code": "const paymentRequests = (paymentStore as unknown).payment_requests || [];"
        }
      ]
    },
    {
      "file": "src//app/orders/page.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 122,
          "code": "} as unknown);"
        },
        {
          "lineNum": 134,
          "code": "icon: ShoppingCart} as unknown}"
        }
      ]
    },
    {
      "file": "src//app/todos/page.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 243,
          "code": "await addTodo(newTodoData as unknown);"
        },
        {
          "lineNum": 296,
          "code": "await addTodo(newTodoData as unknown);"
        }
      ]
    },
    {
      "file": "src//features/customers/hooks/useCustomers.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 21,
          "code": "return await store.create(data as unknown);"
        }
      ]
    },
    {
      "file": "src//features/customers/services/customer.service.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 15,
          "code": "await store.create(customer as unknown);"
        }
      ]
    },
    {
      "file": "src//features/accounting/services/accounting.service.ts",
      "count": 4,
      "occurrences": [
        {
          "lineNum": 13,
          "code": "getAll: () => store.accounts as unknown,"
        },
        {
          "lineNum": 14,
          "code": "getById: (id: string) => store.accounts.find(a => a.id === id) as unknown,"
        },
        {
          "lineNum": 16,
          "code": "await store.addAccount(account as unknown);"
        },
        {
          "lineNum": 120,
          "code": "await store.addCategory(category as unknown);"
        }
      ]
    },
    {
      "file": "src//features/payments/hooks/usePayments.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 25,
          "code": "return await paymentRequestService.create(data as unknown);"
        }
      ]
    },
    {
      "file": "src//features/payments/services/disbursement-order.service.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 15,
          "code": "const result = await store.create(order as unknown);"
        },
        {
          "lineNum": 103,
          "code": "const order = await this.create(orderData as unknown);"
        }
      ]
    },
    {
      "file": "src//features/payments/services/payment-request.service.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 16,
          "code": "const result = await store.create(request as unknown);"
        },
        {
          "lineNum": 196,
          "code": "return await this.create(requestData as unknown);"
        }
      ]
    },
    {
      "file": "src//features/tours/components/TourExpandedView.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 197,
          "code": "} as unknown}"
        }
      ]
    },
    {
      "file": "src//features/tours/hooks/useTours.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 20,
          "code": "return await tourStore.create(data as unknown);"
        }
      ]
    },
    {
      "file": "src//features/tours/services/tour.service.ts",
      "count": 6,
      "occurrences": [
        {
          "lineNum": 22,
          "code": "const result = await store.create(tour as unknown);"
        },
        {
          "lineNum": 132,
          "code": "const total_revenue = tour.price * ((tour as unknown).current_participants || 0);"
        },
        {
          "lineNum": 217,
          "code": "if ((data as unknown)._deleted) {"
        },
        {
          "lineNum": 226,
          "code": ".eq('id', (data as unknown).id)"
        },
        {
          "lineNum": 277,
          "code": "} as unknown;"
        },
        {
          "lineNum": 279,
          "code": "return await this.create(visaTour as unknown);"
        }
      ]
    },
    {
      "file": "src//features/suppliers/services/supplier.service.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 15,
          "code": "await store.create(supplier as unknown);"
        }
      ]
    },
    {
      "file": "src//features/quotes/hooks/useQuoteActions.ts",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 124,
          "code": "} as unknown);"
        },
        {
          "lineNum": 163,
          "code": "} as unknown);"
        },
        {
          "lineNum": 204,
          "code": "} as unknown);"
        }
      ]
    },
    {
      "file": "src//features/quotes/hooks/useQuotes.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 14,
          "code": "return await store.create(data as unknown);"
        }
      ]
    },
    {
      "file": "src//features/quotes/services/quote.service.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 16,
          "code": "const result = await store.create(quote as unknown);"
        },
        {
          "lineNum": 55,
          "code": "} as unknown);"
        }
      ]
    },
    {
      "file": "src//features/finance/requests/components/RequestItemForm.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 40,
          "code": "onValueChange={(value) => setNewItem(prev => ({ ...prev, category: value as unknown }))}"
        }
      ]
    },
    {
      "file": "src//features/finance/requests/hooks/useRequestOperations.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 38,
          "code": "} as unknown);"
        },
        {
          "lineNum": 84,
          "code": "} as unknown);"
        }
      ]
    },
    {
      "file": "src//features/finance/requests/hooks/useRequestTable.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 145,
          "code": "payment_requests as unknown,"
        }
      ]
    },
    {
      "file": "src//features/orders/hooks/useOrders.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 14,
          "code": "return await store.create(data as unknown);"
        },
        {
          "lineNum": 36,
          "code": "return orderService.getOrdersByStatus(status as unknown);"
        }
      ]
    },
    {
      "file": "src//features/orders/services/order.service.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 15,
          "code": "const result = await store.create(order as unknown);"
        }
      ]
    },
    {
      "file": "src//features/todos/services/todo.service.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 15,
          "code": "await store.create(todo as unknown);"
        },
        {
          "lineNum": 46,
          "code": "await store.update(id, { status: todo.status === 'completed' ? 'pending' : 'completed' } as unknown);"
        }
      ]
    },
    {
      "file": "src//stores/create-store.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 683,
          "code": "const oldListener = (window as unknown)[SYNC_LISTENER_KEY];"
        },
        {
          "lineNum": 691,
          "code": "(window as unknown)[SYNC_LISTENER_KEY] = handleSyncCompleted;"
        }
      ]
    },
    {
      "file": "src//stores/timebox-store-supabase.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 433,
          "code": "updated.completedSetsTime[setIndex] = updated.setsCompleted[setIndex] ? new Date() : null as unknown"
        }
      ]
    },
    {
      "file": "src//stores/workspace/chat-store.ts",
      "count": 4,
      "occurrences": [
        {
          "lineNum": 67,
          "code": "const { data, error } = await (supabase as unknown)"
        },
        {
          "lineNum": 123,
          "code": "const { error } = await (supabase as unknown)"
        },
        {
          "lineNum": 247,
          "code": "const { error } = await (supabase as unknown)"
        },
        {
          "lineNum": 281,
          "code": "const { error } = await (supabase as unknown)"
        }
      ]
    },
    {
      "file": "src//stores/workspace/channels-store.ts",
      "count": 5,
      "occurrences": [
        {
          "lineNum": 75,
          "code": "const { data, error } = await (supabase as unknown)"
        },
        {
          "lineNum": 198,
          "code": "const { data, error } = await (supabase as unknown)"
        },
        {
          "lineNum": 240,
          "code": "const { error } = await (supabase as unknown)"
        },
        {
          "lineNum": 276,
          "code": "const { error } = await (supabase as unknown)"
        },
        {
          "lineNum": 303,
          "code": "const { error } = await (supabase as unknown)"
        }
      ]
    },
    {
      "file": "src//stores/workspace/widgets-store.ts",
      "count": 5,
      "occurrences": [
        {
          "lineNum": 54,
          "code": "const { error: listError } = await (supabase as unknown)"
        },
        {
          "lineNum": 66,
          "code": "const { error: itemsError } = await (supabase as unknown)"
        },
        {
          "lineNum": 141,
          "code": "const { data: lists, error: listsError } = await (supabase as unknown)"
        },
        {
          "lineNum": 152,
          "code": "const { data: items, error: itemsError } = await (supabase as unknown)"
        },
        {
          "lineNum": 186,
          "code": "const { error } = await (supabase as unknown)"
        }
      ]
    },
    {
      "file": "src//stores/index.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 116,
          "code": "export const useTourAddOnStore = createStore<import('./types').TourAddOn>('tour_addons' as unknown);"
        }
      ]
    },
    {
      "file": "src//components/accounting/transaction-list.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 100,
          "code": "onChange={(e) => setFilterType(e.target.value as unknown)}"
        },
        {
          "lineNum": 112,
          "code": "onChange={(e) => setDateRange(e.target.value as unknown)}"
        }
      ]
    },
    {
      "file": "src//components/accounting/add-account-dialog.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 125,
          "code": "type: type.id as unknown,"
        }
      ]
    },
    {
      "file": "src//components/accounting/add-transaction-dialog.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 106,
          "code": "onClick={() => setTransactionType(type.id as unknown)}"
        }
      ]
    },
    {
      "file": "src//components/ui/calendar.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 59,
          "code": "} as unknown}"
        }
      ]
    },
    {
      "file": "src//components/ui/checkbox.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 19,
          "code": "(checkboxRef.current as unknown).indeterminate = indeterminate ?? false;"
        }
      ]
    },
    {
      "file": "src//components/tours/tour-costs.tsx",
      "count": 4,
      "occurrences": [
        {
          "lineNum": 151,
          "code": ".filter(cost => (cost as unknown).category === category)"
        },
        {
          "lineNum": 199,
          "code": "const Icon = getCategoryIcon((cost as unknown).category || '');"
        },
        {
          "lineNum": 200,
          "code": "const displayCategory = getCategoryDisplayName((cost as unknown).category || '');"
        },
        {
          "lineNum": 233,
          "code": "{(cost as unknown).vendor || relatedOrder?.order_number || '-'}"
        }
      ]
    },
    {
      "file": "src//components/tours/tour-payments.tsx",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 205,
          "code": "getMethodBadge((payment as unknown).method)"
        },
        {
          "lineNum": 207,
          "code": "{getMethodDisplayName((payment as unknown).method)}"
        },
        {
          "lineNum": 300,
          "code": "onChange={(e) => setNewPayment(prev => ({ ...prev, status: e.target.value as unknown }))}"
        }
      ]
    },
    {
      "file": "src//components/tours/tour-members.tsx",
      "count": 11,
      "occurrences": [
        {
          "lineNum": 124,
          "code": "(member as unknown)[field] = value;"
        },
        {
          "lineNum": 147,
          "code": "delete (convertedData as unknown).nameEn;"
        },
        {
          "lineNum": 148,
          "code": "delete (convertedData as unknown).passportNumber;"
        },
        {
          "lineNum": 149,
          "code": "delete (convertedData as unknown).passportExpiry;"
        },
        {
          "lineNum": 150,
          "code": "delete (convertedData as unknown).idNumber;"
        },
        {
          "lineNum": 152,
          "code": "const newMember = await addMember(convertedData as unknown);"
        },
        {
          "lineNum": 168,
          "code": "delete (convertedData as unknown).nameEn;"
        },
        {
          "lineNum": 169,
          "code": "delete (convertedData as unknown).passportNumber;"
        },
        {
          "lineNum": 170,
          "code": "delete (convertedData as unknown).passportExpiry;"
        },
        {
          "lineNum": 171,
          "code": "delete (convertedData as unknown).idNumber;"
        },
        {
          "lineNum": 173,
          "code": "await updateMember(member.id, convertedData as unknown);"
        }
      ]
    },
    {
      "file": "src//components/workspace/QuickTools.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 151,
          "code": "const rate = (exchangeRates as unknown)[fromCurrency]?.[toCurrency];"
        }
      ]
    },
    {
      "file": "src//components/workspace/ShareAdvanceDialog.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 48,
          "code": "const notDeleted = !(emp as unknown)._deleted;"
        },
        {
          "lineNum": 49,
          "code": "const isActive = (emp as unknown).status === 'active';"
        }
      ]
    },
    {
      "file": "src//components/workspace/CreatePaymentRequestDialog.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 82,
          "code": "} as unknown);"
        }
      ]
    },
    {
      "file": "src//components/workspace/BulletinBoard.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 84,
          "code": "type: bulletin.type as unknown,"
        },
        {
          "lineNum": 282,
          "code": "onChange={(e) => setNewBulletin({...newBulletin, type: e.target.value as unknown})}"
        }
      ]
    },
    {
      "file": "src//components/workspace/workspace-task-list.tsx",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 82,
          "code": "} as unknown);"
        },
        {
          "lineNum": 248,
          "code": "{getEmployeeName((note as unknown).user_id)[0]}"
        },
        {
          "lineNum": 255,
          "code": "{getEmployeeName((note as unknown).user_id)}"
        }
      ]
    },
    {
      "file": "src//components/workspace/CreateReceiptDialog.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 58,
          "code": "const receipt = await createReceipt(receiptData as unknown);"
        },
        {
          "lineNum": 133,
          "code": "onChange={(e) => setPaymentMethod(e.target.value as unknown)}"
        }
      ]
    },
    {
      "file": "src//components/workspace/channel-list.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 23,
          "code": "const isArchived = (channel as unknown).isArchived; // Add isArchived to Channel interface"
        }
      ]
    },
    {
      "file": "src//components/workspace/canvas-view.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 60,
          "code": "} as unknown);"
        },
        {
          "lineNum": 130,
          "code": "tour_id={(channel as unknown).tour_id}"
        }
      ]
    },
    {
      "file": "src//components/hr/tabs/permissions-tab.tsx",
      "count": 7,
      "occurrences": [
        {
          "lineNum": 21,
          "code": "const [selectedRoles, setSelectedRoles] = useState<string[]>((employee as unknown).roles || []);"
        },
        {
          "lineNum": 27,
          "code": "setSelectedRoles((employee as unknown).roles || []);"
        },
        {
          "lineNum": 71,
          "code": "await updateUser(employee.id, { roles: roles as unknown });"
        },
        {
          "lineNum": 78,
          "code": "const existingEmployee = await localDB.read(TABLES.EMPLOYEES, employee.id) as unknown;"
        },
        {
          "lineNum": 95,
          "code": "roles: roles as unknown"
        },
        {
          "lineNum": 106,
          "code": "roles: roles as unknown"
        },
        {
          "lineNum": 136,
          "code": "const existingEmployee = await localDB.read(TABLES.EMPLOYEES, employee.id) as unknown;"
        }
      ]
    },
    {
      "file": "src//components/hr/tabs/basic-info-tab.tsx",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 33,
          "code": "chinese_name: (employee as unknown).chinese_name || '',"
        },
        {
          "lineNum": 91,
          "code": "chinese_name: (employee as unknown).chinese_name || '',"
        },
        {
          "lineNum": 197,
          "code": "<p className=\"text-morandi-primary py-2\">{(employee as unknown).chinese_name || '-'}</p>"
        }
      ]
    },
    {
      "file": "src//components/hr/employee-expanded-view.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 134,
          "code": "{employee.display_name || (employee as unknown).chinese_name || '未命名員工'}"
        }
      ]
    },
    {
      "file": "src//components/hr/add-employee-form.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 112,
          "code": "addUser(dbEmployeeData as unknown);"
        }
      ]
    },
    {
      "file": "src//components/templates/template-pdf-preview.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 130,
          "code": "<div className={`flex items-center ${(currentStyle as unknown)?.container || ''}`}>"
        },
        {
          "lineNum": 141,
          "code": "className={`px-3 py-2 transition-all ${(currentStyle as unknown)?.text || ''}"
        }
      ]
    },
    {
      "file": "src//components/templates/template-card.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 129,
          "code": "<span>{formatDate((template.metadata as unknown).updated_at)}</span>"
        }
      ]
    },
    {
      "file": "src//components/templates/template-editor-dialog.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 139,
          "code": "} as unknown);"
        }
      ]
    },
    {
      "file": "src//components/templates/field-mapping-editor.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 63,
          "code": "const validation = validateField(field as unknown);"
        }
      ]
    },
    {
      "file": "src//components/finance/batch-receipt-dialog.tsx",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 187,
          "code": "} as unknown);"
        },
        {
          "lineNum": 234,
          "code": "onValueChange={(value) => updatePaymentItem(index, { payment_method: value as unknown })}"
        }
      ]
    },
    {
      "file": "src//components/members/excel-member-table.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 83,
          "code": "const created = await memberStore.create(memberData as unknown);"
        }
      ]
    },
    {
      "file": "src//components/orders/add-order-form.tsx",
      "count": 6,
      "occurrences": [
        {
          "lineNum": 85,
          "code": "const notDeleted = !(emp as unknown)._deleted;"
        },
        {
          "lineNum": 86,
          "code": "const isActive = (emp as unknown).status === 'active';"
        },
        {
          "lineNum": 91,
          "code": "(emp as unknown).roles?.includes('sales')"
        },
        {
          "lineNum": 101,
          "code": "const notDeleted = !(emp as unknown)._deleted;"
        },
        {
          "lineNum": 102,
          "code": "const isActive = (emp as unknown).status === 'active';"
        },
        {
          "lineNum": 107,
          "code": "(emp as unknown).roles?.includes('assistant')"
        }
      ]
    },
    {
      "file": "src//components/orders/order-kanban.tsx",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 48,
          "code": "updateOrder(draggedOrder.id, { payment_status: status as unknown });"
        }
      ]
    },
    {
      "file": "src//hooks/useCrudOperations.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 14,
          "code": "} as unknown as T;"
        }
      ]
    },
    {
      "file": "src//lib/cache/cache-strategy.ts",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 243,
          "code": "const value = await localDB.read('cache' as unknown, key);"
        },
        {
          "lineNum": 254,
          "code": "await localDB.create('cache' as unknown, { id: key, data: value });"
        },
        {
          "lineNum": 264,
          "code": "await localDB.delete('cache' as unknown, key);"
        }
      ]
    },
    {
      "file": "src//lib/error-handler.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 77,
          "code": "return `驗證錯誤: ${(error as unknown).field} - ${error.message}`;"
        },
        {
          "lineNum": 81,
          "code": "return `找不到資源: ${(error as unknown).resource} (ID: ${(error as unknown).id})`;"
        }
      ]
    },
    {
      "file": "src//lib/supabase/helpers.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 11,
          "code": "return data as unknown;"
        },
        {
          "lineNum": 19,
          "code": "return data as unknown;"
        }
      ]
    },
    {
      "file": "src//lib/supabase/api.ts",
      "count": 4,
      "occurrences": [
        {
          "lineNum": 93,
          "code": "const { data: result, error } = await (supabase as unknown)"
        },
        {
          "lineNum": 202,
          "code": "const { data: result, error } = await (supabase as unknown)"
        },
        {
          "lineNum": 239,
          "code": "let query = (supabase as unknown).from(table);"
        },
        {
          "lineNum": 343,
          "code": "const { data, error } = await (supabase as unknown).rpc('execute_sql', {"
        }
      ]
    },
    {
      "file": "src//lib/db/init-local-data.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 77,
          "code": "const { data: employees, error } = await (supabase as unknown)"
        },
        {
          "lineNum": 145,
          "code": "await localDB.clear(table as unknown);"
        }
      ]
    },
    {
      "file": "src//lib/db/database-initializer.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 224,
          "code": "(window as unknown).DatabaseInitializer = DatabaseInitializer;"
        }
      ]
    },
    {
      "file": "src//lib/db/sync-schema-helper.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 59,
          "code": "return SYNCABLE_TABLES.includes(tableName as unknown);"
        }
      ]
    },
    {
      "file": "src//lib/db/verify-and-fix.ts",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 190,
          "code": "(window as unknown).verifyAndFix = verifyAndFix;"
        },
        {
          "lineNum": 191,
          "code": "(window as unknown).quickCheck = quickCheck;"
        },
        {
          "lineNum": 192,
          "code": "(window as unknown).clearAndRebuild = clearAndRebuild;"
        }
      ]
    },
    {
      "file": "src//lib/sync/background-sync-service.ts",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 101,
          "code": "const { data: supabaseData, error } = await (supabase.from(tableName) as unknown)"
        },
        {
          "lineNum": 172,
          "code": "const { error } = await (supabase.from(tableName) as unknown)"
        },
        {
          "lineNum": 181,
          "code": "const { error } = await (supabase.from(tableName) as unknown)"
        }
      ]
    },
    {
      "file": "src//lib/performance/memory-manager.ts",
      "count": 4,
      "occurrences": [
        {
          "lineNum": 66,
          "code": "if (typeof window === 'undefined' || !(performance as unknown).memory) {"
        },
        {
          "lineNum": 70,
          "code": "const memory = (performance as unknown).memory;"
        },
        {
          "lineNum": 112,
          "code": "if (typeof window !== 'undefined' && (window as unknown).gc) {"
        },
        {
          "lineNum": 114,
          "code": "(window as unknown).gc();"
        }
      ]
    },
    {
      "file": "src//lib/store/lazy-store.ts",
      "count": 3,
      "occurrences": [
        {
          "lineNum": 145,
          "code": "const localItem = await localDB.read(this.options.table as unknown, id);"
        },
        {
          "lineNum": 226,
          "code": "const allData = (await localDB.getAll(this.options.table as unknown)) as T[];"
        },
        {
          "lineNum": 288,
          "code": "await localDB.create(this.options.table as unknown, item);"
        }
      ]
    },
    {
      "file": "src//services/auth-service-v5.ts",
      "count": 2,
      "occurrences": [
        {
          "lineNum": 57,
          "code": "if (!(user as unknown).is_active || user.status === 'terminated') {"
        },
        {
          "lineNum": 88,
          "code": "await (supabase as unknown)"
        }
      ]
    },
    {
      "file": "src//services/offline-auth.service.ts",
      "count": 1,
      "occurrences": [
        {
          "lineNum": 33,
          "code": "const users = await localDB.getAll<unknown>(TABLES.EMPLOYEES as unknown);"
        }
      ]
    },
    {
      "file": "src//services/local-auth-service.ts",
      "count": 4,
      "occurrences": [
        {
          "lineNum": 77,
          "code": "} as unknown);"
        },
        {
          "lineNum": 106,
          "code": "} as unknown);"
        },
        {
          "lineNum": 174,
          "code": "} as unknown);"
        },
        {
          "lineNum": 204,
          "code": "} as unknown);"
        }
      ]
    }
  ],
  "setTimeoutUsage": [
    {
      "file": "src//app/accounting/page.tsx",
      "lineNum": 93,
      "code": "setTimeout(() => setShowToast(false), UI_DELAYS.SUCCESS_MESSAGE);"
    },
    {
      "file": "src//app/accounting/page.tsx",
      "lineNum": 96,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//app/accounting/page.tsx",
      "lineNum": 104,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//app/database/regions/page.tsx",
      "lineNum": 22,
      "code": "// ✅ 修復：移除 setTimeout，使用 Store 的 loading 狀態判斷準備完成"
    },
    {
      "file": "src//app/quotes/[id]/page.tsx",
      "lineNum": 128,
      "code": "scrollTimeoutRef.current = setTimeout(() => {"
    },
    {
      "file": "src//app/quotes/page.tsx",
      "lineNum": 40,
      "code": "const timer = setTimeout(() => {"
    },
    {
      "file": "src//app/fix-database/page.tsx",
      "lineNum": 318,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//app/timebox/components/box-dialogs/workout-dialog.tsx",
      "lineNum": 69,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//app/timebox/components/box-dialogs/workout-dialog.tsx",
      "lineNum": 95,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//app/timebox/components/box-dialogs/workout-dialog.tsx",
      "lineNum": 112,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//app/visas/page.tsx",
      "lineNum": 183,
      "code": "const copyStatusTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);"
    },
    {
      "file": "src//app/visas/page.tsx",
      "lineNum": 406,
      "code": "copyStatusTimeoutRef.current = setTimeout(() => {"
    },
    {
      "file": "src//app/itinerary/new/page.tsx",
      "lineNum": 255,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//features/quotes/hooks/useQuoteActions.ts",
      "lineNum": 128,
      "code": "setTimeout(() => setSaveSuccess(false), UI_DELAYS.SUCCESS_MESSAGE);"
    },
    {
      "file": "src//features/finance/requests/components/BatchTourSelect.tsx",
      "lineNum": 47,
      "code": "onBlur={() => setTimeout(() => onShowDropdown(false), UI_DELAYS.SHORT_DELAY)}"
    },
    {
      "file": "src//features/finance/requests/components/OrderSearchSelect.tsx",
      "lineNum": 46,
      "code": "onBlur={() => setTimeout(() => onShowDropdown(false), UI_DELAYS.SHORT_DELAY)}"
    },
    {
      "file": "src//features/finance/requests/components/TourSearchSelect.tsx",
      "lineNum": 45,
      "code": "onBlur={() => setTimeout(() => onShowDropdown(false), UI_DELAYS.SHORT_DELAY)}"
    },
    {
      "file": "src//stores/create-store.ts",
      "lineNum": 179,
      "code": "setTimeout(() => reject(new Error('IndexedDB_TIMEOUT')), SYNC_DELAYS.INDEXEDDB_INIT_TIMEOUT)"
    },
    {
      "file": "src//stores/create-store.ts",
      "lineNum": 226,
      "code": "new Promise((_, reject) => setTimeout(() => reject(new Error('TIMEOUT')), SYNC_DELAYS.INDEXEDDB_OPERATION_TIMEOUT))"
    },
    {
      "file": "src//stores/create-store.ts",
      "lineNum": 258,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/create-store.ts",
      "lineNum": 319,
      "code": "setTimeout(() => syncBatch(startIndex + batchSize), SYNC_DELAYS.BATCH_SYNC_DELAY);"
    },
    {
      "file": "src//stores/create-store.ts",
      "lineNum": 450,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/create-store.ts",
      "lineNum": 513,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/create-store.ts",
      "lineNum": 573,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/accounting-store.ts",
      "lineNum": 399,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//stores/workspace/chat-store.ts",
      "lineNum": 63,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/workspace/channels-store.ts",
      "lineNum": 194,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/operations/create.ts",
      "lineNum": 59,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/operations/update.ts",
      "lineNum": 53,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/operations/fetch.ts",
      "lineNum": 74,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/operations/delete.ts",
      "lineNum": 54,
      "code": "setTimeout(async () => {"
    },
    {
      "file": "src//stores/adapters/indexeddb-adapter.ts",
      "lineNum": 21,
      "code": "setTimeout(() => reject(new Error('IndexedDB_TIMEOUT')), timeout)"
    },
    {
      "file": "src//stores/adapters/indexeddb-adapter.ts",
      "lineNum": 98,
      "code": "setTimeout(() => reject(new Error('TIMEOUT')), timeout)"
    },
    {
      "file": "src//components/ui/thursday-date-picker.tsx",
      "lineNum": 59,
      "code": "setTimeout(() => setShowWarning(false), UI_DELAYS.MESSAGE_DISPLAY) // 3秒後自動隱藏"
    },
    {
      "file": "src//components/ui/smart-date-input.tsx",
      "lineNum": 65,
      "code": "setTimeout(() => monthRef.current?.focus(), SPECIAL_DELAYS.NEXT_TICK);"
    },
    {
      "file": "src//components/ui/smart-date-input.tsx",
      "lineNum": 87,
      "code": "setTimeout(() => dayRef.current?.focus(), SPECIAL_DELAYS.NEXT_TICK);"
    },
    {
      "file": "src//components/tours/tour-operations.tsx",
      "lineNum": 168,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//components/tours/tour-members.tsx",
      "lineNum": 91,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//components/manifestation/ChapterContent.tsx",
      "lineNum": 85,
      "code": "setTimeout(() => setSaveSuccess(false), UI_DELAYS.SUCCESS_MESSAGE);"
    },
    {
      "file": "src//components/manifestation/BreathingExercise.tsx",
      "lineNum": 20,
      "code": "const timer = setTimeout(() => {"
    },
    {
      "file": "src//components/layout/main-layout.tsx",
      "lineNum": 41,
      "code": "const checkTimeout = setTimeout(() => {"
    },
    {
      "file": "src//components/layout/sidebar.tsx",
      "lineNum": 190,
      "code": "timeoutRef.current = setTimeout(() => {"
    },
    {
      "file": "src//components/workspace/chat/hooks/useFileUpload.ts",
      "lineNum": 57,
      "code": "setTimeout(() => setUploadProgress(0), UI_DELAYS.AUTO_SAVE);"
    },
    {
      "file": "src//components/workspace/ChannelChat.tsx",
      "lineNum": 192,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//components/workspace/ChannelChat.tsx",
      "lineNum": 195,
      "code": "setTimeout(() => setIsSwitching(false), UI_DELAYS.FAST_FEEDBACK);"
    },
    {
      "file": "src//components/workspace/ChannelChat.tsx.backup",
      "lineNum": 226,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//components/workspace/ChannelChat.tsx.backup",
      "lineNum": 230,
      "code": "setTimeout(() => setIsSwitching(false), UI_DELAYS.FAST_FEEDBACK);"
    },
    {
      "file": "src//components/TourPage.tsx",
      "lineNum": 53,
      "code": "const timer = setTimeout(() => {"
    },
    {
      "file": "src//components/TourPage.tsx",
      "lineNum": 131,
      "code": "const timer = setTimeout(() => {"
    },
    {
      "file": "src//components/hr/tabs/permissions-tab.tsx",
      "lineNum": 117,
      "code": "setTimeout(() => setShowSavedMessage(false), UI_DELAYS.SUCCESS_MESSAGE);"
    },
    {
      "file": "src//components/hr/tabs/permissions-tab.tsx",
      "lineNum": 158,
      "code": "setTimeout(() => setShowSavedMessage(false), UI_DELAYS.SUCCESS_MESSAGE);"
    },
    {
      "file": "src//components/hr/add-employee-form.tsx",
      "lineNum": 133,
      "code": "setTimeout(() => setCopiedField(null), UI_DELAYS.SUCCESS_MESSAGE);"
    },
    {
      "file": "src//components/sync/sync-status-indicator.tsx",
      "lineNum": 91,
      "code": "setTimeout(() => setShowNotification(false), UI_DELAYS.MESSAGE_DISPLAY);"
    },
    {
      "file": "src//components/sync/sync-status-indicator.tsx",
      "lineNum": 97,
      "code": "setTimeout(() => setShowNotification(false), UI_DELAYS.MESSAGE_DISPLAY);"
    },
    {
      "file": "src//components/sync/sync-status-indicator.tsx",
      "lineNum": 117,
      "code": "setTimeout(() => setShowNotification(false), UI_DELAYS.MESSAGE_DISPLAY);"
    },
    {
      "file": "src//lib/constants/timeouts.ts",
      "lineNum": 3,
      "code": "* 統一管理所有 setTimeout/setInterval 的時間參數"
    },
    {
      "file": "src//lib/supabase/client.ts",
      "lineNum": 26,
      "code": "const timeoutId = setTimeout(() => controller.abort(), POLLING_INTERVALS.OCCASIONAL);"
    },
    {
      "file": "src//lib/db/index.ts",
      "lineNum": 172,
      "code": "setTimeout(() => {"
    },
    {
      "file": "src//lib/db/version-manager.ts",
      "lineNum": 96,
      "code": "setTimeout(() => resolve(), UI_DELAYS.AUTO_SAVE);"
    },
    {
      "file": "src//lib/files.ts",
      "lineNum": 7,
      "code": "return new Promise(resolve => setTimeout(resolve, duration));"
    }
  ],
  "memoryLeaks": [],
  "todos": [
    {
      "file": "src//app/tours/page.tsx.bak2",
      "count": 2
    },
    {
      "file": "src//app/orders/[orderId]/payment/page.tsx.bak2",
      "count": 2
    },
    {
      "file": "src//stores/index.ts",
      "count": 1
    },
    {
      "file": "src//stores/sync/merge-strategy.ts",
      "count": 1
    },
    {
      "file": "src//components/tours/tour-costs.tsx.bak2",
      "count": 2
    },
    {
      "file": "src//lib/db/schemas.ts",
      "count": 1
    },
    {
      "file": "src//services/offline-auth.service.ts",
      "count": 4
    }
  ],
  "syncFields": 0
}