[{"filePath":"/Users/william/Projects/venturo-new/add_updated_by_column.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/check-all-tables-schema.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":6,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":6,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/**\n * Ê™¢Êü•ÊâÄÊúâË°®Ê†ºÁöÑ created_by Âíå updated_by Ê¨Ñ‰Ωç\n */\n\nconst https = require('https')\n\nconst SUPABASE_ACCESS_TOKEN = 'sbp_94746ae5e9ecc9d270d27006ba5ed1d0da0bbaf0'\nconst PROJECT_REF = 'pfqvdacxowpgfamuvnsn'\n\n// ÂâçÁ´Ø‰ª£Á¢º‰∏≠‰ΩøÁî® updated_by ÁöÑË°®Ê†º\nconst TABLES_TO_CHECK = [\n  'todos',\n  'calendar_events',\n  'confirmations',\n  'contracts',\n  'customers',\n  'esims',\n  'itineraries',\n  'orders',\n  'payment_requests',\n  'pnrs',\n  'quotes',\n  'receipts',\n  'suppliers',\n  'tours'\n]\n\nasync function executeSQL(sql) {\n  return new Promise((resolve, reject) => {\n    const options = {\n      hostname: 'api.supabase.com',\n      port: 443,\n      path: `/v1/projects/${PROJECT_REF}/database/query`,\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${SUPABASE_ACCESS_TOKEN}`,\n        'Content-Type': 'application/json'\n      }\n    }\n\n    const req = https.request(options, (res) => {\n      let data = ''\n      res.on('data', (chunk) => { data += chunk })\n      res.on('end', () => {\n        if (res.statusCode === 200 || res.statusCode === 201) {\n          resolve(JSON.parse(data))\n        } else {\n          reject(new Error(`HTTP ${res.statusCode}: ${data}`))\n        }\n      })\n    })\n\n    req.on('error', reject)\n    req.write(JSON.stringify({ query: sql }))\n    req.end()\n  })\n}\n\nasync function checkTable(tableName) {\n  const sql = `\n    SELECT\n      column_name,\n      data_type,\n      is_nullable\n    FROM information_schema.columns\n    WHERE table_schema = 'public'\n      AND table_name = '${tableName}'\n      AND column_name IN ('created_by', 'updated_by')\n    ORDER BY column_name;\n  `\n\n  try {\n    const result = await executeSQL(sql)\n    return {\n      table: tableName,\n      columns: result,\n      hasCreatedBy: result.some(col => col.column_name === 'created_by'),\n      hasUpdatedBy: result.some(col => col.column_name === 'updated_by')\n    }\n  } catch (error) {\n    return {\n      table: tableName,\n      error: error.message,\n      columns: [],\n      hasCreatedBy: false,\n      hasUpdatedBy: false\n    }\n  }\n}\n\nasync function main() {\n  console.log('üîç Ê™¢Êü•ÊâÄÊúâË°®Ê†ºÁöÑ created_by Âíå updated_by Ê¨Ñ‰Ωç\\n')\n  console.log('=' .repeat(70))\n\n  const results = []\n\n  for (const table of TABLES_TO_CHECK) {\n    const result = await checkTable(table)\n    results.push(result)\n  }\n\n  // ÂàÜÈ°ûÈ°ØÁ§∫\n  const complete = results.filter(r => r.hasCreatedBy && r.hasUpdatedBy)\n  const partial = results.filter(r => (r.hasCreatedBy || r.hasUpdatedBy) && !(r.hasCreatedBy && r.hasUpdatedBy))\n  const missing = results.filter(r => !r.hasCreatedBy && !r.hasUpdatedBy && !r.error)\n  const errors = results.filter(r => r.error)\n\n  console.log(`\\n‚úÖ ÂÆåÊï¥ÔºàÊúâ created_by Âíå updated_byÔºâ: ${complete.length} ÂÄã`)\n  complete.forEach(r => {\n    console.log(`  ‚úì ${r.table}`)\n  })\n\n  if (partial.length > 0) {\n    console.log(`\\n‚ö†Ô∏è  ÈÉ®ÂàÜÁº∫Â§±: ${partial.length} ÂÄã`)\n    partial.forEach(r => {\n      const missing = []\n      if (!r.hasCreatedBy) missing.push('created_by')\n      if (!r.hasUpdatedBy) missing.push('updated_by')\n      console.log(`  ‚Ä¢ ${r.table} - Áº∫Â∞ë: ${missing.join(', ')}`)\n    })\n  }\n\n  if (missing.length > 0) {\n    console.log(`\\n‚ùå ÂÆåÂÖ®Áº∫Â§±: ${missing.length} ÂÄã`)\n    missing.forEach(r => {\n      console.log(`  ‚úó ${r.table} - Áº∫Â∞ë created_by Âíå updated_by`)\n    })\n  }\n\n  if (errors.length > 0) {\n    console.log(`\\n‚ö†Ô∏è  ÈåØË™§: ${errors.length} ÂÄã`)\n    errors.forEach(r => {\n      console.log(`  ! ${r.table} - ${r.error}`)\n    })\n  }\n\n  console.log('\\n' + '='.repeat(70))\n  console.log(`\\nÁ∏ΩË®àÊ™¢Êü•: ${results.length} ÂÄãË°®Ê†º`)\n  console.log(`‚úÖ ÂÆåÊï¥: ${complete.length}`)\n  console.log(`‚ö†Ô∏è  ÈÉ®ÂàÜ: ${partial.length}`)\n  console.log(`‚ùå Áº∫Â§±: ${missing.length}`)\n  console.log(`‚ö†Ô∏è  ÈåØË™§: ${errors.length}`)\n\n  // ËøîÂõûÈúÄË¶Å‰øÆÂæ©ÁöÑË°®Ê†ºÂàóË°®\n  const needFix = [...partial, ...missing]\n  if (needFix.length > 0) {\n    console.log(`\\nüîß ÈúÄË¶Å‰øÆÂæ©ÁöÑË°®Ê†º (${needFix.length} ÂÄã):`)\n    needFix.forEach(r => {\n      const missingFields = []\n      if (!r.hasCreatedBy) missingFields.push('created_by')\n      if (!r.hasUpdatedBy) missingFields.push('updated_by')\n      console.log(`  ‚Ä¢ ${r.table}: ${missingFields.join(', ')}`)\n    })\n  } else {\n    console.log('\\nüéâ ÊâÄÊúâË°®Ê†ºÈÉΩÂ∑≤ÂÆåÊï¥ÔºÅ')\n  }\n\n  process.exit(needFix.length > 0 ? 1 : 0)\n}\n\nmain().catch(error => {\n  console.error('‚ùå Âü∑Ë°åÈåØË™§:', error.message)\n  process.exit(1)\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/check-db-status.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":58}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { createClient } = require('@supabase/supabase-js')\n\nconst supabaseUrl = 'https://pfqvdacxowpgfamuvnsn.supabase.co'\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmcXZkYWN4b3dwZ2ZhbXV2bnNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjY5MjQwOTksImV4cCI6MjA0MjUwMDA5OX0.yNSfe-bVFsj1_j_vN9p8j5I3pqLMXU5SZnNWgZUYkQI'\n\nconst supabase = createClient(supabaseUrl, supabaseKey)\n\nasync function checkDatabase() {\n  console.log('=' .repeat(60))\n  console.log('üîç Ë≥áÊñôÂ∫´ÁãÄÊÖãÊ™¢Êü•Â†±Âëä')\n  console.log('='.repeat(60))\n  console.log()\n\n  // 1. Ê™¢Êü• employees Ë°®Ê†º\n  console.log('üìã 1. employees Ë°®Ê†ºÊ™¢Êü•')\n  console.log('-'.repeat(60))\n\n  const { data: employees, error: empError } = await supabase\n    .from('employees')\n    .select('id, roles, permissions, preferred_features, workspace_id')\n    .limit(3)\n\n  if (empError) {\n    console.error('‚ùå ÈåØË™§:', empError.message)\n  } else {\n    console.log('‚úÖ Ë°®Ê†ºÂ≠òÂú®ÔºåÂÖ±', employees.length, 'Á≠ÜÊ∏¨Ë©¶Ë≥áÊñô')\n\n    if (employees.length > 0) {\n      const emp = employees[0]\n      console.log('\\nÊ¨Ñ‰ΩçÈ©óË≠â:')\n      console.log('  - id:', emp.id ? '‚úÖ' : '‚ùå')\n      console.log('  - roles:', emp.roles ? '‚úÖ (type: ' + typeof emp.roles + ')' : '‚ùå')\n      console.log('  - permissions:', emp.permissions ? '‚úÖ (type: ' + typeof emp.permissions + ')' : '‚ùå')\n      console.log('  - preferred_features:', emp.preferred_features !== undefined ? '‚úÖ (type: ' + typeof emp.preferred_features + ')' : '‚ùå')\n      console.log('  - workspace_id:', emp.workspace_id ? '‚úÖ' : '‚ùå')\n\n      console.log('\\nÁØÑ‰æãË≥áÊñô:')\n      employees.forEach((e, i) => {\n        console.log(`\\n  Âì°Â∑• ${i + 1}:`)\n        console.log('    - roles:', JSON.stringify(e.roles))\n        console.log('    - permissions:', JSON.stringify(e.permissions).substring(0, 80) + '...')\n        console.log('    - preferred_features:', JSON.stringify(e.preferred_features))\n      })\n    }\n  }\n\n  // 2. Áµ±Ë®à preferred_features Ë®≠ÂÆöÁãÄÊ≥Å\n  console.log('\\n\\nüìä 2. preferred_features Ë®≠ÂÆöÁµ±Ë®à')\n  console.log('-'.repeat(60))\n\n  const { data: withPref, error: prefError } = await supabase\n    .from('employees')\n    .select('id, preferred_features')\n    .not('preferred_features', 'is', null)\n\n  if (!prefError) {\n    console.log('‚úÖ Â∑≤Ë®≠ÂÆö preferred_features ÁöÑÂì°Â∑•Êï∏:', withPref.length)\n\n    // Áµ±Ë®àÊØèÂÄãÂì°Â∑•ÈÅ∏ÊìáÁöÑÂäüËÉΩÊï∏Èáè\n    const stats = withPref.map(e => {\n      const features = Array.isArray(e.preferred_features) ? e.preferred_features : []\n      return features.length\n    })\n\n    if (stats.length > 0) {\n      const avg = stats.reduce((a, b) => a + b, 0) / stats.length\n      console.log('Âπ≥ÂùáÈÅ∏ÊìáÂäüËÉΩÊï∏:', avg.toFixed(1))\n      console.log('ÊúÄÂ§ö:', Math.max(...stats), 'ÂÄã')\n      console.log('ÊúÄÂ∞ë:', Math.min(...stats), 'ÂÄã')\n    }\n  }\n\n  // 3. Ê™¢Êü• roles ÂûãÂà•\n  console.log('\\n\\nüë• 3. roles ÂûãÂà•Ê™¢Êü•')\n  console.log('-'.repeat(60))\n\n  const { data: rolesData } = await supabase\n    .from('employees')\n    .select('roles')\n    .not('roles', 'is', null)\n    .limit(5)\n\n  if (rolesData && rolesData.length > 0) {\n    const roleCounts = {}\n    rolesData.forEach(e => {\n      if (Array.isArray(e.roles)) {\n        e.roles.forEach(role => {\n          roleCounts[role] = (roleCounts[role] || 0) + 1\n        })\n      }\n    })\n\n    console.log('ËßíËâ≤ÂàÜÂ∏É:')\n    Object.entries(roleCounts).forEach(([role, count]) => {\n      console.log(`  - ${role}: ${count}`)\n    })\n  }\n\n  console.log('\\n' + '='.repeat(60))\n  console.log('‚úÖ Ê™¢Êü•ÂÆåÊàê')\n  console.log('='.repeat(60))\n}\n\ncheckDatabase()\n  .then(() => process.exit(0))\n  .catch(err => {\n    console.error('\\n‚ùå Ê™¢Êü•Â§±Êïó:', err.message)\n    process.exit(1)\n  })\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/check-employees.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":58}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { createClient } = require('@supabase/supabase-js');\n\nconst supabase = createClient(\n  'https://pfqvdacxowpgfamuvnsn.supabase.co',\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmcXZkYWN4b3dwZ2ZhbXV2bnNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMDgzMjAsImV4cCI6MjA3NDY4NDMyMH0.LIMG0qmHixTPcbdzJrh4h0yTp8mh3FlggeZ6Bi_NwtI'\n);\n\nasync function main() {\n  console.log('=== Ê™¢Êü• messages Ë°®ÁµêÊßã ===');\n  const { data: messages, error: msgError } = await supabase\n    .from('messages')\n    .select('*')\n    .limit(1);\n\n  if (msgError) {\n    console.error('Error:', msgError);\n  } else if (messages && messages.length > 0) {\n    console.log('Messages Ë°®Ê¨Ñ‰Ωç:');\n    Object.keys(messages[0]).forEach(key => {\n      console.log('  - ' + key);\n    });\n  } else {\n    console.log('Messages Ë°®ÊòØÁ©∫ÁöÑÔºåÂòóË©¶ÂèñÂæóÁµêÊßã...');\n  }\n}\n\nmain();\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/check-rls-status.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":58}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { createClient } = require('@supabase/supabase-js')\n\nconst supabaseUrl = 'https://pfqvdacxowpgfamuvnsn.supabase.co'\nconst supabaseServiceKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmcXZkYWN4b3dwZ2ZhbXV2bnNuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTEwODMyMCwiZXhwIjoyMDc0Njg0MzIwfQ.kbJbdYHtOWudBGzV3Jv5OWzWQQZT4aBFFgfUczaVdIE'\n\nasync function checkRLS() {\n  const supabase = createClient(supabaseUrl, supabaseServiceKey, {\n    db: { schema: 'public' }\n  })\n\n  console.log('üîç Ê™¢Êü• todos Ë≥áÊñôË°®ÁãÄÊÖã...\\n')\n\n  try {\n    // ÂòóË©¶Êü•Ë©¢ todos Ë°®\n    const { data, error } = await supabase\n      .from('todos')\n      .select('*')\n      .limit(1)\n\n    if (error) {\n      console.error('‚ùå Êü•Ë©¢ÈåØË™§:', error.message)\n      console.error('ÂÆåÊï¥ÈåØË™§:', JSON.stringify(error, null, 2))\n\n      if (error.message.includes('updated_by')) {\n        console.log('\\n‚ö†Ô∏è Á¢∫Ë™çÂïèÈ°åÔºöupdated_by Ê¨Ñ‰Ωç‰∏çÂ≠òÂú®')\n        console.log('\\nÈúÄË¶ÅÊâãÂãïÂü∑Ë°å‰ª•‰∏ã SQL:')\n        console.log('ÂâçÂæÄ: https://supabase.com/dashboard/project/pfqvdacxowpgfamuvnsn/sql/new')\n        console.log('\\nBEGIN;')\n        console.log('ALTER TABLE public.todos')\n        console.log('ADD COLUMN IF NOT EXISTS updated_by uuid REFERENCES auth.users(id);')\n        console.log('\\nCOMMENT ON COLUMN public.todos.updated_by IS \\'Last user who updated this todo\\';')\n        console.log('\\nUPDATE public.todos')\n        console.log('SET updated_by = created_by')\n        console.log('WHERE updated_by IS NULL;')\n        console.log('COMMIT;')\n      }\n    } else {\n      console.log('‚úÖ todos Ë≥áÊñôË°®ÂèØÊ≠£Â∏∏Êü•Ë©¢')\n      console.log(`üìä Ë≥áÊñôÁ≠ÜÊï∏: ${data ? data.length : 0}`)\n      if (data && data.length > 0) {\n        console.log('Ê¨Ñ‰Ωç:', Object.keys(data[0]).join(', '))\n        if ('updated_by' in data[0]) {\n          console.log('‚úÖ updated_by Ê¨Ñ‰ΩçÂ∑≤Â≠òÂú®')\n        } else {\n          console.log('‚ùå updated_by Ê¨Ñ‰Ωç‰∏çÂ≠òÂú®')\n        }\n      }\n    }\n  } catch (err) {\n    console.error('‚ùå Âü∑Ë°åÈåØË™§:', err.message)\n  }\n}\n\ncheckRLS()\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/execute-audit-fields.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":31},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":3,"column":12,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":3,"endColumn":25}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\nconst https = require('https')\nconst fs = require('fs')\n\nconst SUPABASE_ACCESS_TOKEN = 'sbp_94746ae5e9ecc9d270d27006ba5ed1d0da0bbaf0'\nconst PROJECT_REF = 'pfqvdacxowpgfamuvnsn'\n\n// Read the migration file\nconst SQL = fs.readFileSync('./supabase/migrations/20251119090000_fix_missing_audit_fields.sql', 'utf8')\n\nasync function executeSQL() {\n  console.log('üîÑ Ê≠£Âú®Âü∑Ë°å SQL...\\n')\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      hostname: 'api.supabase.com',\n      port: 443,\n      path: `/v1/projects/${PROJECT_REF}/database/query`,\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${SUPABASE_ACCESS_TOKEN}`,\n        'Content-Type': 'application/json'\n      }\n    }\n\n    const postData = JSON.stringify({ query: SQL })\n\n    const req = https.request(options, (res) => {\n      let data = ''\n\n      res.on('data', (chunk) => {\n        data += chunk\n      })\n\n      res.on('end', () => {\n        console.log('ÁãÄÊÖãÁ¢º:', res.statusCode)\n\n        if (res.statusCode === 200 || res.statusCode === 201) {\n          console.log('‚úÖ SQL Âü∑Ë°åÊàêÂäüÔºÅ')\n          console.log('ÂõûÊáâ:', data)\n          console.log('\\nüéâ Migration ÂÆåÊàêÔºÅ')\n          resolve()\n        } else {\n          console.error('‚ùå SQL Âü∑Ë°åÂ§±Êïó')\n          console.error('ÁãÄÊÖãÁ¢º:', res.statusCode)\n          console.error('ÈåØË™§:', data)\n          reject(new Error(`HTTP ${res.statusCode}: ${data}`))\n        }\n      })\n    })\n\n    req.on('error', (error) => {\n      console.error('‚ùå Ë´ãÊ±ÇÈåØË™§:', error)\n      reject(error)\n    })\n\n    req.write(postData)\n    req.end()\n  })\n}\n\nexecuteSQL().catch(error => {\n  console.error('Âü∑Ë°åÂ§±Êïó:', error.message)\n  process.exit(1)\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/execute-rls.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const https = require('https')\n\nconst SUPABASE_ACCESS_TOKEN = 'sbp_94746ae5e9ecc9d270d27006ba5ed1d0da0bbaf0'\nconst PROJECT_REF = 'pfqvdacxowpgfamuvnsn'\n\nconst SQL = `\nBEGIN;\n\nALTER TABLE public.todos\nADD COLUMN IF NOT EXISTS updated_by uuid REFERENCES auth.users(id);\n\nCOMMENT ON COLUMN public.todos.updated_by IS 'Last user who updated this todo';\n\nUPDATE public.todos\nSET updated_by = created_by\nWHERE updated_by IS NULL;\n\nCOMMIT;\n`\n\nasync function executeSQL() {\n  console.log('üîÑ Ê≠£Âú®Âü∑Ë°å SQL...\\n')\n\n  const options = {\n    hostname: 'api.supabase.com',\n    port: 443,\n    path: `/v1/projects/${PROJECT_REF}/database/query`,\n    method: 'POST',\n    headers: {\n      'Authorization': `Bearer ${SUPABASE_ACCESS_TOKEN}`,\n      'Content-Type': 'application/json'\n    }\n  }\n\n  const postData = JSON.stringify({ query: SQL })\n\n  return new Promise((resolve, reject) => {\n    const req = https.request(options, (res) => {\n      let data = ''\n\n      res.on('data', (chunk) => {\n        data += chunk\n      })\n\n      res.on('end', () => {\n        console.log('ÁãÄÊÖãÁ¢º:', res.statusCode)\n\n        if (res.statusCode === 200 || res.statusCode === 201) {\n          console.log('‚úÖ SQL Âü∑Ë°åÊàêÂäüÔºÅ')\n          console.log('ÂõûÊáâ:', data)\n          resolve(data)\n        } else {\n          console.error('‚ùå SQL Âü∑Ë°åÂ§±Êïó')\n          console.error('ÂõûÊáâ:', data)\n\n          if (res.statusCode === 404) {\n            console.log('\\n‚ö†Ô∏è Management API Á´ØÈªû‰∏çÂ≠òÂú®ÔºåË´ãÊâãÂãïÂü∑Ë°å:')\n            console.log('ÂâçÂæÄ: https://supabase.com/dashboard/project/pfqvdacxowpgfamuvnsn/sql/new')\n            console.log('\\nÂü∑Ë°å‰ª•‰∏ã SQL:\\n')\n            console.log(SQL)\n          } else if (res.statusCode === 401 || res.statusCode === 403) {\n            console.log('\\n‚ö†Ô∏è Ë™çË≠âÂ§±ÊïóÔºåAccess Token ÂèØËÉΩÂ∑≤ÈÅéÊúü')\n            console.log('Ë´ãÂâçÂæÄ: https://supabase.com/dashboard/account/tokens')\n            console.log('Áî¢ÁîüÊñ∞ÁöÑ Personal Access Token ‰∏¶Êõ¥Êñ∞ CLAUDE.md')\n          }\n\n          reject(new Error(`HTTP ${res.statusCode}: ${data}`))\n        }\n      })\n    })\n\n    req.on('error', (error) => {\n      console.error('‚ùå Ë´ãÊ±ÇÈåØË™§:', error.message)\n      console.log('\\n‚ö†Ô∏è Á∂≤Ë∑ØÈÄ£Á∑öÂ§±ÊïóÔºåË´ãÊâãÂãïÂü∑Ë°å:')\n      console.log('ÂâçÂæÄ: https://supabase.com/dashboard/project/pfqvdacxowpgfamuvnsn/sql/new')\n      console.log('\\nÂü∑Ë°å‰ª•‰∏ã SQL:\\n')\n      console.log(SQL)\n      reject(error)\n    })\n\n    req.write(postData)\n    req.end()\n  })\n}\n\nexecuteSQL()\n  .then(() => {\n    console.log('\\nüéâ Migration ÂÆåÊàêÔºÅ')\n    console.log('Ë´ãÂü∑Ë°å node check-rls-status.js È©óË≠âÁµêÊûú')\n    process.exit(0)\n  })\n  .catch((error) => {\n    console.error('\\n‚ùå Âü∑Ë°åÂ§±Êïó:', error.message)\n    process.exit(1)\n  })\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/fill-workspace-data.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\n/**\n * Â°´ÂÖÖ workspace Ë≥áÊñôÂ∑•ÂÖ∑\n * ‰øÆÂæ©Â∑≤Á∂ìÂü∑Ë°åÈÅé‰ΩÜÊú™Ë®òÈåÑÁöÑ migration\n */\n\nconst https = require('https')\n\nconst SUPABASE_ACCESS_TOKEN = 'sbp_94746ae5e9ecc9d270d27006ba5ed1d0da0bbaf0'\nconst PROJECT_REF = 'pfqvdacxowpgfamuvnsn'\n\nasync function executeSQL(sql, description = 'SQL') {\n  return new Promise((resolve, reject) => {\n    const options = {\n      hostname: 'api.supabase.com',\n      port: 443,\n      path: `/v1/projects/${PROJECT_REF}/database/query`,\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${SUPABASE_ACCESS_TOKEN}`,\n        'Content-Type': 'application/json'\n      }\n    }\n\n    const postData = JSON.stringify({ query: sql })\n\n    const req = https.request(options, (res) => {\n      let data = ''\n      res.on('data', (chunk) => { data += chunk })\n      res.on('end', () => {\n        if (res.statusCode === 200 || res.statusCode === 201) {\n          console.log(`‚úÖ ${description}`)\n          resolve({ success: true, data })\n        } else {\n          reject(new Error(`HTTP ${res.statusCode}: ${data}`))\n        }\n      })\n    })\n\n    req.on('error', reject)\n    req.write(postData)\n    req.end()\n  })\n}\n\nasync function main() {\n  console.log('üîÑ Â°´ÂÖÖ _migrations Ë®òÈåÑ...\\n')\n\n  const migrations = [\n    '20251119085637_add_updated_by_to_todos.sql'\n  ]\n\n  for (const migration of migrations) {\n    try {\n      await executeSQL(\n        `INSERT INTO public._migrations (name) VALUES ('${migration}') ON CONFLICT (name) DO NOTHING;`,\n        `Ë®òÈåÑ: ${migration}`\n      )\n    } catch (error) {\n      console.error(`‚ùå ${migration}:`, error.message)\n    }\n  }\n\n  console.log('\\n‚úÖ ÂÆåÊàêÔºÅ')\n}\n\nmain().catch(console.error)\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/fix-messages-direct.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":7,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":7,"endColumn":58}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Áõ¥Êé•‰øÆÂæ© tours Ë°®Ê†º - Êñ∞Â¢û created_by Âíå updated_by Ê¨Ñ‰Ωç\n *\n * Âü∑Ë°åÊñπÂºèÔºönode fix-messages-direct.js\n */\n\nconst { createClient } = require('@supabase/supabase-js');\n\nconst supabaseUrl = 'https://pfqvdacxowpgfamuvnsn.supabase.co';\nconst serviceRoleKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmcXZkYWN4b3dwZ2ZhbXV2bnNuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTEwODMyMCwiZXhwIjoyMDc0Njg0MzIwfQ.kbJbdYHtOWudBGzV3Jv5OWzWQQZT4aBFFgfUczaVdIE';\n\nconst supabase = createClient(supabaseUrl, serviceRoleKey);\n\nasync function executeSQL(description, sql) {\n  console.log(`\\nüî® ${description}...`);\n  const { data, error } = await supabase.rpc('exec_sql', { sql });\n\n  if (error) {\n    console.log(`   ‚ùå Â§±Êïó:`, error.message);\n    return false;\n  } else {\n    console.log(`   ‚úÖ ÊàêÂäü`);\n    return true;\n  }\n}\n\nasync function main() {\n  console.log('üöÄ ÈñãÂßã‰øÆÂæ© tours Ë°®Ê†º...\\n');\n\n  // Step 1: Add created_by column\n  await executeSQL(\n    'Êñ∞Â¢û created_by Ê¨Ñ‰Ωç',\n    `ALTER TABLE public.tours ADD COLUMN IF NOT EXISTS created_by uuid REFERENCES public.employees(id);`\n  );\n\n  // Step 2: Add updated_by column\n  await executeSQL(\n    'Êñ∞Â¢û updated_by Ê¨Ñ‰Ωç',\n    `ALTER TABLE public.tours ADD COLUMN IF NOT EXISTS updated_by uuid REFERENCES public.employees(id);`\n  );\n\n  // Step 3: Add comments\n  await executeSQL(\n    'Êñ∞Â¢û created_by Ë®ªËß£',\n    `COMMENT ON COLUMN public.tours.created_by IS 'Âª∫Á´ãËÄÖ (Âì°Â∑• ID)';`\n  );\n\n  await executeSQL(\n    'Êñ∞Â¢û updated_by Ë®ªËß£',\n    `COMMENT ON COLUMN public.tours.updated_by IS 'ÊúÄÂæåÊõ¥Êñ∞ËÄÖ (Âì°Â∑• ID)';`\n  );\n\n  console.log('\\n‚úÖ ‰øÆÂæ©ÂÆåÊàêÔºÅ');\n  console.log('\\nüí° Êé•‰∏ã‰æÜÔºö');\n  console.log('   1. ÈáçÊñ∞Êï¥ÁêÜÁÄèË¶ΩÂô®');\n  console.log('   2. ÂÜçÊ¨°Âª∫Á´ãÂúòÈ´îÊ∏¨Ë©¶');\n  console.log('   3. Ê™¢Êü•ÊòØÂê¶ËÉΩÊàêÂäüÂêåÊ≠•Âà∞ Supabase\\n');\n}\n\nmain().catch((error) => {\n  console.error('‚ùå Âü∑Ë°åÂ§±Êïó:', error);\n  process.exit(1);\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/fix-payment-requests.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":2,"column":15,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":2,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env node\nconst https = require('https')\n\nconst SUPABASE_ACCESS_TOKEN = 'sbp_94746ae5e9ecc9d270d27006ba5ed1d0da0bbaf0'\nconst PROJECT_REF = 'pfqvdacxowpgfamuvnsn'\n\nconst SQL = `\nBEGIN;\n\n-- payment_requests Ë°®Ê†ºÔºöÊñ∞Â¢û updated_by\nALTER TABLE public.payment_requests\nADD COLUMN IF NOT EXISTS updated_by uuid REFERENCES auth.users(id);\n\nCOMMENT ON COLUMN public.payment_requests.updated_by IS 'Last user who updated this payment request';\n\nUPDATE public.payment_requests\nSET updated_by = created_by\nWHERE updated_by IS NULL;\n\nCOMMIT;\n`\n\nasync function executeSQL() {\n  console.log('üîÑ Ê≠£Âú®Âü∑Ë°å payment_requests migration...\\n')\n\n  return new Promise((resolve, reject) => {\n    const options = {\n      hostname: 'api.supabase.com',\n      port: 443,\n      path: `/v1/projects/${PROJECT_REF}/database/query`,\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${SUPABASE_ACCESS_TOKEN}`,\n        'Content-Type': 'application/json'\n      }\n    }\n\n    const postData = JSON.stringify({ query: SQL })\n\n    const req = https.request(options, (res) => {\n      let data = ''\n\n      res.on('data', (chunk) => {\n        data += chunk\n      })\n\n      res.on('end', () => {\n        console.log('ÁãÄÊÖãÁ¢º:', res.statusCode)\n\n        if (res.statusCode === 200 || res.statusCode === 201) {\n          console.log('‚úÖ updated_by Ê¨Ñ‰ΩçÊñ∞Â¢ûÊàêÂäüÔºÅ')\n          console.log('\\nüéâ payment_requests Ë°®Ê†ºÂ∑≤‰øÆÂæ©ÔºÅ')\n          resolve()\n        } else {\n          console.error('‚ùå SQL Âü∑Ë°åÂ§±Êïó')\n          console.error('ÈåØË™§:', data)\n          reject(new Error(`HTTP ${res.statusCode}: ${data}`))\n        }\n      })\n    })\n\n    req.on('error', (error) => {\n      console.error('‚ùå Ë´ãÊ±ÇÈåØË™§:', error)\n      reject(error)\n    })\n\n    req.write(postData)\n    req.end()\n  })\n}\n\nexecuteSQL().catch(error => {\n  console.error('Âü∑Ë°åÂ§±Êïó:', error.message)\n  process.exit(1)\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/next-env.d.ts","messages":[{"ruleId":"@typescript-eslint/triple-slash-reference","severity":2,"message":"Do not use a triple slash reference for ./.next/types/routes.d.ts, use `import` style instead.","line":3,"column":1,"nodeType":"Line","messageId":"tripleSlashReference","endLine":3,"endColumn":51}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\n/// <reference path=\"./.next/types/routes.d.ts\" />\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/accounting/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/accounting/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/api/auth/sync-password/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/api/health/detailed/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/api/health/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/api/itineraries/[id]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/api/linkpay/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/api/log-error/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/api/workspaces/[workspaceId]/channels/[channelId]/members/route.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":22,"column":5,"severity":1,"nodeType":null,"fix":{"range":[567,629],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":124,"column":5,"severity":1,"nodeType":null,"fix":{"range":[3868,3930],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":154,"column":5,"severity":1,"nodeType":null,"fix":{"range":[4904,4966],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"import { logger } from '@/lib/utils/logger'\nimport { NextResponse } from 'next/server'\nimport { getSupabaseAdminClient } from '@/lib/supabase/admin'\n\ntype RouteParams = {\n  params: Promise<{\n    workspaceId: string\n    channelId: string\n  }>\n}\n\nexport async function GET(_request: Request, { params }: RouteParams) {\n  const { workspaceId, channelId } = await params\n\n  if (!workspaceId || !channelId) {\n    return NextResponse.json({ error: 'workspaceId and channelId are required' }, { status: 400 })\n  }\n\n  try {\n    const supabase = getSupabaseAdminClient()\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const { data, error } = await (supabase.from as any)('channel_members')\n      .select(\n        `\n          id,\n          workspace_id,\n          channel_id,\n          employee_id,\n          role,\n          status,\n          created_at,\n          updated_at,\n          employees:employee_id (\n            id,\n            display_name,\n            english_name,\n            email,\n            avatar,\n            status\n          )\n        `\n      )\n      .eq('workspace_id', workspaceId)\n      .eq('channel_id', channelId)\n      .order('created_at', { ascending: true })\n\n    if (error) {\n      logger.error('Failed to load channel members:', error)\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    const members = (data || []).map((member: any) => ({\n      id: member.id as string,\n      workspaceId: member.workspace_id as string,\n      channelId: member.channel_id as string,\n      employeeId: member.employee_id as string,\n      role: member.role as string,\n      status: member.status as string,\n      invitedAt: null as string | null,\n      joinedAt: member.created_at as string | null,\n      lastSeenAt: member.updated_at as string | null,\n      profile: member.employees\n        ? {\n            id: member.employees.id as string,\n            displayName: member.employees.display_name as string,\n            englishName: member.employees.english_name as string | null,\n            email: member.employees.email as string | null,\n            avatar: member.employees.avatar as string | null,\n            status: member.employees.status as string | null,\n          }\n        : null,\n    }))\n\n    return NextResponse.json({ members })\n  } catch (error) {\n    return NextResponse.json({ error: 'Failed to load channel members' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: Request, { params }: RouteParams) {\n  const { workspaceId, channelId } = await params\n\n  if (!workspaceId || !channelId) {\n    return NextResponse.json({ error: 'workspaceId and channelId are required' }, { status: 400 })\n  }\n\n  const body = await request.json().catch(() => ({}))\n  const { employeeIds, role = 'member' } = body\n\n  if (!employeeIds || !Array.isArray(employeeIds) || employeeIds.length === 0) {\n    return NextResponse.json({ error: 'employeeIds array is required' }, { status: 400 })\n  }\n\n  try {\n    const supabase = getSupabaseAdminClient()\n\n    // Ê∫ñÂÇôÊâπÊ¨°ÊèíÂÖ•ÁöÑË≥áÊñôÔºà‰ΩøÁî® upsert Èò≤Ê≠¢ÈáçË§áÔºâ\n    const membersToInsert = employeeIds.map(employeeId => ({\n      workspace_id: workspaceId,\n      channel_id: channelId,\n      employee_id: employeeId,\n      role,\n      status: 'active',\n    }))\n\n    // üî• ÂÖàÊ™¢Êü•ÊòØÂê¶Â∑≤Â≠òÂú®ÔºåÈÅøÂÖç upsert Ë°ùÁ™Å\n    const { data: existingMembers } = await supabase\n      .from('channel_members')\n      .select('employee_id')\n      .eq('workspace_id', workspaceId)\n      .eq('channel_id', channelId)\n      .in('employee_id', employeeIds)\n\n    const existingEmployeeIds = new Set((existingMembers || []).map(m => m.employee_id))\n    const newMembers = membersToInsert.filter(m => !existingEmployeeIds.has(m.employee_id))\n\n    if (newMembers.length === 0) {\n      // ÂÖ®ÈÉ®ÈÉΩÂ∑≤Â≠òÂú®\n      return NextResponse.json({ members: [], count: 0, message: 'All members already exist' })\n    }\n\n    // Âè™ÊèíÂÖ•Êñ∞ÊàêÂì°\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const { data, error } = await (supabase.from as any)('channel_members').insert(newMembers).select()\n\n    if (error) {\n      logger.error('Failed to add channel members:', error)\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    return NextResponse.json({ members: data || [], count: data?.length || 0 })\n  } catch (error) {\n    return NextResponse.json({ error: 'Failed to add channel members' }, { status: 500 })\n  }\n}\n\nexport async function DELETE(request: Request, { params }: RouteParams) {\n  const { workspaceId, channelId } = await params\n\n  if (!workspaceId || !channelId) {\n    return NextResponse.json({ error: 'workspaceId and channelId are required' }, { status: 400 })\n  }\n\n  const { memberId } = await request.json().catch(() => ({ memberId: undefined }))\n\n  if (!memberId) {\n    return NextResponse.json({ error: 'memberId is required' }, { status: 400 })\n  }\n\n  try {\n    const supabase = getSupabaseAdminClient()\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const { error } = await (supabase.from as any)('channel_members')\n      .delete()\n      .eq('workspace_id', workspaceId)\n      .eq('channel_id', channelId)\n      .eq('id', memberId)\n\n    if (error) {\n      logger.error('Failed to remove channel member:', error)\n      return NextResponse.json({ error: error.message }, { status: 500 })\n    }\n\n    return NextResponse.json({ success: true })\n  } catch (error) {\n    return NextResponse.json({ error: 'Failed to remove channel member' }, { status: 500 })\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/calendar/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/components/AccommodationForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/components/AccommodationPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/components/EditorContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/components/FlightForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/components/FlightPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/components/ImportPNRDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/components/PreviewContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/components/PrintableConfirmation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/confirmations/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/contracts/[id]/create/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/contracts/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/contracts/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/customers/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/customers/[id]/tabs/BasicInfoTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/customers/[id]/tabs/GroupHistoryTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/customers/companies/components/CompanyFormDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/customers/companies/components/CompanyTableColumns.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/customers/companies/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/customers/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/database/attractions/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/database/company-assets/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/database/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/database/regions/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/database/suppliers/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/database/transportation-rates/page.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":30,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1374,1436],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport { logger } from '@/lib/utils/logger'\nimport { useState, useEffect } from 'react'\nimport { Bus, Plus } from 'lucide-react'\nimport { ResponsiveHeader } from '@/components/layout/responsive-header'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { CountryList } from '@/features/transportation-rates/components/CountryList'\nimport { RatesDetailDialog } from '@/features/transportation-rates/components/RatesDetailDialog'\nimport { supabase } from '@/lib/supabase/client'\nimport { TransportationRate } from '@/types/transportation-rates.types'\nimport { toast } from 'sonner'\nimport { useAuthStore } from '@/stores/auth-store'\n\nexport default function TransportationRatesPage() {\n  const { user } = useAuthStore()\n  const [rates, setRates] = useState<TransportationRate[]>([])\n  const [loading, setLoading] = useState(true)\n  const [selectedCountry, setSelectedCountry] = useState<string | null>(null)\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\n  const [isEditMode, setIsEditMode] = useState(false)\n  const [isAddingNewCountry, setIsAddingNewCountry] = useState(false)\n  const [newCountryName, setNewCountryName] = useState('')\n\n  // ËºâÂÖ•ËªäË≥áË≥áÊñô\n  const fetchRates = async () => {\n    setLoading(true)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const { data, error } = await (supabase.from as any)('transportation_rates')\n      .select('*')\n      .order('category')\n      .order('supplier')\n      .order('route')\n\n    if (error) {\n      logger.error('Error fetching rates:', error)\n      toast.error('ËºâÂÖ•ËªäË≥áË≥áÊñôÂ§±Êïó')\n      setLoading(false)\n      return\n    }\n\n    if (data) setRates(data)\n    setLoading(false)\n  }\n\n  useEffect(() => {\n    fetchRates()\n  }, [])\n\n  // ÊâìÈñãÂúãÂÆ∂Ë©≥Á¥∞Ë°®Ê†º\n  const handleOpenCountry = (countryName: string, editMode: boolean) => {\n    setSelectedCountry(countryName)\n    setIsEditMode(editMode)\n    setIsDialogOpen(true)\n  }\n\n  // Êñ∞Â¢ûÂúãÂÆ∂\n  const handleAddNewCountry = () => {\n    if (!newCountryName.trim()) {\n      toast.error('Ë´ãËº∏ÂÖ•ÂúãÂÆ∂ÂêçÁ®±')\n      return\n    }\n\n    // Ê™¢Êü•ÂúãÂÆ∂ÊòØÂê¶Â∑≤Â≠òÂú®\n    if (rates.some(rate => rate.country_name === newCountryName.trim())) {\n      toast.error('Ê≠§ÂúãÂÆ∂Â∑≤Â≠òÂú®')\n      return\n    }\n\n    setSelectedCountry(newCountryName.trim())\n    setIsEditMode(true)\n    setIsAddingNewCountry(false)\n    setIsDialogOpen(true)\n    setNewCountryName('')\n  }\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <ResponsiveHeader\n        title=\"ËªäË≥áÁÆ°ÁêÜ\"\n        icon={Bus}\n        breadcrumb={[\n          { label: 'È¶ñÈ†Å', href: '/' },\n          { label: 'Ë≥áÊñôÂ∫´ÁÆ°ÁêÜ', href: '/database' },\n          { label: 'ËªäË≥áÁÆ°ÁêÜ', href: '/database/transportation-rates' },\n        ]}\n        actions={\n          <Button\n            onClick={() => setIsAddingNewCountry(true)}\n            className=\"gap-2\"\n            size=\"sm\"\n          >\n            <Plus size={16} />\n            Êñ∞Â¢ûÂúãÂÆ∂\n          </Button>\n        }\n      />\n\n      <div className=\"flex-1 overflow-auto\">\n        <CountryList rates={rates} loading={loading} onOpenCountry={handleOpenCountry} />\n      </div>\n\n      {/* Êñ∞Â¢ûÂúãÂÆ∂ Dialog */}\n      <Dialog open={isAddingNewCountry} onOpenChange={setIsAddingNewCountry}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Êñ∞Â¢ûÂúãÂÆ∂</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <label className=\"text-sm font-medium text-morandi-primary mb-2 block\">\n                ÂúãÂÆ∂ÂêçÁ®±\n              </label>\n              <Input\n                placeholder=\"‰æãÂ¶ÇÔºöË∂äÂçó„ÄÅÊ≥∞Âúã\"\n                value={newCountryName}\n                onChange={(e) => setNewCountryName(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    handleAddNewCountry()\n                  }\n                }}\n                autoFocus\n              />\n            </div>\n            <div className=\"flex justify-end gap-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setIsAddingNewCountry(false)\n                  setNewCountryName('')\n                }}\n              >\n                ÂèñÊ∂à\n              </Button>\n              <Button onClick={handleAddNewCountry}>\n                Á¢∫Ë™ç\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Â§ßÂûãÊá∏ÊµÆË¶ñÁ™ó - È°ØÁ§∫Ë©≤ÂúãËªäË≥áË©≥Á¥∞Ë°®Ê†º */}\n      {selectedCountry && (\n        <RatesDetailDialog\n          isOpen={isDialogOpen}\n          onClose={() => setIsDialogOpen(false)}\n          countryName={selectedCountry}\n          rates={rates.filter(rate => rate.country_name === selectedCountry)}\n          onUpdate={fetchRates}\n          isEditMode={isEditMode}\n        />\n      )}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/esims/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/components/BatchCreateReceiptDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/components/CreateLinkPayDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/components/CreateReceiptDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/components/EditReceiptDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/components/LinkPayLogsTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/components/PaymentItemForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/components/ReceiptSearchDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/hooks/usePaymentData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/payments/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/reports/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/requests/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/travel-invoice/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/travel-invoice/create/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/travel-invoice/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/treasury/disbursement/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/treasury/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/vouchers/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/vouchers/new/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/finance/vouchers/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/fitness/components/ExerciseIcons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/fitness/components/FitnessLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/fitness/history/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/fitness/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/fitness/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/fitness/settings/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/fitness/stats/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/global-error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/hr/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/itinerary/[slug]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/itinerary/new/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/itinerary/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/login/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/manifestation/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/manifestation/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/orders/[orderId]/documents/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/orders/[orderId]/members/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/orders/[orderId]/overview/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/orders/[orderId]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/orders/[orderId]/payment/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/orders/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/pnrs/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/quotes/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/quotes/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/reports/tour-closing/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/AccountSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/AppearanceSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/CompanyResourcesSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/ModuleManagementSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/OtherSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/PermissionManagementSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/PreferredFeaturesSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/SystemSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/WorkspaceSwitcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/components/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/hooks/useSettingsState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/menu/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/modules/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/permissions/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/settings/workspaces/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/box-dialogs/basic-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/box-dialogs/reminder-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/box-dialogs/workout-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/box-manager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/box-selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/day-time-grid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/day-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/review-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/scheduled-box-item.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/statistics-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/time-grid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/components/week-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/timebox/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/todos/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/tools/flight-itinerary/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/tools/hotel-voucher/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/tools/hotel-voucher/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/tools/reset-db/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/tours/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/tours/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/unauthorized/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/view/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/view/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/visas/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/app/workspace/page.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":29,"column":5,"severity":1,"nodeType":null,"fix":{"range":[885,940],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":44,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1357,1412],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"'use client'\n\nimport { logger } from '@/lib/utils/logger'\nimport { useEffect, useState } from 'react'\nimport { ResponsiveHeader } from '@/components/layout/responsive-header'\nimport { ChannelChat } from '@/components/workspace/ChannelChat'\nimport { useWorkspaceChannels } from '@/stores/workspace-store'\nimport { useRealtimeForChannels, useRealtimeForMessages } from '@/hooks/use-realtime-hooks'\n\nexport default function WorkspacePage() {\n  // ‚úÖ Realtime Ë®ÇÈñ±\n  useRealtimeForChannels()\n  useRealtimeForMessages()\n\n  const { loadWorkspaces, loadChannelGroups, loadChannels, currentWorkspace } =\n    useWorkspaceChannels()\n  const [hasLoaded, setHasLoaded] = useState(false)\n\n  // üî• Step 1: ËºâÂÖ• workspacesÔºàÂè™Âü∑Ë°å‰∏ÄÊ¨°Ôºâ\n  useEffect(() => {\n    if (hasLoaded) return\n\n    const init = async () => {\n      logger.log('üîµ [WorkspacePage] ËºâÂÖ•Â∑•‰ΩúÁ©∫Èñì')\n      await loadWorkspaces()\n    }\n\n    init()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // üî• Step 2: Áï∂ workspace ËºâÂÖ•ÂæåÔºåËºâÂÖ• channels Âíå groupsÔºàÂè™Âü∑Ë°å‰∏ÄÊ¨°Ôºâ\n  useEffect(() => {\n    if (hasLoaded || !currentWorkspace) return\n\n    const loadData = async () => {\n      logger.log('üîµ [WorkspacePage] ËºâÂÖ•È†ªÈÅìÂíåÁæ§ÁµÑ')\n      await Promise.all([loadChannelGroups(currentWorkspace.id), loadChannels(currentWorkspace.id)])\n      setHasLoaded(true)\n      logger.log('‚úÖ [WorkspacePage] ÂàùÂßãÂåñÂÆåÊàê')\n    }\n\n    loadData()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentWorkspace?.id])\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <ResponsiveHeader\n        title=\"Â∑•‰ΩúÁ©∫Èñì\"\n        breadcrumb={[\n          { label: 'È¶ñÈ†Å', href: '/' },\n          { label: 'Â∑•‰ΩúÁ©∫Èñì', href: '/workspace' },\n        ]}\n      />\n\n      <div className=\"flex-1 overflow-hidden\">\n        <ChannelChat />\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/AppInitializer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ErrorLogger.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-unreachable').","line":8,"column":5,"severity":1,"nodeType":null,"fix":{"range":[129,164],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport { useEffect } from 'react'\n\nexport function ErrorLogger() {\n  useEffect(() => {\n    // üî• Êö´ÊôÇÁ¶ÅÁî®‰ª•Êü•ÁúãÂÆåÊï¥ÈåØË™§Ë®äÊÅØ\n    /* eslint-disable no-unreachable */\n    return undefined\n\n    // ÊçïÁç≤Êú™ËôïÁêÜÁöÑÈåØË™§\n    const handleError = (event: ErrorEvent) => {\n      console.error('Global error:', event.error)\n      const errorData = {\n        message: event.message,\n        source: event.filename,\n        lineno: event.lineno,\n        colno: event.colno,\n        error: event.error?.stack || event.error?.toString(),\n        timestamp: new Date().toISOString(),\n        type: 'error',\n      }\n\n      // Â∞áÈåØË™§ÂØ´ÂÖ•Êñá‰ª∂Á≥ªÁµ±\n      fetch('/api/log-error', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(errorData),\n      }).catch(console.error)\n    }\n\n    // ÊçïÁç≤Êú™ËôïÁêÜÁöÑ Promise rejection\n    const handleRejection = (event: PromiseRejectionEvent) => {\n      console.error('Unhandled promise rejection:', event.reason)\n      const errorData = {\n        message: 'Unhandled Promise Rejection',\n        error: event.reason?.stack || event.reason?.toString() || String(event.reason),\n        timestamp: new Date().toISOString(),\n        type: 'unhandledRejection',\n      }\n\n      fetch('/api/log-error', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(errorData),\n      }).catch(console.error)\n    }\n\n    // ÊçïÁç≤ React Hydration ÈåØË™§\n    const originalConsoleError = console.error\n    let isLoggingError = false // Èò≤Ê≠¢ÁÑ°ÈôêÂæ™Áí∞ÁöÑÊ®ôË™å\n\n    console.error = function (...args) {\n      // Â¶ÇÊûúÊ≠£Âú®Ë®òÈåÑÈåØË™§ÔºåÁõ¥Êé•‰ΩøÁî®ÂéüÂßã console.error ‰∏¶ËøîÂõû\n      if (isLoggingError) {\n        originalConsoleError.apply(console, args)\n        return\n      }\n\n      // ÂÖàËº∏Âá∫Âà∞ÂéüÂßãÁöÑ console.error\n      try {\n        originalConsoleError.apply(console, args)\n      } catch (err) {\n        // Â¶ÇÊûúËº∏Âá∫Â§±ÊïóÔºåÈùúÈªòËôïÁêÜ\n      }\n\n      // ÈÅøÂÖçÂú® ErrorLogger ÂÖßÈÉ®ÂÜçÊ¨°Ëß∏ÁôºÈåØË™§Êó•Ë™å\n      try {\n        isLoggingError = true\n\n        const errorString = args\n          .map(arg => {\n            try {\n              return typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)\n            } catch {\n              return String(arg)\n            }\n          })\n          .join(' ')\n\n        if (\n          errorString.includes('Hydration') ||\n          errorString.includes('Text content does not match') ||\n          errorString.includes('did not match')\n        ) {\n          const errorData = {\n            message: 'Hydration Error',\n            error: errorString,\n            timestamp: new Date().toISOString(),\n            type: 'hydration',\n          }\n\n          fetch('/api/log-error', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(errorData),\n          }).catch(() => {\n            // ‰ΩøÁî®ÂéüÂßãÁöÑ console.errorÔºåÈÅøÂÖçÈÅûËø¥\n            originalConsoleError('Failed to log error to API')\n          })\n        }\n      } catch (err) {\n        // Â¶ÇÊûúÊó•Ë™åË®òÈåÑÊú¨Ë∫´Âá∫ÈåØÔºå‰ΩøÁî®ÂéüÂßãÁöÑ console.error\n        originalConsoleError('ErrorLogger internal error:', err)\n      } finally {\n        // ÈáçÁΩÆÊ®ôË™åÔºåÂÖÅË®±‰∏ãÊ¨°Ë®òÈåÑ\n        isLoggingError = false\n      }\n    }\n\n    window.addEventListener('error', handleError)\n    window.addEventListener('unhandledrejection', handleRejection)\n\n    return () => {\n      window.removeEventListener('error', handleError)\n      window.removeEventListener('unhandledrejection', handleRejection)\n      console.error = originalConsoleError\n    }\n    /* eslint-enable no-unreachable */\n  }, [])\n\n  return null\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/PermanentRealtimeSubscriptions.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":180,"column":5,"severity":1,"nodeType":null,"fix":{"range":[5146,5201],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/**\n * Ê∞∏‰πÖ Realtime Ë®ÇÈñ±ÁµÑ‰ª∂\n *\n * ÈÄô‰∫õË°®Ê†ºÈúÄË¶ÅÂú®Êï¥ÂÄãÊáâÁî®Á®ãÂºèÁîüÂëΩÈÄ±Êúü‰∏≠‰øùÊåÅË®ÇÈñ±Ôºö\n * - user_roles: ‰ΩøÁî®ËÄÖÊ¨äÈôêÔºàÁÆ°ÁêÜÂì°ËÆäÊõ¥Ê¨äÈôêÊôÇÁ´ãÂç≥ÁîüÊïàÔºâ\n * - workspaces: Â∑•‰ΩúÁ©∫ÈñìË®≠ÂÆö\n * - employees: Âì°Â∑•Ë≥áÊñôÔºàÂ∏∏Áî®Êñº‰∏ãÊãâÈÅ∏ÂñÆÔºâ\n *\n * ‚ö†Ô∏è Ê≥®ÊÑèÔºöÂè™ÊúâÂú®‰ΩøÁî®ËÄÖÂ∑≤ÁôªÂÖ•ÊôÇÊâçË®ÇÈñ±\n */\n\n'use client'\n\nimport { useEffect } from 'react'\nimport { useAuthStore } from '@/stores/auth-store'\nimport { useEmployeeStore } from '@/stores'\nimport { realtimeManager } from '@/lib/realtime/realtime-manager'\nimport { logger } from '@/lib/utils/logger'\nimport { useToast } from '@/components/ui/use-toast'\n\ninterface UserRole {\n  id: string\n  user_id: string\n  role: string\n  permissions: string[]\n  updated_at: string\n}\n\ninterface Workspace {\n  id: string\n  name: string\n  owner_id: string\n  updated_at: string\n}\n\ninterface Employee {\n  id: string\n  [key: string]: unknown\n}\n\nexport function PermanentRealtimeSubscriptions() {\n  const user = useAuthStore(state => state.user)\n  const { toast } = useToast()\n\n  useEffect(() => {\n    // Âè™ÊúâÂú®‰ΩøÁî®ËÄÖÂ∑≤ÁôªÂÖ•ÊôÇÊâçË®ÇÈñ±\n    if (!user) {\n      logger.log('‚è≠Ô∏è [PermanentRealtimeSubscriptions] ‰ΩøÁî®ËÄÖÊú™ÁôªÂÖ•ÔºåË∑≥ÈÅéË®ÇÈñ±')\n      return\n    }\n\n    logger.log('üîî [PermanentRealtimeSubscriptions] ÈñãÂßãÊ∞∏‰πÖË®ÇÈñ±...')\n\n    // 1. Ë®ÇÈñ±‰ΩøÁî®ËÄÖÊ¨äÈôêÔºàÊ∞∏‰πÖÔºâ\n    const userRoleSubscriptionId = `user-role-${user.id}`\n    realtimeManager.subscribe<UserRole>({\n      table: 'user_roles',\n      filter: `user_id=eq.${user.id}`,\n      subscriptionId: userRoleSubscriptionId,\n      handlers: {\n        onUpdate: newRole => {\n          logger.log('üîî [user_roles] Ê¨äÈôêÂ∑≤Êõ¥Êñ∞:', newRole)\n\n          // ÈÄöÁü•‰ΩøÁî®ËÄÖ\n          toast({\n            title: '‰Ω†ÁöÑÊ¨äÈôêÂ∑≤Êõ¥Êñ∞ÔºÅ',\n            description: 'Ë´ãÈáçÊñ∞Êï¥ÁêÜÈ†ÅÈù¢‰ª•Â•óÁî®Êñ∞Ê¨äÈôê„ÄÇ',\n          })\n\n          // 2 ÁßíÂæåËá™ÂãïÈáçÊñ∞Êï¥ÁêÜ\n          setTimeout(() => {\n            window.location.reload()\n          }, 2000)\n        },\n        onInsert: newRole => {\n          logger.log('üîî [user_roles] Êñ∞Â¢ûÊ¨äÈôê:', newRole)\n          toast({\n            title: '‰Ω†Â∑≤Áç≤ÂæóÊñ∞ÁöÑÊ¨äÈôêÔºÅ',\n          })\n        },\n        onDelete: oldRole => {\n          logger.log('üîî [user_roles] Ê¨äÈôêÂ∑≤ÁßªÈô§:', oldRole)\n          toast({\n            title: '‰Ω†ÁöÑÈÉ®ÂàÜÊ¨äÈôêÂ∑≤Ë¢´ÁßªÈô§',\n            variant: 'destructive',\n          })\n        },\n      },\n    })\n\n    // 2. Ë®ÇÈñ±Â∑•‰ΩúÁ©∫ÈñìÔºàÊ∞∏‰πÖÔºâ\n    const workspaceSubscriptionId = 'workspaces-permanent'\n    realtimeManager.subscribe<Workspace>({\n      table: 'workspaces',\n      subscriptionId: workspaceSubscriptionId,\n      handlers: {\n        onUpdate: workspace => {\n          logger.log('üîî [workspaces] Â∑•‰ΩúÁ©∫ÈñìÂ∑≤Êõ¥Êñ∞:', workspace.name)\n          toast({\n            title: 'Â∑•‰ΩúÁ©∫ÈñìÂ∑≤Êõ¥Êñ∞',\n            description: `Â∑•‰ΩúÁ©∫Èñì„Äå${workspace.name}„ÄçÂ∑≤Êõ¥Êñ∞`,\n          })\n        },\n        onInsert: workspace => {\n          logger.log('üîî [workspaces] Êñ∞Â¢ûÂ∑•‰ΩúÁ©∫Èñì:', workspace.name)\n          toast({\n            title: 'Êñ∞Â¢ûÂ∑•‰ΩúÁ©∫Èñì',\n            description: `Â∑•‰ΩúÁ©∫Èñì„Äå${workspace.name}„Äç`,\n          })\n        },\n        onDelete: workspace => {\n          logger.log('üîî [workspaces] Âà™Èô§Â∑•‰ΩúÁ©∫Èñì:', workspace.name)\n          toast({\n            title: 'Â∑•‰ΩúÁ©∫ÈñìÂ∑≤Âà™Èô§',\n            description: `Â∑•‰ΩúÁ©∫Èñì„Äå${workspace.name}„ÄçÂ∑≤Âà™Èô§`,\n            variant: 'destructive',\n          })\n        },\n      },\n    })\n\n    // 3. Ë®ÇÈñ±Âì°Â∑•Ë≥áÊñôÔºàÊ∞∏‰πÖÔºâ- Â∏∏Áî®Êñº‰∏ãÊãâÈÅ∏ÂñÆ\n    const employeeSubscriptionId = 'employees-permanent'\n    realtimeManager.subscribe({\n      table: 'employees',\n      subscriptionId: employeeSubscriptionId,\n      handlers: {\n        onInsert: async (employee: Employee) => {\n          logger.log('üîî [employees] Êñ∞Â¢ûÂì°Â∑•:', employee)\n\n          // Êõ¥Êñ∞ IndexedDB\n          const { IndexedDBAdapter } = await import('@/stores/adapters/indexeddb-adapter')\n          const indexedDB = new IndexedDBAdapter('employees')\n          await indexedDB.put(employee)\n\n          // Êõ¥Êñ∞ Zustand ÁãÄÊÖã\n          useEmployeeStore.setState(state => {\n            const exists = state.items.some(item => item.id === employee.id)\n            if (exists) return state\n            return {\n              items: [...state.items, employee],\n            }\n          })\n        },\n        onUpdate: async (employee: Employee) => {\n          logger.log('üîî [employees] Êõ¥Êñ∞Âì°Â∑•:', employee)\n\n          const { IndexedDBAdapter } = await import('@/stores/adapters/indexeddb-adapter')\n          const indexedDB = new IndexedDBAdapter('employees')\n          await indexedDB.put(employee)\n\n          useEmployeeStore.setState(state => ({\n            items: state.items.map(item => (item.id === employee.id ? employee : item)),\n          }))\n        },\n        onDelete: async (employee: Employee) => {\n          logger.log('üîî [employees] Âà™Èô§Âì°Â∑•:', employee)\n\n          const { IndexedDBAdapter } = await import('@/stores/adapters/indexeddb-adapter')\n          const indexedDB = new IndexedDBAdapter('employees')\n          await indexedDB.delete(employee.id)\n\n          useEmployeeStore.setState(state => ({\n            items: state.items.filter(item => item.id !== employee.id),\n          }))\n        },\n      },\n    })\n\n    logger.log('‚úÖ [PermanentRealtimeSubscriptions] Ê∞∏‰πÖË®ÇÈñ±ÂÆåÊàê')\n\n    // Ê∏ÖÁêÜÔºöÁôªÂá∫ÊôÇÂèñÊ∂àË®ÇÈñ±\n    return () => {\n      logger.log('üîï [PermanentRealtimeSubscriptions] ÂèñÊ∂àÊ∞∏‰πÖË®ÇÈñ±')\n      realtimeManager.unsubscribe(userRoleSubscriptionId)\n      realtimeManager.unsubscribe(workspaceSubscriptionId)\n      realtimeManager.unsubscribe(employeeSubscriptionId)\n    }\n    // ‚úÖ Âè™‰æùË≥¥ userÔºå‰∏çË¶Å‰æùË≥¥ employeeStoreÔºàÂÆÉÊØèÊ¨°ÈÉΩÊúÉÊîπËÆäÔºâ\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user])\n\n  // ÈÄôÊòØ‰∏ÄÂÄãÁ¥îÈÇèËºØÁµÑ‰ª∂Ôºå‰∏çÊ∏≤Êüì‰ªª‰Ωï UI\n  return null\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/TourPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/accounting/accounts-management-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/accounting/add-account-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/accounting/add-transaction-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/calendar/calendar-settings-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/contracts/ContractDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/contracts/ContractViewDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/contracts/EnvelopeDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/contracts/contract-dialog/ContractDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/contracts/contract-dialog/ContractFormFields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/contracts/contract-dialog/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/contracts/contract-dialog/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/contracts/contract-dialog/useContractForm.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":115,"column":5,"severity":1,"nodeType":null,"fix":{"range":[4211,4266],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useState, useEffect } from 'react'\nimport { Tour, ContractTemplate } from '@/types/tour.types'\nimport { useTourStore, useOrderStore, useMemberStore, useItineraryStore } from '@/stores'\nimport { prepareContractData, ContractData } from '@/lib/contract-utils'\n\ninterface UseContractFormProps {\n  tour: Tour\n  mode: 'create' | 'edit'\n  isOpen: boolean\n}\n\nexport function useContractForm({ tour, mode, isOpen }: UseContractFormProps) {\n  const { update: updateTour } = useTourStore()\n  const { items: orders } = useOrderStore()\n  const { items: members } = useMemberStore()\n  const { items: itineraries } = useItineraryStore()\n\n  const [selectedTemplate, setSelectedTemplate] = useState<ContractTemplate | ''>('')\n  const [contractNotes, setContractNotes] = useState('')\n  const [contractCompleted, setContractCompleted] = useState(false)\n  const [archivedDate, setArchivedDate] = useState('')\n  const [saving, setSaving] = useState(false)\n  const [contractData, setContractData] = useState<Partial<ContractData>>({})\n  const [selectedOrderId, setSelectedOrderId] = useState<string>('')\n\n  // ÂèñÂæóÈÄôÂÄãÂúòÁöÑË≥áÊñô\n  const tourOrders = orders.filter(o => o.tour_id === tour.id)\n  const firstOrder = tourOrders[0]\n  const selectedOrder = tourOrders.find(o => o.id === selectedOrderId) || firstOrder\n  const tourMembers = members.filter(m => m.tour_id === tour.id)\n  const selectedOrderMembers = selectedOrder\n    ? members.filter(m => m.order_id === selectedOrder.id)\n    : []\n  const itinerary = itineraries.find(i => i.tour_id === tour.id)\n\n  // ÂàùÂßãÂåñÈÅ∏ÊìáÁöÑË®ÇÂñÆÔºàÈ†êË®≠Á¨¨‰∏ÄÂÄãÔºâ\n  useEffect(() => {\n    if (isOpen && firstOrder) {\n      // Â∞çË©±Ê°ÜÈñãÂïüÊôÇÔºåÂ¶ÇÊûúÈÇÑÊ≤íÈÅ∏ÊìáË®ÇÂñÆÔºåÈ†êË®≠Á¨¨‰∏ÄÂÄã\n      if (!selectedOrderId) {\n        setSelectedOrderId(firstOrder.id)\n      }\n    } else if (!isOpen) {\n      // Â∞çË©±Ê°ÜÈóúÈñâÊôÇÔºåÈáçÁΩÆÈÅ∏ÊìáÁöÑË®ÇÂñÆ\n      setSelectedOrderId('')\n    }\n  }, [isOpen, firstOrder])\n\n  useEffect(() => {\n    if (isOpen) {\n      if (mode === 'edit' && tour.contract_template) {\n        setSelectedTemplate(tour.contract_template as ContractTemplate)\n        setContractNotes(tour.contract_notes || '')\n        setContractCompleted(tour.contract_completed || false)\n        setArchivedDate(tour.contract_archived_date || '')\n\n        // ËºâÂÖ•Â∑≤ÂÑ≤Â≠òÁöÑÂêàÁ¥ÑË≥áÊñô,ÊàñÂæûÁ≥ªÁµ±Ëá™ÂãïÂ∏∂ÂÖ•\n        if (tour.contract_content) {\n          try {\n            const savedData = JSON.parse(tour.contract_content)\n            setContractData(savedData)\n          } catch {\n            // Â¶ÇÊûú contract_content ‰∏çÊòØ JSON,Â∞±ÈáçÊñ∞Ê∫ñÂÇôË≥áÊñô\n            if (selectedOrder) {\n              const firstMember = selectedOrderMembers[0]\n              const autoData = prepareContractData(tour, selectedOrder, firstMember, itinerary)\n              setContractData(autoData)\n            }\n          }\n        } else if (selectedOrder) {\n          const firstMember = selectedOrderMembers[0]\n          const autoData = prepareContractData(tour, selectedOrder, firstMember, itinerary)\n          setContractData(autoData)\n        }\n      } else {\n        // Âª∫Á´ãÊ®°Âºè:Ëá™ÂãïÊ∫ñÂÇôË≥áÊñô\n        setSelectedTemplate('')\n        setContractNotes('')\n        setContractCompleted(false)\n        setArchivedDate('')\n\n        if (selectedOrder) {\n          // ÊúâË®ÇÂñÆË≥áÊñôÔºåËá™ÂãïÂ∏∂ÂÖ•\n          const firstMember = selectedOrderMembers[0]\n          const autoData = prepareContractData(tour, selectedOrder, firstMember, itinerary)\n          setContractData(autoData)\n        } else {\n          // Ê≤íÊúâË®ÇÂñÆË≥áÊñôÔºåÂàùÂßãÂåñÁ©∫ÁôΩÊ¨Ñ‰Ωç\n          setContractData({\n            reviewYear: new Date().getFullYear().toString(),\n            reviewMonth: (new Date().getMonth() + 1).toString(),\n            reviewDay: new Date().getDate().toString(),\n            travelerName: '',\n            travelerAddress: '',\n            travelerIdNumber: '',\n            travelerPhone: '',\n            tourName: tour.name || '',\n            tourDestination: tour.location || '',\n            tourCode: tour.code || '',\n            gatherYear: '',\n            gatherMonth: '',\n            gatherDay: '',\n            gatherHour: '',\n            gatherMinute: '',\n            gatherLocation: '',\n            totalAmount: '',\n            depositAmount: '',\n            deathInsurance: '2,500,000',\n            medicalInsurance: '100,000',\n            companyExtension: '',\n          })\n        }\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, mode, tour.id])\n\n  const handleFieldChange = (field: keyof ContractData, value: string) => {\n    // Êï∏Â≠óÊ¨Ñ‰ΩçËá™ÂãïËΩâÂçäÂΩ¢\n    const numberFields = [\n      'reviewYear',\n      'reviewMonth',\n      'reviewDay',\n      'gatherYear',\n      'gatherMonth',\n      'gatherDay',\n      'gatherHour',\n      'gatherMinute',\n      'totalAmount',\n      'depositAmount',\n    ]\n\n    let processedValue = value\n    if (numberFields.includes(field)) {\n      // ÂÖ®ÂΩ¢Êï∏Â≠óËΩâÂçäÂΩ¢\n      processedValue = value.replace(/[Ôºê-Ôºô]/g, s => String.fromCharCode(s.charCodeAt(0) - 0xfee0))\n    }\n\n    setContractData(prev => ({ ...prev, [field]: processedValue }))\n  }\n\n  const handleSave = async () => {\n    if (mode === 'create' && !selectedTemplate) {\n      alert('Ë´ãÈÅ∏ÊìáÂêàÁ¥ÑÁØÑÊú¨')\n      return\n    }\n\n    setSaving(true)\n    try {\n      // Â∞áÂêàÁ¥ÑË≥áÊñôËΩâÊàê JSON ÂÑ≤Â≠ò\n      const contractContentJson = JSON.stringify(contractData)\n\n      if (mode === 'create') {\n        await updateTour(tour.id, {\n          contract_template: selectedTemplate as ContractTemplate,\n          contract_content: contractContentJson,\n          contract_created_at: new Date().toISOString(),\n          contract_notes: contractNotes,\n          contract_completed: contractCompleted,\n          contract_archived_date: archivedDate || undefined,\n        })\n        alert('ÂêàÁ¥ÑÂª∫Á´ãÊàêÂäü!')\n      } else {\n        await updateTour(tour.id, {\n          contract_content: contractContentJson,\n          contract_notes: contractNotes,\n          contract_completed: contractCompleted,\n          contract_archived_date: archivedDate || undefined,\n        })\n        alert('ÂêàÁ¥ÑÊõ¥Êñ∞ÊàêÂäü!')\n      }\n      return true\n    } catch (error) {\n      alert('ÂÑ≤Â≠òÂêàÁ¥ÑÂ§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶')\n      return false\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handlePrint = async () => {\n    if (!contractData || Object.keys(contractData).length === 0) {\n      alert('Ë´ãÂÖàÂ°´ÂØ´ÂêàÁ¥ÑË≥áÊñô')\n      return\n    }\n\n    try {\n      // ÂÖàÂÑ≤Â≠òÂêàÁ¥ÑË≥áÊñô\n      setSaving(true)\n      const contractContentJson = JSON.stringify(contractData)\n      await updateTour(tour.id, {\n        contract_template: selectedTemplate,\n        contract_content: contractContentJson,\n        contract_created_at: new Date().toISOString(),\n        contract_notes: contractNotes,\n        contract_completed: contractCompleted,\n        contract_archived_date: archivedDate || '',\n      })\n\n      // ËÆÄÂèñÂêàÁ¥ÑÁØÑÊú¨\n      const templateMap: Record<string, string> = {\n        domestic: 'domestic.html',\n        international: 'international.html',\n        individual_international: 'individual_international.html',\n      }\n      const templateFile = templateMap[selectedTemplate as string] || 'international.html'\n      const response = await fetch(`/contract-templates/${templateFile}`)\n      if (!response.ok) {\n        throw new Error('ÁÑ°Ê≥ïËºâÂÖ•ÂêàÁ¥ÑÁØÑÊú¨')\n      }\n\n      let template = await response.text()\n\n      // ÊõøÊèõÊâÄÊúâËÆäÊï∏\n      Object.entries(contractData).forEach(([key, value]) => {\n        const regex = new RegExp(`{{${key}}}`, 'g')\n        template = template.replace(regex, value || '')\n      })\n\n      // ÈñãÂïüÊñ∞Ë¶ñÁ™ó‰∏¶ÂàóÂç∞\n      const printWindow = window.open('', '_blank')\n      if (!printWindow) {\n        alert('Ë´ãÂÖÅË®±ÂΩàÂá∫Ë¶ñÁ™ó‰ª•ÈÄ≤Ë°åÂàóÂç∞')\n        return\n      }\n\n      printWindow.document.write(template)\n      printWindow.document.close()\n\n      // Á≠âÂæÖÂÖßÂÆπËºâÂÖ•ÂæåÂàóÂç∞\n      printWindow.onload = () => {\n        printWindow.print()\n        // ÂàóÂç∞ÂæåÈóúÈñâË¶ñÁ™ó\n        printWindow.onafterprint = () => {\n          printWindow.close()\n        }\n      }\n    } catch (error) {\n      alert('ÂàóÂç∞ÂêàÁ¥ÑÊôÇÁôºÁîüÈåØË™§ÔºåË´ãÁ®çÂæåÂÜçË©¶')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  return {\n    selectedTemplate,\n    setSelectedTemplate,\n    contractNotes,\n    setContractNotes,\n    contractCompleted,\n    setContractCompleted,\n    archivedDate,\n    setArchivedDate,\n    saving,\n    contractData,\n    handleFieldChange,\n    handleSave,\n    handlePrint,\n    firstOrder,\n    tourMembers,\n    tourOrders,\n    selectedOrderId,\n    setSelectedOrderId,\n    selectedOrder,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/customers/customer-search-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/dialog/confirm-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/dialog/form-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/dialog/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/AttractionSelector.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":166,"column":5,"severity":1,"nodeType":null,"fix":{"range":[4382,4437],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport React, { useState, useMemo } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Search, MapPin } from 'lucide-react'\nimport { supabase } from '@/lib/supabase/client'\nimport { TourCountry } from './tour-form/types'\nimport { Attraction } from '@/features/attractions/types'\n\n// Êì¥Â±ïÂûãÂà•ÔºàÂä†ÂÖ• join Êü•Ë©¢ÁöÑÊ¨Ñ‰ΩçÔºâ\ninterface AttractionWithCity extends Attraction {\n  city_name?: string\n  region_name?: string\n}\n\ninterface AttractionSelectorProps {\n  isOpen: boolean\n  onClose: () => void\n  tourCountries?: TourCountry[] // Ë°åÁ®ãÊ∂µËìãÁöÑÂúãÂÆ∂\n  onSelect: (attractions: AttractionWithCity[]) => void\n}\n\nexport function AttractionSelector({\n  isOpen,\n  onClose,\n  tourCountries = [],\n  onSelect,\n}: AttractionSelectorProps) {\n  const [selectedCountryId, setSelectedCountryId] = useState<string>('')\n  const [selectedCityId, setSelectedCityId] = useState<string>('')\n  const [searchQuery, setSearchQuery] = useState('')\n  const [attractions, setAttractions] = useState<AttractionWithCity[]>([])\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set())\n  const [loading, setLoading] = useState(false)\n  const [cities, setCities] = useState<{ id: string; name: string }[]>([])\n\n  // Â∫èÂàóÂåñ tourCountries ÈÅøÂÖçÁÑ°ÈôêËø¥Âúà\n  const tourCountryIds = useMemo(\n    () => tourCountries.map(c => c.country_id).filter(Boolean),\n    [tourCountries]\n  )\n\n  // ÊâìÈñãÂ∞çË©±Ê°ÜÊôÇÊ∏ÖÁ©∫ÈÅ∏Êìá\n  React.useEffect(() => {\n    if (isOpen) {\n      setSelectedIds(new Set())\n      setSearchQuery('')\n      setSelectedCityId('')\n    }\n  }, [isOpen])\n\n  // ËºâÂÖ•ÂüéÂ∏ÇÂàóË°®ÔºàÊ†πÊìöÈÅ∏ÊìáÁöÑÂúãÂÆ∂Ôºâ\n  React.useEffect(() => {\n    if (!isOpen || !selectedCountryId) {\n      setCities([])\n      return\n    }\n\n    const loadCities = async () => {\n      try {\n        const { data, error } = await supabase\n          .from('cities')\n          .select('id, name')\n          .eq('country_id', selectedCountryId)\n          .eq('is_active', true)\n          .order('name')\n\n        if (error) throw error\n        setCities(data || [])\n      } catch (error) {\n        setCities([])\n      }\n    }\n\n    loadCities()\n  }, [isOpen, selectedCountryId])\n\n  // ËºâÂÖ•ÊôØÈªûË≥áÊñô\n  React.useEffect(() => {\n    if (!isOpen) return\n\n    const loadAttractions = async () => {\n      setLoading(true)\n      try {\n        let query = supabase\n          .from('attractions')\n          .select(\n            `\n            id,\n            name,\n            name_en,\n            category,\n            description,\n            thumbnail,\n            country_id,\n            region_id,\n            city_id,\n            cities!inner (\n              name\n            )\n          `\n          )\n          .eq('is_active', true)\n          .order('name')\n\n        // Â¶ÇÊûúÊúâÈÅ∏ÊìáÂüéÂ∏ÇÔºåÁØ©ÈÅ∏Ë©≤ÂüéÂ∏ÇÁöÑÊôØÈªû\n        if (selectedCityId) {\n          query = query.eq('city_id', selectedCityId)\n        } else if (selectedCountryId) {\n          // Â¶ÇÊûúÊúâÈÅ∏ÊìáÂúãÂÆ∂ÔºåÁØ©ÈÅ∏Ë©≤ÂúãÂÆ∂ÁöÑÊôØÈªû\n          query = query.eq('country_id', selectedCountryId)\n        } else if (tourCountryIds.length > 0) {\n          // Â¶ÇÊûúÊ≤íÈÅ∏ÊìáÂúãÂÆ∂Ôºå‰ΩÜË°åÁ®ãÊúâË®≠ÂÆöÂúãÂÆ∂ÔºåÂ∞±ÁØ©ÈÅ∏ÈÄô‰∫õÂúãÂÆ∂ÁöÑÊôØÈªû\n          query = query.in('country_id', tourCountryIds)\n        }\n\n        const { data, error } = await query\n\n        if (error) throw error\n\n        const formatted = (data || []).map((item: {\n          id: string\n          name: string\n          name_en: string | null\n          category: string | null\n          description: string | null\n          thumbnail: string | null\n          country_id: string\n          region_id: string | null\n          city_id: string\n          cities: { name: string }\n        }): AttractionWithCity => ({\n          id: item.id,\n          name: item.name,\n          name_en: item.name_en ?? undefined,\n          category: item.category ?? undefined,\n          description: item.description ?? undefined,\n          thumbnail: item.thumbnail ?? undefined,\n          country_id: item.country_id,\n          region_id: item.region_id ?? undefined,\n          city_id: item.city_id,\n          city_name: item.cities?.name || '',\n          is_active: true,\n          display_order: 0,\n          created_at: '',\n          updated_at: '',\n        }))\n\n        setAttractions(formatted)\n      } catch (error) {\n        // ÈùúÈªòÂ§±ÊïóÔºå‰ΩøÁî®Á©∫Èô£Âàó\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadAttractions()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, selectedCountryId, selectedCityId, tourCountryIds.join(',')])\n\n  // ÊêúÂ∞ãÈÅéÊøæ\n  const filteredAttractions = useMemo(() => {\n    if (!searchQuery) return attractions\n\n    const query = searchQuery.toLowerCase()\n    return attractions.filter(\n      a =>\n        a.name.toLowerCase().includes(query) ||\n        a.name_en?.toLowerCase().includes(query) ||\n        a.city_name?.toLowerCase().includes(query) ||\n        a.category?.toLowerCase().includes(query)\n    )\n  }, [attractions, searchQuery])\n\n  // ÂàáÊèõÈÅ∏Êìá\n  const toggleSelection = (id: string) => {\n    const newSet = new Set(selectedIds)\n    if (newSet.has(id)) {\n      newSet.delete(id)\n    } else {\n      newSet.add(id)\n    }\n    setSelectedIds(newSet)\n  }\n\n  // Á¢∫Ë™çÈÅ∏Êìá\n  const handleConfirm = () => {\n    const selected = attractions.filter(a => selectedIds.has(a.id))\n    onSelect(selected)\n    setSelectedIds(new Set())\n    setSearchQuery('')\n    onClose()\n  }\n\n  // ÂèñÊ∂à\n  const handleCancel = () => {\n    setSelectedIds(new Set())\n    setSearchQuery('')\n    onClose()\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleCancel}>\n      <DialogContent className=\"max-w-3xl max-h-[80vh] flex flex-col\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <MapPin className=\"text-morandi-gold\" size={20} />\n            ÈÅ∏ÊìáÊôØÈªû\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"flex-1 overflow-hidden flex flex-col gap-4\">\n          {/* ÁØ©ÈÅ∏ÂçÄ */}\n          <div className=\"flex gap-3\">\n            {/* ÂúãÂÆ∂ÈÅ∏Êìá */}\n            {tourCountries.length > 0 && (\n              <select\n                value={selectedCountryId}\n                onChange={e => {\n                  setSelectedCountryId(e.target.value)\n                  setSelectedCityId('')\n                  setSearchQuery('')\n                }}\n                className=\"px-3 py-2 border rounded-lg text-sm bg-white min-w-[150px]\"\n              >\n                <option value=\"\">ÂÖ®ÈÉ®ÂúãÂÆ∂</option>\n                {tourCountries.map(country => (\n                  <option key={country.country_id} value={country.country_id}>\n                    {country.country_name}\n                  </option>\n                ))}\n              </select>\n            )}\n\n            {/* ÂüéÂ∏ÇÈÅ∏Êìá */}\n            {selectedCountryId && cities.length > 0 && (\n              <select\n                value={selectedCityId}\n                onChange={e => {\n                  setSelectedCityId(e.target.value)\n                  setSearchQuery('')\n                }}\n                className=\"px-3 py-2 border rounded-lg text-sm bg-white min-w-[150px]\"\n              >\n                <option value=\"\">ÂÖ®ÈÉ®ÂüéÂ∏Ç</option>\n                {cities.map(city => (\n                  <option key={city.id} value={city.id}>\n                    {city.name}\n                  </option>\n                ))}\n              </select>\n            )}\n\n            {/* ÊêúÂ∞ãÊ°Ü */}\n            <div className=\"flex-1 relative\">\n              <Search\n                className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"\n                size={16}\n              />\n              <Input\n                value={searchQuery}\n                onChange={e => setSearchQuery(e.target.value)}\n                placeholder=\"ÊêúÂ∞ãÊôØÈªûÂêçÁ®±„ÄÅÂüéÂ∏Ç...\"\n                className=\"pl-10\"\n              />\n            </div>\n          </div>\n\n          {/* ÊôØÈªûÂàóË°® */}\n          <div className=\"flex-1 overflow-y-auto border rounded-lg\">\n            {loading ? (\n              <div className=\"p-8 text-center text-gray-500\">ËºâÂÖ•‰∏≠...</div>\n            ) : filteredAttractions.length === 0 ? (\n              <div className=\"p-8 text-center text-gray-500\">\n                {searchQuery ? 'Êâæ‰∏çÂà∞Á¨¶ÂêàÁöÑÊôØÈªû' : 'Ê≤íÊúâÂèØÈÅ∏ÊìáÁöÑÊôØÈªû'}\n              </div>\n            ) : (\n              <div className=\"divide-y\">\n                {filteredAttractions.map(attraction => (\n                  <label\n                    key={attraction.id}\n                    className=\"flex items-start gap-3 p-3 hover:bg-morandi-container/10 cursor-pointer transition-colors\"\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedIds.has(attraction.id)}\n                      onChange={() => toggleSelection(attraction.id)}\n                      className=\"mt-1 rounded\"\n                    />\n\n                    {/* Á∏ÆÂúñ */}\n                    {attraction.thumbnail && (\n                      <img\n                        src={attraction.thumbnail}\n                        alt={attraction.name}\n                        className=\"w-16 h-16 rounded object-cover flex-shrink-0\"\n                      />\n                    )}\n\n                    {/* Ë≥áË®ä */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"font-medium text-morandi-primary truncate\">\n                        {attraction.name}\n                      </div>\n                      {attraction.name_en && (\n                        <div className=\"text-xs text-gray-500 truncate\">{attraction.name_en}</div>\n                      )}\n                      <div className=\"text-xs text-morandi-secondary mt-1 flex items-center gap-2\">\n                        <span>{attraction.city_name}</span>\n                        {attraction.category && (\n                          <>\n                            <span>¬∑</span>\n                            <span>{attraction.category}</span>\n                          </>\n                        )}\n                      </div>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Â∑≤ÈÅ∏ÊìáÊèêÁ§∫ */}\n          {selectedIds.size > 0 && (\n            <div className=\"text-sm text-morandi-secondary bg-morandi-container/10 px-3 py-2 rounded\">\n              Â∑≤ÈÅ∏Êìá <span className=\"font-semibold text-morandi-gold\">{selectedIds.size}</span>{' '}\n              ÂÄãÊôØÈªû\n            </div>\n          )}\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={handleCancel}>\n            ÂèñÊ∂à\n          </Button>\n          <Button\n            onClick={handleConfirm}\n            disabled={selectedIds.size === 0}\n            className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white\"\n          >\n            Á¢∫Ë™çÊñ∞Â¢û ({selectedIds.size})\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/PublishButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/TourForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/TourPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/hooks/useRegionData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/hooks/useTourFormHandlers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/sections/CountriesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/sections/CoverInfoSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/sections/DailyItinerarySection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/sections/FeaturesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/sections/FlightInfoSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/sections/HotelSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/sections/LeaderMeetingSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/editor/tour-form/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/AddEmployeeForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/BasicInfoFields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/ContactFields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/JobInfoFields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/PasswordAndRoleFields.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/SuccessDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/add-employee/useEmployeeForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/employee-expanded-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/salary-payment-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/BasicInfoTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/ContactInfoSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/EmergencyContactSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/EmploymentInfoSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/PasswordManagementSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/PersonalInfoSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/basic-info/useBasicInfoForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/permissions-tab-new.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/hr/tabs/salary-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/content-container.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/layout-router.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/list-page-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/main-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/mobile-bottom-nav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/responsive-header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/sync-status-indicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/layout/theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/manifestation/BreathingExercise.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/manifestation/ChapterContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/manifestation/ChapterList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/manifestation/WishWall.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/members/excel-member-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/network-monitor-initializer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/orders/OrderMembersExpandable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/orders/add-order-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/orders/expandable-order-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/orders/simple-order-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/destination-selector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/react-datasheet-wrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/react-datasheet-wrapper/DatasheetCell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/react-datasheet-wrapper/DatasheetStyles.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/react-datasheet-wrapper/ReactDatasheetWrapper.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":233,"column":10,"nodeType":"Block","messageId":"tsIgnoreInsteadOfExpectError","endLine":233,"endColumn":75,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[5976,6041],"text":"/* @ts-expect-error - ReactDataSheet type definitions are incomplete */"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport React, { useCallback, useMemo } from 'react'\nimport ReactDataSheet from 'react-datasheet'\nimport { calculateFormula, getMemberContext } from '@/lib/formula-calculator'\nimport { cn } from '@/lib/utils'\nimport 'react-datasheet/lib/react-datasheet.css'\n\nimport { DataSheetProps, CellData } from './types'\nimport { useDatasheetState } from './useDatasheetState'\nimport { useDatasheetHandlers } from './useDatasheetHandlers'\nimport { DatasheetCell } from './DatasheetCell'\nimport { DatasheetStyles } from './DatasheetStyles'\n\nexport function ReactDatasheetWrapper({\n  columns,\n  data,\n  tour_add_ons = [],\n  tourPrice = 0,\n  onCellsChanged,\n  onDataUpdate,\n  onColumnDelete,\n  onColumnHide,\n  hiddenColumns = [],\n  className,\n  orderFilter,\n  roomOptions = [],\n  onRoomAssign,\n  getRoomUsage,\n  isRoomFull,\n  enableColumnResize = true,\n  enableRowDrag = true,\n  tour_id,\n  tourId,\n}: DataSheetProps) {\n  // State management\n  const {\n    hoveredColumn,\n    setHoveredColumn,\n    columnWidths,\n    setColumnWidths,\n    draggedRow,\n    setDraggedRow,\n    visibleColumns,\n    saveColumnWidth,\n    getColumnWidth,\n    sheetData: initialSheetData,\n  } = useDatasheetState({\n    columns,\n    data,\n    hiddenColumns,\n    tour_id,\n    tourId,\n  })\n\n  // Event handlers\n  const {\n    handleColumnResize,\n    handleRowDragStart,\n    handleRowDragOver,\n    handleRowDrop,\n    handleCellsChanged,\n    handleKeyDown,\n    handleSelect,\n    parsePaste,\n  } = useDatasheetHandlers({\n    data,\n    visibleColumns,\n    columnWidths,\n    draggedRow,\n    enableColumnResize,\n    enableRowDrag,\n    onDataUpdate,\n    onCellsChanged,\n    saveColumnWidth,\n  })\n\n  // Apply formula calculations and formula styling to sheet data\n  const sheetData = useMemo(() => {\n    return initialSheetData.map((row, rowIndex) => {\n      if (rowIndex === 0) return row // Keep header as is\n\n      return row.map(cell => {\n        const value = cell.value\n        let displayValue = value\n        let className = cell.className\n\n        // Calculate formulas\n        if (typeof value === 'string' && value.startsWith('=')) {\n          const context = getMemberContext(cell.rowData || {}, tour_add_ons, tourPrice)\n          displayValue = calculateFormula(value, context)\n          className = cn(className, 'datasheet-formula')\n        }\n\n        // Add readonly styling\n        if (cell.readOnly) {\n          className = cn(className, 'datasheet-readonly')\n        }\n\n        return {\n          ...cell,\n          displayValue,\n          className: cn('datasheet-cell', className),\n        }\n      })\n    })\n  }, [initialSheetData, tour_add_ons, tourPrice])\n\n  // Custom value renderer\n  const valueRenderer = useCallback(\n    (cell: CellData, row: number, col: number) => {\n      return (\n        <DatasheetCell\n          cell={cell}\n          row={row}\n          col={col}\n          visibleColumns={visibleColumns}\n          hoveredColumn={hoveredColumn}\n          enableColumnResize={enableColumnResize}\n          orderFilter={orderFilter}\n          roomOptions={roomOptions}\n          getRoomUsage={getRoomUsage}\n          isRoomFull={isRoomFull}\n          onColumnHide={onColumnHide}\n          onColumnDelete={onColumnDelete}\n          onColumnResize={handleColumnResize}\n        />\n      )\n    },\n    [\n      visibleColumns,\n      hoveredColumn,\n      enableColumnResize,\n      orderFilter,\n      roomOptions,\n      getRoomUsage,\n      isRoomFull,\n      onColumnHide,\n      onColumnDelete,\n      handleColumnResize,\n    ]\n  )\n\n  // Row renderer with drag support\n  const rowRenderer = useCallback(\n    (props: React.HTMLAttributes<HTMLTableRowElement> & { 'data-row': number }) => {\n      const rowIndex = props['data-row']\n      const isDraggable = enableRowDrag && rowIndex > 0\n      const isDragging = draggedRow === rowIndex - 1\n\n      return (\n        <tr\n          {...props}\n          draggable={isDraggable}\n          onDragStart={e => {\n            handleRowDragStart(e, rowIndex)\n            setDraggedRow(rowIndex - 1)\n          }}\n          onDragOver={handleRowDragOver}\n          onDrop={e => {\n            handleRowDrop(e, draggedRow, rowIndex)\n            setDraggedRow(null)\n          }}\n          className={cn(\n            props.className,\n            isDragging && 'opacity-50 bg-morandi-gold/10',\n            isDraggable && 'hover:bg-morandi-gold/5 cursor-move'\n          )}\n          style={{\n            ...props.style,\n            borderLeft: isDragging ? '3px solid #d97706' : undefined,\n          }}\n        />\n      )\n    },\n    [enableRowDrag, draggedRow, handleRowDragStart, handleRowDragOver, handleRowDrop, setDraggedRow]\n  )\n\n  // Cell renderer with width support\n  const cellRenderer = useCallback((props: React.TdHTMLAttributes<HTMLTableCellElement> & {\n    editing?: boolean\n    selected?: boolean\n    updated?: boolean\n    width?: number\n    columnKey?: string\n    rowIndex?: number\n    attributesRenderer?: unknown\n    valueRenderer?: unknown\n    dataRenderer?: unknown\n  }) => {\n    const {\n      editing: _editing,\n      selected: _selected,\n      updated: _updated,\n      width,\n      columnKey: _columnKey,\n      rowIndex: _rowIndex,\n      attributesRenderer: _attributesRenderer,\n      valueRenderer: _valueRenderer,\n      dataRenderer: _dataRenderer,\n      ...tdProps\n    } = props\n    const cellWidth = width || 100\n\n    return (\n      <td\n        {...tdProps}\n        style={{\n          ...props.style,\n          padding: 0,\n          width: `${cellWidth}px`,\n          minWidth: `${cellWidth}px`,\n          maxWidth: `${cellWidth}px`,\n        }}\n      />\n    )\n  }, [])\n\n  return (\n    <div className={cn('excel-datasheet-wrapper', className)}>\n      <DatasheetStyles />\n\n      <div\n        onKeyDown={e => {\n          handleKeyDown(e)\n          if (['ArrowDown', 'ArrowUp', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {\n            e.preventDefault()\n            e.stopPropagation()\n          }\n        }}\n        tabIndex={0}\n      >\n        {/* @ts-ignore - ReactDataSheet type definitions are incomplete */}\n        <ReactDataSheet\n          data={sheetData}\n          onCellsChanged={handleCellsChanged}\n          valueRenderer={valueRenderer}\n          dataRenderer={cell => cell.value}\n          onContextMenu={(e: React.MouseEvent, _cell: CellData, _i: number, _j: number) => e.preventDefault()}\n          onSelect={handleSelect}\n          parsePaste={parsePaste}\n          tabBehaviour=\"default\"\n          onKeyDown={(e: React.KeyboardEvent) => {\n            if (['ArrowDown', 'ArrowUp', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {\n              e.preventDefault()\n              e.stopPropagation()\n            }\n          }}\n          rowRenderer={rowRenderer}\n          cellRenderer={cellRenderer}\n        />\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/react-datasheet-wrapper/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/react-datasheet-wrapper/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/react-datasheet-wrapper/useDatasheetHandlers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/shared/react-datasheet-wrapper/useDatasheetState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/table-cells/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/quick-actions/quick-disbursement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/quick-actions/quick-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/quick-actions/quick-pnr.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/quick-actions/quick-receipt.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-expanded-view.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-expanded-view/AssignmentSection.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":21,"column":5,"severity":1,"nodeType":null,"fix":{"range":[699,754],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport React, { useEffect, useState } from 'react'\nimport { Input } from '@/components/ui/input'\nimport { cn } from '@/lib/utils'\nimport { Calendar, Clock, FileText, X, UserCheck } from 'lucide-react'\nimport { AssignmentSectionProps } from './types'\nimport { useUserStore } from '@/stores/user-store'\nimport { useAuthStore } from '@/stores/auth-store'\n\nexport function AssignmentSection({ todo, onUpdate }: AssignmentSectionProps) {\n  const { items: employees, fetchAll } = useUserStore()\n  const { user } = useAuthStore()\n  const [assigneeName, setAssigneeName] = useState<string>('')\n\n  // ËºâÂÖ•Âì°Â∑•Ë≥áÊñô\n  useEffect(() => {\n    if (employees.length === 0) {\n      void fetchAll()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [employees.length])\n\n  // Êõ¥Êñ∞ÊåáÊ¥æËÄÖÂêçÁ®±\n  useEffect(() => {\n    if (todo.assignee) {\n      // ÂÑ™ÂÖàÊ™¢Êü•Áï∂ÂâçÁôªÂÖ•Áî®Êà∂ÔºåÂÜçÊ™¢Êü•Âì°Â∑•ÂàóË°®\n      if (user?.id === todo.assignee) {\n        setAssigneeName(user.display_name || user.chinese_name || user.personal_info?.email || 'Êú™Áü•Âì°Â∑•')\n      } else {\n        const assignee = employees.find(e => e.id === todo.assignee)\n        setAssigneeName(assignee?.display_name || assignee?.chinese_name || 'Êú™Áü•Âì°Â∑•')\n      }\n    } else {\n      setAssigneeName('')\n    }\n  }, [todo.assignee, employees, user])\n  const getDeadlineColor = () => {\n    if (!todo.deadline) return 'text-morandi-secondary'\n\n    const deadline = new Date(todo.deadline)\n    const today = new Date()\n    const diffDays = Math.ceil((deadline.getTime() - today.getTime()) / (1000 * 60 * 60 * 24))\n\n    if (diffDays < 0) return 'text-morandi-red' // ÈÄæÊúü\n    if (diffDays === 0) return 'text-morandi-gold' // ‰ªäÂ§©\n    if (diffDays <= 3) return 'text-morandi-gold' // 3Â§©ÂÖß\n    return 'text-morandi-secondary' // ÂÖÖË£ï\n  }\n\n  return (\n    <div className=\"bg-card border border-border rounded-xl p-4 mb-4 shadow-sm\">\n      <div className=\"space-y-3\">\n        {/* ÊåáÊ¥æÁµ¶ */}\n        {assigneeName && (\n          <div className=\"flex items-center gap-3 pb-3 border-b border-border\">\n            <UserCheck size={18} className=\"text-morandi-gold\" />\n            <span className=\"text-sm text-morandi-secondary min-w-[60px]\">ÊåáÊ¥æÁµ¶:</span>\n            <div className=\"flex items-center gap-2 px-3 py-1.5 bg-morandi-gold/10 border border-morandi-gold/30 rounded-lg\">\n              <span className=\"text-sm font-medium text-morandi-gold\">{assigneeName}</span>\n              <button\n                onClick={() => onUpdate({ assignee: undefined })}\n                className=\"p-0.5 hover:bg-morandi-red/10 rounded text-morandi-secondary hover:text-morandi-red\"\n                title=\"ÂèñÊ∂àÊåáÊ¥æ\"\n              >\n                <X size={12} />\n              </button>\n            </div>\n          </div>\n        )}\n\n        <div className=\"flex items-center gap-3\">\n          <Calendar size={18} className=\"text-morandi-secondary\" />\n          <span className=\"text-sm text-morandi-secondary min-w-[60px]\">ÊúüÈôê:</span>\n          <Input\n            type=\"date\"\n            value={todo.deadline || ''}\n            onChange={e => onUpdate({ deadline: e.target.value })}\n            className={cn('text-sm font-medium h-8 w-auto', getDeadlineColor())}\n          />\n          {todo.deadline && (\n            <button\n              onClick={() => onUpdate({ deadline: '' })}\n              className=\"p-1 hover:bg-morandi-red/10 rounded text-morandi-secondary hover:text-morandi-red\"\n              title=\"Ê∏ÖÈô§ÊúüÈôê\"\n            >\n              <X size={14} />\n            </button>\n          )}\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <Clock size={16} className=\"text-morandi-secondary\" />\n          <span className=\"text-xs text-morandi-secondary min-w-[50px]\">ÁãÄÊÖã:</span>\n          <div className=\"flex gap-2 flex-wrap\">\n            <button\n              onClick={() => onUpdate({ status: 'pending' })}\n              className={cn(\n                'px-3.5 py-2 text-xs rounded-lg transition-all font-medium',\n                todo.status === 'pending'\n                  ? 'bg-morandi-muted text-white shadow-md'\n                  : 'bg-morandi-container/30 border border-morandi-muted/20 text-morandi-secondary hover:bg-morandi-muted/10 hover:border-morandi-muted/40 hover:text-morandi-muted'\n              )}\n            >\n              ÂæÖËæ¶\n            </button>\n            <button\n              onClick={() => onUpdate({ status: 'in_progress' })}\n              className={cn(\n                'px-3.5 py-2 text-xs rounded-lg transition-all font-medium',\n                todo.status === 'in_progress'\n                  ? 'bg-morandi-gold text-white shadow-md'\n                  : 'bg-morandi-container/30 border border-morandi-gold/20 text-morandi-secondary hover:bg-morandi-gold/10 hover:border-morandi-gold/40 hover:text-morandi-gold'\n              )}\n            >\n              ÈÄ≤Ë°å‰∏≠\n            </button>\n            <button\n              onClick={() => onUpdate({ status: 'completed' })}\n              className={cn(\n                'px-3.5 py-2 text-xs rounded-lg transition-all font-medium',\n                todo.status === 'completed'\n                  ? 'bg-morandi-green text-white shadow-md'\n                  : 'bg-morandi-container/30 border border-morandi-green/20 text-morandi-secondary hover:bg-morandi-green/10 hover:border-morandi-green/40 hover:text-morandi-green'\n              )}\n            >\n              ÂÆåÊàê\n            </button>\n            <button\n              onClick={() => onUpdate({ status: 'cancelled' })}\n              className={cn(\n                'px-3.5 py-2 text-xs rounded-lg transition-all font-medium',\n                todo.status === 'cancelled'\n                  ? 'bg-morandi-red text-white shadow-md'\n                  : 'bg-morandi-container/30 border border-morandi-red/20 text-morandi-secondary hover:bg-morandi-red/10 hover:border-morandi-red/40 hover:text-morandi-red'\n              )}\n            >\n              ÂèñÊ∂à\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {todo.related_items && todo.related_items.length > 0 && (\n        <div className=\"pt-3 mt-3 border-t border-border\">\n          <span className=\"text-xs font-medium text-morandi-primary flex items-center gap-1.5 mb-2\">\n            <FileText size={12} className=\"text-morandi-gold\" />\n            ÈóúËÅØÈ†ÖÁõÆ\n          </span>\n          <div className=\"flex flex-wrap gap-1.5\">\n            {todo.related_items.map((item, index) => (\n              <button\n                key={index}\n                onClick={() => {\n                  const basePath = {\n                    group: '/tours',\n                    quote: '/quotes',\n                    order: '/orders',\n                    invoice: '/finance/treasury/disbursement',\n                    receipt: '/finance/payments',\n                  }[item.type]\n                  if (basePath) {\n                    window.location.href = `${basePath}?highlight=${item.id}`\n                  }\n                }}\n                className=\"bg-white/60 border border-morandi-gold/20 text-morandi-primary text-xs px-2 py-1 rounded-lg hover:bg-morandi-gold/10 hover:border-morandi-gold/20 transition-all font-medium\"\n              >\n                {item.title}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-expanded-view/NotesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-expanded-view/QuickActionsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-expanded-view/SubTasksSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-expanded-view/TodoExpandedView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-expanded-view/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/todos/todo-expanded-view/useTodoExpandedView.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tour-preview/AttractionCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tour-preview/DateSubtitle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tour-preview/DayLabel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tour-preview/DecorativeDivider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tour-preview/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-add-ons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-close-dialog.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":62,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1786,1841],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport { logger } from '@/lib/utils/logger'\nimport { useState, useEffect } from 'react'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Tour } from '@/types/tour.types'\nimport { PaymentRequest } from '@/stores/types'\nimport { supabase } from '@/lib/supabase/client'\nimport { toast } from 'sonner'\nimport { Plus, X } from 'lucide-react'\n\ninterface Employee {\n  id: string\n  name: string\n}\n\ninterface BonusRecipient {\n  employeeId: string\n  percentage: number\n}\n\ninterface TourCloseDialogProps {\n  tour: Tour\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  onSuccess: () => void\n}\n\nexport function TourCloseDialog({ tour, open, onOpenChange, onSuccess }: TourCloseDialogProps) {\n  const [loading, setLoading] = useState(false)\n  const [calculating, setCalculating] = useState(true)\n  const [employees, setEmployees] = useState<Employee[]>([])\n\n  // Ë®àÁÆóÊï∏Êìö\n  const [totalRevenue, setTotalRevenue] = useState(0)\n  const [totalCost, setTotalCost] = useState(0)\n  const [memberCount, setMemberCount] = useState(0)\n  const [grossProfit, setGrossProfit] = useState(0)\n  const [miscExpense, setMiscExpense] = useState(0)\n  const [tax, setTax] = useState(0)\n  const [netProfit, setNetProfit] = useState(0)\n\n  // Ê•≠ÂãôÊ•≠Á∏æÔºàÂèØÂ§ö‰∫∫Ôºâ\n  const [salesRecipients, setSalesRecipients] = useState<BonusRecipient[]>([\n    { employeeId: '', percentage: 0 }\n  ])\n\n  // OP ÁçéÈáëÔºàÂèØÂ§ö‰∫∫Ôºâ\n  const [opRecipients, setOpRecipients] = useState<BonusRecipient[]>([\n    { employeeId: '', percentage: 0 }\n  ])\n\n  // ËºâÂÖ•Âì°Â∑•ÂàóË°®\n  useEffect(() => {\n    if (open) {\n      loadEmployees()\n      calculateTourFinance()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open, tour.id])\n\n  const loadEmployees = async () => {\n    try {\n      // ÂèñÂæóÁï∂Ââç workspace\n      const { data: workspace } = await supabase\n        .from('workspaces')\n        .select('id')\n        .limit(1)\n        .single()\n\n      if (!workspace) {\n        logger.error('Êâæ‰∏çÂà∞Â∑•‰ΩúÁ©∫Èñì')\n        return\n      }\n\n      // Âè™ËºâÂÖ•Âêå‰∏Ä workspace ÁöÑÂì°Â∑•\n      const { data, error } = await supabase\n        .from('employees')\n        .select('id, display_name')\n        .eq('workspace_id', workspace.id)\n        .order('display_name')\n\n      if (error) throw error\n      if (data) {\n        setEmployees(\n          data.map(emp => ({\n            id: emp.id,\n            name: emp.display_name || '',\n          }))\n        )\n      }\n    } catch (error) {\n      logger.error('ËºâÂÖ•Âì°Â∑•Â§±Êïó:', error)\n    }\n  }\n\n  const calculateTourFinance = async () => {\n    try {\n      setCalculating(true)\n\n      // 1. Ë®àÁÆóÁ∏ΩÊî∂ÂÖ•ÔºàË©≤ÂúòÊâÄÊúâË®ÇÂñÆÁöÑÊî∂Ê¨æÔºâ\n      const { data: orders } = await supabase\n        .from('orders')\n        .select('id, paid_amount')\n        .eq('tour_id', tour.id)\n\n      const revenue = orders?.reduce((sum, o) => sum + (o.paid_amount || 0), 0) || 0\n      setTotalRevenue(revenue)\n\n      // 2. Ë®àÁÆóÁ∏ΩÊàêÊú¨ÔºàË©≤ÂúòÊâÄÊúâË´ãÊ¨æÂñÆÔºå‰ΩÜÊéíÈô§ bonus È°ûÂûãÔºâ\n      const orderIds = orders?.map(o => o.id) || []\n      if (orderIds.length > 0) {\n        const { data: paymentRequests } = await supabase\n          .from('payment_requests')\n          .select('amount')\n          .in('order_id', orderIds)\n          .eq('status', 'paid')\n\n        const cost = paymentRequests?.reduce((sum: number, pr: Pick<PaymentRequest, 'amount'>) => sum + (pr.amount || 0), 0) || 0\n        setTotalCost(cost)\n      }\n\n      // 3. Ë®àÁÆóÂúòÂì°Á∏Ω‰∫∫Êï∏\n      if (orderIds.length > 0) {\n        const { data: members } = await supabase\n          .from('order_members')\n          .select('id')\n          .in('order_id', orderIds)\n\n        setMemberCount(members?.length || 0)\n      }\n\n      // 4. Ë®àÁÆóÂêÑÈ†ÖÊï∏ÂÄº\n      const gross = revenue - totalCost\n      const misc = memberCount * 10\n      const taxAmount = (gross - misc) * 0.12\n      const net = gross - misc - taxAmount\n\n      setGrossProfit(gross)\n      setMiscExpense(misc)\n      setTax(taxAmount)\n      setNetProfit(net)\n    } catch (error) {\n      logger.error('Ë®àÁÆóÂúòÈ´îË≤°ÂãôÂ§±Êïó:', error)\n      toast.error('Ë®àÁÆóÂ§±Êïó')\n    } finally {\n      setCalculating(false)\n    }\n  }\n\n  // Êñ∞Â¢ûÊ•≠Âãô\n  const addSalesRecipient = () => {\n    setSalesRecipients([...salesRecipients, { employeeId: '', percentage: 0 }])\n  }\n\n  // ÁßªÈô§Ê•≠Âãô\n  const removeSalesRecipient = (index: number) => {\n    setSalesRecipients(salesRecipients.filter((_, i) => i !== index))\n  }\n\n  // Êñ∞Â¢û OP\n  const addOpRecipient = () => {\n    setOpRecipients([...opRecipients, { employeeId: '', percentage: 0 }])\n  }\n\n  // ÁßªÈô§ OP\n  const removeOpRecipient = (index: number) => {\n    setOpRecipients(opRecipients.filter((_, i) => i !== index))\n  }\n\n  // Á¢∫Ë™çÁµêÂúò\n  const handleCloseTour = async () => {\n    // È©óË≠â\n    const salesTotal = salesRecipients.reduce((sum, r) => sum + r.percentage, 0)\n    const opTotal = opRecipients.reduce((sum, r) => sum + r.percentage, 0)\n\n    if (salesRecipients.some(r => !r.employeeId)) {\n      toast.error('Ë´ãÈÅ∏ÊìáÊâÄÊúâÊ•≠Âãô‰∫∫Âì°')\n      return\n    }\n\n    if (opRecipients.some(r => !r.employeeId)) {\n      toast.error('Ë´ãÈÅ∏ÊìáÊâÄÊúâ OP ‰∫∫Âì°')\n      return\n    }\n\n    if (!confirm(`Á¢∫ÂÆöË¶ÅÁµêÂúòÂóéÔºüÁµêÂúòÂæåÂ∞áÁÑ°Ê≥ï‰øÆÊîπ„ÄÇ\\n\\nÊ•≠ÂãôÊ•≠Á∏æÔºö${salesTotal}%\\nOP ÁçéÈáëÔºö${opTotal}%`)) {\n      return\n    }\n\n    setLoading(true)\n    try {\n      // ÂèñÂæóÁ¨¨‰∏ÄÂÄãË®ÇÂñÆ IDÔºàÁî®ÊñºÈóúËÅØË´ãÊ¨æÂñÆÔºâ\n      const { data: firstOrder } = await supabase\n        .from('orders')\n        .select('id')\n        .eq('tour_id', tour.id)\n        .limit(1)\n        .single()\n\n      const orderId = firstOrder?.id\n\n      // 1. Áî¢ÁîüÊ•≠ÂãôÊ•≠Á∏æË´ãÊ¨æÂñÆ\n      for (const recipient of salesRecipients) {\n        if (recipient.percentage > 0) {\n          const amount = Math.round(netProfit * (recipient.percentage / 100))\n          await supabase.from('payment_requests').insert({\n            order_id: orderId,\n            supplier_name: 'Ê•≠ÂãôÊ•≠Á∏æ',\n            amount,\n            note: `Ê•≠ÂãôÊ•≠Á∏æ ${recipient.percentage}%`,\n            status: 'pending'\n          })\n        }\n      }\n\n      // 2. Áî¢Áîü OP ÁçéÈáëË´ãÊ¨æÂñÆ\n      for (const recipient of opRecipients) {\n        if (recipient.percentage > 0) {\n          const amount = Math.round(netProfit * (recipient.percentage / 100))\n          await supabase.from('payment_requests').insert({\n            order_id: orderId,\n            supplier_name: 'OP ÁçéÈáë',\n            amount,\n            note: `OP ÁçéÈáë ${recipient.percentage}%`,\n            status: 'pending'\n          })\n        }\n      }\n\n      // 3. Êõ¥Êñ∞ÂúòÈ´îÁãÄÊÖãÁÇ∫Â∑≤ÁµêÂúò\n      const { error: updateError } = await supabase\n        .from('tours')\n        .update({\n          status: 'ÁµêÊ°à',\n          closing_date: new Date().toISOString().split('T')[0]\n        })\n        .eq('id', tour.id)\n\n      if (updateError) throw updateError\n\n      toast.success('ÁµêÂúòÊàêÂäüÔºÅ')\n      onSuccess()\n      onOpenChange(false)\n    } catch (error) {\n      logger.error('ÁµêÂúòÂ§±Êïó:', error)\n      toast.error('ÁµêÂúòÂ§±Êïó')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>ÂúòÈ´îÁµêÁÆó - {tour.name}</DialogTitle>\n        </DialogHeader>\n\n        {calculating ? (\n          <div className=\"py-8 text-center text-morandi-secondary\">Ë®àÁÆó‰∏≠...</div>\n        ) : (\n          <div className=\"space-y-6\">\n            {/* Ë≤°ÂãôÊëòË¶Å */}\n            <div className=\"bg-morandi-container/20 rounded-lg p-4 space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-morandi-secondary\">ÂúòË≤ªÊî∂ÂÖ•</span>\n                <span className=\"font-medium\">${totalRevenue.toLocaleString()}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-morandi-secondary\">ÊàêÊú¨ÊîØÂá∫</span>\n                <span className=\"font-medium text-red-600\">-${totalCost.toLocaleString()}</span>\n              </div>\n              <div className=\"border-t border-morandi-gold/20 pt-2 flex justify-between\">\n                <span className=\"font-medium\">ÊØõÂà©</span>\n                <span className=\"font-bold text-lg\">${grossProfit.toLocaleString()}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-morandi-secondary\">ÂÖ¨Âè∏ÈõúÊîØ ({memberCount} ‰∫∫ √ó $10)</span>\n                <span className=\"font-medium text-red-600\">-${miscExpense.toLocaleString()}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-morandi-secondary\">Á®ÖÈáë (12%)</span>\n                <span className=\"font-medium text-red-600\">-${tax.toLocaleString()}</span>\n              </div>\n              <div className=\"border-t border-morandi-gold/20 pt-2 flex justify-between\">\n                <span className=\"font-bold\">Ê∑®Âà©ÊΩ§</span>\n                <span className=\"font-bold text-xl text-green-600\">${netProfit.toLocaleString()}</span>\n              </div>\n            </div>\n\n            {/* Ê•≠ÂãôÊ•≠Á∏æ */}\n            <div>\n              <div className=\"flex items-center justify-between mb-3\">\n                <Label className=\"text-base font-semibold\">Ê•≠ÂãôÊ•≠Á∏æ</Label>\n                <Button variant=\"outline\" size=\"sm\" onClick={addSalesRecipient}>\n                  <Plus size={14} className=\"mr-1\" />\n                  Êñ∞Â¢ûÊ•≠Âãô\n                </Button>\n              </div>\n              <div className=\"space-y-2\">\n                {salesRecipients.map((recipient, index) => (\n                  <div key={index} className=\"flex items-center gap-2\">\n                    <select\n                      value={recipient.employeeId}\n                      onChange={e => {\n                        const newRecipients = [...salesRecipients]\n                        newRecipients[index].employeeId = e.target.value\n                        setSalesRecipients(newRecipients)\n                      }}\n                      className=\"flex-1 px-3 py-2 border border-morandi-gold/30 rounded-lg text-sm\"\n                    >\n                      <option value=\"\">ÈÅ∏ÊìáÊ•≠Âãô</option>\n                      {employees.map(emp => (\n                        <option key={emp.id} value={emp.id}>{emp.name}</option>\n                      ))}\n                    </select>\n                    <Input\n                      type=\"number\"\n                      value={recipient.percentage || ''}\n                      onChange={e => {\n                        const newRecipients = [...salesRecipients]\n                        newRecipients[index].percentage = parseFloat(e.target.value) || 0\n                        setSalesRecipients(newRecipients)\n                      }}\n                      className=\"w-24\"\n                      placeholder=\"%\"\n                    />\n                    <span className=\"text-sm text-morandi-secondary min-w-[80px]\">\n                      ${Math.round(netProfit * (recipient.percentage / 100)).toLocaleString()}\n                    </span>\n                    {salesRecipients.length > 1 && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => removeSalesRecipient(index)}\n                      >\n                        <X size={16} />\n                      </Button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* OP ÁçéÈáë */}\n            <div>\n              <div className=\"flex items-center justify-between mb-3\">\n                <Label className=\"text-base font-semibold\">OP ÁçéÈáë</Label>\n                <Button variant=\"outline\" size=\"sm\" onClick={addOpRecipient}>\n                  <Plus size={14} className=\"mr-1\" />\n                  Êñ∞Â¢û OP\n                </Button>\n              </div>\n              <div className=\"space-y-2\">\n                {opRecipients.map((recipient, index) => (\n                  <div key={index} className=\"flex items-center gap-2\">\n                    <select\n                      value={recipient.employeeId}\n                      onChange={e => {\n                        const newRecipients = [...opRecipients]\n                        newRecipients[index].employeeId = e.target.value\n                        setOpRecipients(newRecipients)\n                      }}\n                      className=\"flex-1 px-3 py-2 border border-morandi-gold/30 rounded-lg text-sm\"\n                    >\n                      <option value=\"\">ÈÅ∏Êìá OP</option>\n                      {employees.map(emp => (\n                        <option key={emp.id} value={emp.id}>{emp.name}</option>\n                      ))}\n                    </select>\n                    <Input\n                      type=\"number\"\n                      value={recipient.percentage || ''}\n                      onChange={e => {\n                        const newRecipients = [...opRecipients]\n                        newRecipients[index].percentage = parseFloat(e.target.value) || 0\n                        setOpRecipients(newRecipients)\n                      }}\n                      className=\"w-24\"\n                      placeholder=\"%\"\n                    />\n                    <span className=\"text-sm text-morandi-secondary min-w-[80px]\">\n                      ${Math.round(netProfit * (recipient.percentage / 100)).toLocaleString()}\n                    </span>\n                    {opRecipients.length > 1 && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => removeOpRecipient(index)}\n                      >\n                        <X size={16} />\n                      </Button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* ÊåâÈàï */}\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n                ÂèñÊ∂à\n              </Button>\n              <Button onClick={handleCloseTour} disabled={loading}>\n                {loading ? 'ËôïÁêÜ‰∏≠...' : 'Á¢∫Ë™çÁµêÂúò'}\n              </Button>\n            </div>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-costs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-departure-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-documents.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-unused-vars').","line":40,"column":3,"severity":1,"nodeType":null,"fix":{"range":[820,881],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport { useState } from 'react'\nimport { ContentContainer } from '@/components/layout/content-container'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Tour } from '@/stores/types'\nimport {\n  FileText,\n  Upload,\n  Download,\n  Eye,\n  CheckCircle,\n  AlertCircle,\n  Clock,\n  Plus,\n  LucideIcon,\n} from 'lucide-react'\n\ninterface MockDocument {\n  id: string\n  name: string\n  type: string\n  description: string\n  status: string\n  format: string\n  size: string\n  uploadDate: string\n  signedBy?: string\n  order_id?: string\n}\n\ninterface TourDocumentsProps {\n  tour: Tour\n  orderFilter?: string\n}\n\nexport function TourDocuments({ orderFilter }: TourDocumentsProps) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [isUploadDialogOpen, setIsUploadDialogOpen] = useState(false)\n  const [newDocument, setNewDocument] = useState({\n    name: '',\n    type: 'contract',\n    description: '',\n  })\n\n  const allMockDocuments: MockDocument[] = []\n\n  const mockDocuments = orderFilter\n    ? allMockDocuments.filter(doc => doc.order_id === orderFilter)\n    : allMockDocuments\n\n  const handleUploadDocument = () => {\n    if (!newDocument.name) return\n\n    setNewDocument({\n      name: '',\n      type: 'contract',\n      description: '',\n    })\n    setIsUploadDialogOpen(false)\n  }\n\n  const getStatusIcon = (status: string): LucideIcon => {\n    const icons: Record<string, LucideIcon> = {\n      Â∑≤Á∞ΩÁΩ≤: CheckCircle,\n      Â∑≤Á¢∫Ë™ç: CheckCircle,\n      ÂæÖÁ¢∫Ë™ç: Clock,\n      ÂæÖÁ∞ΩÁΩ≤: AlertCircle,\n    }\n    return icons[status] || Clock\n  }\n\n  const getStatusBadge = (status: string) => {\n    const badges: Record<string, string> = {\n      Â∑≤Á∞ΩÁΩ≤: 'bg-morandi-green text-white',\n      Â∑≤Á¢∫Ë™ç: 'bg-morandi-green text-white',\n      ÂæÖÁ¢∫Ë™ç: 'bg-morandi-gold text-white',\n      ÂæÖÁ∞ΩÁΩ≤: 'bg-morandi-red text-white',\n    }\n    return badges[status] || 'bg-morandi-container text-morandi-secondary'\n  }\n\n  const getTypeColor = (type: string) => {\n    const colors: Record<string, string> = {\n      ÂêàÁ¥Ñ: 'text-red-600',\n      Ë°åÁ®ã: 'text-blue-600',\n      ‰øùÈö™: 'text-green-600',\n      Á•®Âãô: 'text-purple-600',\n      ‰ΩèÂÆø: 'text-orange-600',\n    }\n    return colors[type] || 'text-gray-600'\n  }\n\n  const documentsByType = mockDocuments.reduce(\n    (acc, doc) => {\n      if (!acc[doc.type]) acc[doc.type] = []\n      acc[doc.type].push(doc)\n      return acc\n    },\n    {} as Record<string, MockDocument[]>\n  )\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Êñá‰ª∂Áµ±Ë®à */}\n      <ContentContainer>\n        <h3 className=\"text-lg font-semibold text-morandi-primary mb-4\">Êñá‰ª∂ÁãÄÊÖãÊ¶ÇË¶Ω</h3>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4\">\n          <div className=\"bg-morandi-container p-4 rounded-lg\">\n            <div className=\"text-2xl font-bold text-morandi-primary\">{mockDocuments.length}</div>\n            <div className=\"text-sm text-morandi-secondary\">Á∏ΩÊñá‰ª∂Êï∏</div>\n          </div>\n          <div className=\"bg-morandi-container p-4 rounded-lg\">\n            <div className=\"text-2xl font-bold text-morandi-green\">\n              {mockDocuments.filter(doc => doc.status.includes('Â∑≤')).length}\n            </div>\n            <div className=\"text-sm text-morandi-secondary\">Â∑≤Á¢∫Ë™ç</div>\n          </div>\n          <div className=\"bg-morandi-container p-4 rounded-lg\">\n            <div className=\"text-2xl font-bold text-morandi-gold\">\n              {mockDocuments.filter(doc => doc.status.includes('ÂæÖ')).length}\n            </div>\n            <div className=\"text-sm text-morandi-secondary\">ÂæÖËôïÁêÜ</div>\n          </div>\n          <div className=\"bg-morandi-container p-4 rounded-lg\">\n            <div className=\"text-2xl font-bold text-morandi-primary\">\n              {mockDocuments.filter(doc => doc.signedBy).length}\n            </div>\n            <div className=\"text-sm text-morandi-secondary\">Â∑≤Á∞ΩÁΩ≤</div>\n          </div>\n        </div>\n      </ContentContainer>\n\n      {/* Êñá‰ª∂Êìç‰ΩúÊåâÈàï - Âè≥‰∏äËßí */}\n      <div className=\"flex justify-end gap-2 mb-6\">\n        <Button variant=\"outline\">\n          <Download size={16} className=\"mr-2\" />\n          ÊâπÈáè‰∏ãËºâ\n        </Button>\n        <Button\n          onClick={() => setIsUploadDialogOpen(true)}\n          className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white\"\n        >\n          <Plus size={16} className=\"mr-2\" />\n          ‰∏äÂÇ≥Êñá‰ª∂\n        </Button>\n      </div>\n\n      {/* Êñá‰ª∂ÂàÜÈ°ûÂ±ïÁ§∫ */}\n      <div className=\"space-y-6\">\n        {Object.entries(documentsByType).map(([type, documents]) => (\n          <ContentContainer key={type}>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h4 className=\"text-lg font-medium text-morandi-primary flex items-center\">\n                <FileText size={20} className={`mr-2 ${getTypeColor(type)}`} />\n                {type}Êñá‰ª∂\n                <span className=\"ml-2 text-sm text-morandi-secondary\">\n                  ({documents.length} ÂÄãÊñá‰ª∂)\n                </span>\n              </h4>\n            </div>\n\n            <div className=\"space-y-2\">\n              {documents.map((doc) => {\n                const StatusIcon = getStatusIcon(doc.status)\n                return (\n                  <div\n                    key={doc.id}\n                    className=\"grid grid-cols-12 gap-4 p-4 bg-card border border-border rounded-lg hover:shadow-md transition-shadow\"\n                  >\n                    <div className=\"col-span-3\">\n                      <div className=\"flex items-center\">\n                        <StatusIcon\n                          size={16}\n                          className={\n                            doc.status.includes('Â∑≤')\n                              ? 'text-morandi-green'\n                              : doc.status.includes('ÂæÖ')\n                                ? 'text-morandi-gold'\n                                : 'text-morandi-red'\n                          }\n                        />\n                        <div className=\"ml-2\">\n                          <div className=\"font-medium text-morandi-primary\">{doc.name}</div>\n                          <div className=\"text-xs text-morandi-secondary\">\n                            {doc.format} ‚Ä¢ {doc.size}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"col-span-3\">\n                      <div className=\"text-sm text-morandi-primary\">{doc.description}</div>\n                      {doc.signedBy && (\n                        <div className=\"text-xs text-morandi-secondary\">Á∞ΩÁΩ≤‰∫∫Ôºö{doc.signedBy}</div>\n                      )}\n                    </div>\n\n                    <div className=\"col-span-2\">\n                      <div className=\"text-sm text-morandi-primary\">{doc.uploadDate}</div>\n                    </div>\n\n                    <div className=\"col-span-2\">\n                      <span\n                        className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusBadge(doc.status)}`}\n                      >\n                        {doc.status}\n                      </span>\n                    </div>\n\n                    <div className=\"col-span-2\">\n                      <div className=\"flex gap-1\">\n                        <Button variant=\"outline\" size=\"sm\">\n                          <Eye size={12} className=\"mr-1\" />\n                          È†êË¶Ω\n                        </Button>\n                        <Button variant=\"outline\" size=\"sm\">\n                          <Download size={12} className=\"mr-1\" />\n                          ‰∏ãËºâ\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          </ContentContainer>\n        ))}\n      </div>\n\n      {/* ‰∏äÂÇ≥Êñá‰ª∂Â∞çË©±Ê°Ü */}\n      <Dialog open={isUploadDialogOpen} onOpenChange={setIsUploadDialogOpen}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>‰∏äÂÇ≥Êñá‰ª∂</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium text-morandi-primary\">Êñá‰ª∂ÂêçÁ®±</label>\n              <Input\n                value={newDocument.name}\n                onChange={e => setNewDocument(prev => ({ ...prev, name: e.target.value }))}\n                placeholder=\"Ëº∏ÂÖ•Êñá‰ª∂ÂêçÁ®±\"\n                className=\"mt-1\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-morandi-primary\">Êñá‰ª∂È°ûÂûã</label>\n              <select\n                value={newDocument.type}\n                onChange={e => setNewDocument(prev => ({ ...prev, type: e.target.value }))}\n                className=\"mt-1 w-full p-2 border border-border rounded-md bg-background\"\n              >\n                <option value=\"contract\">ÂêàÁ¥Ñ</option>\n                <option value=\"itinerary\">Ë°åÁ®ã</option>\n                <option value=\"insurance\">‰øùÈö™</option>\n                <option value=\"ticket\">Á•®Âãô</option>\n                <option value=\"accommodation\">‰ΩèÂÆø</option>\n                <option value=\"other\">ÂÖ∂‰ªñ</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-morandi-primary\">Ë™™Êòé</label>\n              <Input\n                value={newDocument.description}\n                onChange={e => setNewDocument(prev => ({ ...prev, description: e.target.value }))}\n                placeholder=\"Êñá‰ª∂Ë™™Êòé\"\n                className=\"mt-1\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium text-morandi-primary mb-2 block\">\n                ÈÅ∏ÊìáÊ™îÊ°à\n              </label>\n              <div className=\"border-2 border-dashed border-morandi-container rounded-lg p-6 text-center\">\n                <Upload size={32} className=\"mx-auto mb-2 text-morandi-secondary\" />\n                <p className=\"text-sm text-morandi-secondary mb-2\">ÊãñÊãΩÊ™îÊ°àÂà∞Ê≠§ËôïÊàñÈªûÊìäÈÅ∏Êìá</p>\n                <Button variant=\"outline\" size=\"sm\">\n                  ÈÅ∏ÊìáÊ™îÊ°à\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end space-x-2\">\n              <Button variant=\"outline\" onClick={() => setIsUploadDialogOpen(false)}>\n                ÂèñÊ∂à\n              </Button>\n              <Button\n                onClick={handleUploadDocument}\n                className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white\"\n              >\n                ‰∏äÂÇ≥\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-handover-print.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-members-advanced.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-members.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-operations.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-orders.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-overview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-payments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/tours/tour-task-assignment.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/transportation/editable-rates-table/components/add-row.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/transportation/editable-rates-table/components/category-group-row.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/transportation/editable-rates-table/components/item-row.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/transportation/editable-rates-table/index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/color-picker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/combobox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/date-input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table/EnhancedTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table/TableBody.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table/TableHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table/TablePagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table/useEnhancedTable.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/enhanced-table/useTableState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/floating-dock.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/input-ime.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/simple-date-input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/star-rating.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/ui/use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/widgets/calculator/calculatorUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/AdvanceListCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/CanvasEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/ChannelChat.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":188,"column":13,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":188,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\n\nimport { Hash } from 'lucide-react'\nimport { ChannelSidebar } from './ChannelSidebar'\nimport { ChannelTabs } from './ChannelTabs'\nimport { useChannelChat } from './channel-chat/useChannelChat'\nimport { ChatHeader } from './channel-chat/ChatHeader'\nimport { ChatMessages } from './channel-chat/ChatMessages'\nimport { DialogsContainer } from './channel-chat/DialogsContainer'\n\nexport function ChannelChat() {\n  const {\n    // State\n    messageText,\n    setMessageText,\n    showMemberSidebar,\n    setShowMemberSidebar,\n    isSwitching,\n\n    // Dialog state\n    showShareQuoteDialog,\n    setShowShareQuoteDialog,\n    showShareTourDialog,\n    setShowShareTourDialog,\n    showNewPaymentDialog,\n    setShowNewPaymentDialog,\n    showNewReceiptDialog,\n    setShowNewReceiptDialog,\n    showNewTaskDialog,\n    setShowNewTaskDialog,\n    showShareAdvanceDialog,\n    setShowShareAdvanceDialog,\n    showShareOrdersDialog,\n    setShowShareOrdersDialog,\n    showCreateReceiptDialog,\n    setShowCreateReceiptDialog,\n    showCreatePaymentDialog,\n    setShowCreatePaymentDialog,\n    showSettingsDialog,\n    setShowSettingsDialog,\n\n    // Selected state\n    selectedOrder,\n    setSelectedOrder,\n    selectedAdvanceItem,\n    setSelectedAdvanceItem,\n    selectedAdvanceListId,\n    setSelectedAdvanceListId,\n\n    // Edit state\n    editChannelName,\n    setEditChannelName,\n    editChannelDescription,\n    setEditChannelDescription,\n\n    // Store data\n    channels,\n    loading,\n    selectedChannel,\n    currentMessages,\n    isMessagesLoading,\n    advanceLists,\n    sharedOrderLists,\n\n    // Store actions\n    loadSharedOrderLists,\n    deleteAdvanceList,\n\n    // Message operations\n    user,\n    attachedFiles,\n    setAttachedFiles,\n    uploadingFiles,\n    uploadProgress,\n    messagesEndRef,\n\n    // Handlers\n    handleSubmitMessage,\n    handleReactionClick,\n    handleDeleteMessageClick,\n    handleChannelSwitch,\n    handleDeleteChannel,\n    handleUpdateChannel,\n  } = useChannelChat()\n\n  if (loading && channels.length === 0) {\n    return (\n      <div className=\"h-full flex items-center justify-center\">\n        <div className=\"animate-spin w-8 h-8 border-2 border-morandi-gold border-t-transparent rounded-full\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"h-full flex overflow-hidden border border-border rounded-lg bg-card shadow-sm\">\n      <ChannelSidebar\n        selectedChannelId={selectedChannel?.id || null}\n        onSelectChannel={handleChannelSwitch}\n      />\n\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        {selectedChannel ? (\n          <ChannelTabs\n            channel={selectedChannel}\n            headerActions={\n              <ChatHeader\n                showMemberSidebar={showMemberSidebar}\n                onToggleMemberSidebar={() => setShowMemberSidebar(!showMemberSidebar)}\n              />\n            }\n          >\n            <ChatMessages\n              messages={currentMessages || []}\n              advanceLists={advanceLists}\n              sharedOrderLists={sharedOrderLists}\n              channelName={selectedChannel.name}\n              currentUserId={user?.id}\n              isLoading={isMessagesLoading}\n              showMemberSidebar={showMemberSidebar}\n              messageText={messageText}\n              attachedFiles={attachedFiles}\n              uploadingFiles={uploadingFiles}\n              uploadProgress={uploadProgress}\n              messagesEndRef={messagesEndRef}\n              onReaction={handleReactionClick}\n              onDeleteMessage={handleDeleteMessageClick}\n              onCreatePayment={(itemId, item) => {\n                setSelectedAdvanceItem(item)\n                setSelectedAdvanceListId(\n                  advanceLists.find(al => al.items?.some(i => i.id === itemId))?.id || ''\n                )\n                setShowCreatePaymentDialog(true)\n              }}\n              onDeleteAdvanceList={deleteAdvanceList}\n              onCreateReceipt={(_orderId, order) => {\n                setSelectedOrder(order)\n                setShowCreateReceiptDialog(true)\n              }}\n              onMessageChange={setMessageText}\n              onSubmit={handleSubmitMessage}\n              onFilesChange={setAttachedFiles}\n              onShowShareOrders={() => setShowShareOrdersDialog(true)}\n              onShowShareQuote={() => setShowShareQuoteDialog(true)}\n              onShowNewPayment={() => setShowNewPaymentDialog(true)}\n              onShowNewReceipt={() => setShowNewReceiptDialog(true)}\n              onShowShareAdvance={() => setShowShareAdvanceDialog(true)}\n              onShowNewTask={() => setShowNewTaskDialog(true)}\n            />\n          </ChannelTabs>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-center\">\n            <div className=\"text-center\">\n              <Hash size={48} className=\"text-morandi-secondary/50 mx-auto mb-4\" />\n              <p className=\"text-morandi-secondary\">ÈÅ∏Êìá‰∏ÄÂÄãÈ†ªÈÅìÈñãÂßãÂ∞çË©±</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <DialogsContainer\n        showShareAdvanceDialog={showShareAdvanceDialog}\n        setShowShareAdvanceDialog={setShowShareAdvanceDialog}\n        selectedChannel={selectedChannel}\n        user={user}\n        showShareOrdersDialog={showShareOrdersDialog}\n        setShowShareOrdersDialog={setShowShareOrdersDialog}\n        onShareOrdersSuccess={() => {\n          setShowShareOrdersDialog(false)\n          if (selectedChannel?.id) {\n            loadSharedOrderLists(selectedChannel.id)\n          }\n        }}\n        showCreateReceiptDialog={showCreateReceiptDialog}\n        setShowCreateReceiptDialog={setShowCreateReceiptDialog}\n        selectedOrder={selectedOrder}\n        setSelectedOrder={setSelectedOrder}\n        showCreatePaymentDialog={showCreatePaymentDialog}\n        setShowCreatePaymentDialog={setShowCreatePaymentDialog}\n        selectedAdvanceItem={selectedAdvanceItem}\n        setSelectedAdvanceItem={setSelectedAdvanceItem}\n        selectedAdvanceListId={selectedAdvanceListId}\n        setSelectedAdvanceListId={setSelectedAdvanceListId}\n        onCreatePaymentSuccess={() => {\n          setShowCreatePaymentDialog(false)\n          setSelectedAdvanceItem(null)\n          setSelectedAdvanceListId('')\n          if (selectedChannel?.id) {\n            advanceLists\n          }\n        }}\n        showSettingsDialog={showSettingsDialog}\n        setShowSettingsDialog={setShowSettingsDialog}\n        editChannelName={editChannelName}\n        setEditChannelName={setEditChannelName}\n        editChannelDescription={editChannelDescription}\n        setEditChannelDescription={setEditChannelDescription}\n        onDeleteChannel={handleDeleteChannel}\n        onUpdateChannel={handleUpdateChannel}\n        showShareQuoteDialog={showShareQuoteDialog}\n        setShowShareQuoteDialog={setShowShareQuoteDialog}\n        showShareTourDialog={showShareTourDialog}\n        setShowShareTourDialog={setShowShareTourDialog}\n        showNewPaymentDialog={showNewPaymentDialog}\n        setShowNewPaymentDialog={setShowNewPaymentDialog}\n        showNewReceiptDialog={showNewReceiptDialog}\n        setShowNewReceiptDialog={setShowNewReceiptDialog}\n        showNewTaskDialog={showNewTaskDialog}\n        setShowNewTaskDialog={setShowNewTaskDialog}\n      />\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/ChannelSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/ChannelTabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/CreatePaymentRequestDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/CreateReceiptDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/OrderListCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/ShareAdvanceDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/ShareOrdersDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/ShareTodoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/canvas/canvas-editor/CanvasEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/canvas/canvas-editor/EditorContent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/canvas/canvas-editor/EditorToolbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/canvas/canvas-editor/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/canvas/canvas-editor/useCanvasEditor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/canvas/shared/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/canvas/shared/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/canvas/shared/useCanvasState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/ChatHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/ChatMessages.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/DialogsContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/hooks/useChannelEditState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/hooks/useChannelEffects.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":24,"column":5,"severity":1,"nodeType":null,"fix":{"range":[731,786],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":33,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1042,1097],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":49,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1458,1513],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"import { useEffect } from 'react'\nimport type { Channel, Workspace } from '@/stores/workspace-store'\nimport { DEFAULT_CHANNEL_NAME } from '../constants'\n\n/**\n * ÁÆ°ÁêÜÈ†ªÈÅìÁõ∏ÈóúÁöÑÂâØ‰ΩúÁî®\n * ÂåÖÊã¨ËºâÂÖ•È†ªÈÅì„ÄÅÈÅ∏ÊìáÈ†êË®≠È†ªÈÅì„ÄÅËºâÂÖ•È†ªÈÅìË≥áÊñôÁ≠â\n */\nexport function useChannelEffects(\n  currentWorkspace: Workspace | null,\n  channels: Channel[],\n  selectedChannel: Channel | null,\n  loadChannels: (workspaceId: string) => Promise<void>,\n  selectChannel: (channel: Channel | null) => void,\n  loadMessages: (channelId: string) => Promise<void>,\n  loadAdvanceLists: (channelId: string) => Promise<void>,\n  loadSharedOrderLists: (channelId: string) => Promise<void>\n) {\n  // ËºâÂÖ•È†ªÈÅìÂàóË°®\n  useEffect(() => {\n    if (currentWorkspace?.id) {\n      loadChannels(currentWorkspace.id)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentWorkspace?.id])\n\n  // ÈÅ∏ÊìáÈ†êË®≠È†ªÈÅì\n  useEffect(() => {\n    if (channels.length > 0 && !selectedChannel) {\n      const defaultChannel = channels.find(c => c.name === DEFAULT_CHANNEL_NAME) || channels[0]\n      selectChannel(defaultChannel)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [channels.length, selectedChannel?.id])\n\n  // ËºâÂÖ•È†ªÈÅìË≥áÊñôÔºàË®äÊÅØ„ÄÅ‰ª£Â¢äÊ∏ÖÂñÆ„ÄÅË®ÇÂñÆÊ∏ÖÂñÆÔºâ\n  useEffect(() => {\n    if (!selectedChannel?.id) {\n      return\n    }\n\n    Promise.all([\n      loadMessages(selectedChannel.id),\n      loadAdvanceLists(selectedChannel.id),\n      loadSharedOrderLists(selectedChannel.id),\n    ]).catch(error => {\n      // Silent error handling\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedChannel?.id])\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/hooks/useChannelOperations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/hooks/useDialogStates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/hooks/useMessageHandlers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/hooks/useSelectionState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-chat/useChannelChat.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/ChannelList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/ChannelListSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/ChannelSidebar.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":127,"column":5,"severity":1,"nodeType":null,"fix":{"range":[3674,3729],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport { logger } from '@/lib/utils/logger'\nimport { useEffect } from 'react'\nimport { arrayMove } from '@dnd-kit/sortable'\nimport type { DragEndEvent } from '@dnd-kit/core'\nimport { useAuthStore } from '@/stores/auth-store'\nimport { removeChannelMember } from '@/services/workspace-members'\nimport { useWorkspaceChannels, useWorkspaceMembers } from '@/stores/workspace-store'\nimport { useChannelMemberStore } from '@/stores/workspace/channel-member-store'\nimport type { Channel, ChannelGroup } from '@/stores/workspace/types'\nimport type { ChannelSidebarProps } from './types'\nimport { useChannelSidebar } from './useChannelSidebar'\nimport { useChannelState } from './hooks/useChannelState'\nimport {\n  MemberManagementDialog,\n  ChannelDeleteDialog,\n  GroupDeleteDialog,\n} from './MemberManagementDialog'\nimport { WorkspaceHeader } from './WorkspaceHeader'\nimport { CreateGroupDialog } from './CreateGroupDialog'\nimport { CreateChannelDialog } from './CreateChannelDialog'\nimport { EditChannelDialog } from './EditChannelDialog'\nimport { ChannelList } from './ChannelList'\n\nexport function ChannelSidebar({ selectedChannelId, onSelectChannel }: ChannelSidebarProps) {\n  // Use selective hooks for better performance\n  const {\n    channels,\n    channelGroups,\n    currentWorkspace,\n    searchQuery,\n    channelFilter,\n    setSearchQuery,\n    setChannelFilter,\n    createChannelGroup,\n    toggleGroupCollapse,\n    updateChannelOrder,\n    updateChannel,\n    deleteChannel,\n    deleteChannelGroup,\n    createChannel,\n    loadChannels,\n    loading,\n  } = useWorkspaceChannels()\n\n  const { channelMembers, loadChannelMembers } = useWorkspaceMembers()\n\n  const { user } = useAuthStore()\n\n  // üî• ËºâÂÖ•ÊâÄÊúâÈ†ªÈÅìÊàêÂì°Ë≥áÊñôÔºàÁî®ÊñºÊ™¢Êü•ÊòØÂê¶Â∑≤Âä†ÂÖ•È†ªÈÅìÔºâ\n  const allChannelMembers = useChannelMemberStore(state => state.items)\n\n  // Use the new state hook\n  const {\n    showNewGroupDialog,\n    setShowNewGroupDialog,\n    newGroupName,\n    setNewGroupName,\n    memberToRemove,\n    isRemoveDialogOpen,\n    isRemovingMember,\n    setIsRemovingMember,\n    openRemoveMemberDialog,\n    closeRemoveMemberDialog,\n    channelToDelete,\n    isDeleteDialogOpen,\n    isDeletingChannel,\n    setIsDeletingChannel,\n    openDeleteChannelDialog,\n    closeDeleteChannelDialog,\n    groupToDelete,\n    isGroupDeleteDialogOpen,\n    isDeletingGroup,\n    setIsDeletingGroup,\n    openDeleteGroupDialog,\n    closeDeleteGroupDialog,\n    showCreateChannelDialog,\n    setShowCreateChannelDialog,\n    newChannelName,\n    setNewChannelName,\n    newChannelDescription,\n    setNewChannelDescription,\n    newChannelType,\n    setNewChannelType,\n    selectedMembers,\n    setSelectedMembers,\n    resetCreateChannelDialog,\n    showEditChannelDialog,\n    channelToEdit,\n    editChannelName,\n    setEditChannelName,\n    editChannelDescription,\n    setEditChannelDescription,\n    openEditChannelDialog,\n    resetEditChannelDialog,\n  } = useChannelState()\n\n  const { expandedSections, setExpandedSections, filteredChannels } = useChannelSidebar(\n    channels,\n    searchQuery,\n    channelFilter\n  )\n\n  // üî• ËºâÂÖ•ÊâÄÊúâÈ†ªÈÅìÊàêÂì°Ë≥áÊñôÔºàÁî®ÊñºÊ™¢Êü•ÊòØÂê¶Â∑≤Âä†ÂÖ•Ôºâ\n  useEffect(() => {\n    if (!currentWorkspace) return\n\n    // ËºâÂÖ• channel_members storeÔºàÂåÖÂê´ÊâÄÊúâÈ†ªÈÅìÁöÑÊàêÂì°Ë≥áÊñôÔºâ\n    useChannelMemberStore.getState().fetchAll()\n  }, [currentWorkspace?.id])\n\n  // üî• ÈñãÂïüÂª∫Á´ãÈ†ªÈÅìÂ∞çË©±Ê°ÜÊôÇÔºåËá™ÂãïÈÅ∏‰∏≠Âª∫Á´ãËÄÖ\n  useEffect(() => {\n    if (showCreateChannelDialog && user?.id && !selectedMembers.includes(user.id)) {\n      setSelectedMembers([user.id])\n    }\n  }, [showCreateChannelDialog, user?.id])\n\n  // Load channel members when selectedChannelId changes\n  useEffect(() => {\n    if (!selectedChannelId || !currentWorkspace) {\n      return\n    }\n\n    void loadChannelMembers(currentWorkspace.id, selectedChannelId)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedChannelId, currentWorkspace?.id])\n\n  const handleRemoveMember = async () => {\n    if (!memberToRemove || !selectedChannelId || !currentWorkspace) {\n      return\n    }\n\n    setIsRemovingMember(true)\n    try {\n      await removeChannelMember(currentWorkspace.id, selectedChannelId, memberToRemove.id)\n      closeRemoveMemberDialog()\n    } catch (error) {\n    } finally {\n      setIsRemovingMember(false)\n    }\n  }\n\n  const handleDeleteChannel = async () => {\n    if (!channelToDelete) {\n      return\n    }\n\n    setIsDeletingChannel(true)\n    try {\n      await deleteChannel(channelToDelete.id)\n      closeDeleteChannelDialog()\n    } catch (error) {\n    } finally {\n      setIsDeletingChannel(false)\n    }\n  }\n\n  const handleDeleteGroup = async () => {\n    if (!groupToDelete) {\n      return\n    }\n\n    setIsDeletingGroup(true)\n    try {\n      await deleteChannelGroup(groupToDelete.id)\n      closeDeleteGroupDialog()\n    } catch (error) {\n    } finally {\n      setIsDeletingGroup(false)\n    }\n  }\n\n  const handleDeleteGroupClick = (groupId: string) => {\n    const group = channelGroups.find((g: ChannelGroup) => g.id === groupId)\n    if (group) {\n      openDeleteGroupDialog(group)\n    }\n  }\n\n  const handleDeleteClick = (channelId: string) => {\n    const channel = channels.find((ch: Channel) => ch.id === channelId)\n    if (channel) {\n      openDeleteChannelDialog(channel)\n    }\n  }\n\n  const handleJoinChannel = async (channelId: string) => {\n    if (!user || !currentWorkspace) return\n\n    try {\n      const { addChannelMembers } = await import('@/services/workspace-members')\n      await addChannelMembers(currentWorkspace.id, channelId, [user.id], 'member')\n\n      // üî• ÈáçÊñ∞ËºâÂÖ•È†ªÈÅìÊàêÂì°ÂàóË°®\n      await loadChannelMembers(currentWorkspace.id, channelId)\n\n      // üî• ÈáçÊñ∞ËºâÂÖ• channel_members storeÔºàÊõ¥Êñ∞ÊàêÂì°Êï∏ÈáèÔºâ\n      const { useChannelMemberStore } = await import('@/stores/workspace/channel-member-store')\n      await useChannelMemberStore.getState().fetchAll()\n\n      // üî• ÈáçÊñ∞ËºâÂÖ•È†ªÈÅìÂàóË°®ÔºàÊõ¥Êñ∞ÂÅ¥ÈÇäÊ¨ÑÁöÑ„ÄåÊú™Âä†ÂÖ•„ÄçÁãÄÊÖãÔºâ\n      await loadChannels(currentWorkspace.id)\n    } catch (error) {\n      logger.error('Failed to join channel:', error)\n    }\n  }\n\n  const handleLeaveChannel = async (channelId: string) => {\n    if (!user || !currentWorkspace) return\n\n    const channel = channels.find((ch: Channel) => ch.id === channelId)\n    if (!channel) return\n\n    const confirmed = confirm(`Á¢∫ÂÆöË¶ÅÈõ¢Èñã #${channel.name} È†ªÈÅìÂóéÔºü`)\n    if (!confirmed) return\n\n    try {\n      const members = channelMembers[channelId] || []\n      const currentMember = members.find(m => m.employeeId === user.id)\n\n      if (currentMember) {\n        await removeChannelMember(currentWorkspace.id, channelId, currentMember.id)\n\n        // üî• ÈáçÊñ∞ËºâÂÖ•È†ªÈÅìÊàêÂì°ÂàóË°®\n        await loadChannelMembers(currentWorkspace.id, channelId)\n\n        // üî• ÈáçÊñ∞ËºâÂÖ• channel_members storeÔºàÊõ¥Êñ∞ÊàêÂì°Êï∏ÈáèÔºâ\n        const { useChannelMemberStore } = await import('@/stores/workspace/channel-member-store')\n        await useChannelMemberStore.getState().fetchAll()\n\n        // üî• ÈáçÊñ∞ËºâÂÖ•È†ªÈÅìÂàóË°®ÔºàÊõ¥Êñ∞ÂÅ¥ÈÇäÊ¨ÑÁöÑ„ÄåÊú™Âä†ÂÖ•„ÄçÁãÄÊÖãÔºâ\n        await loadChannels(currentWorkspace.id)\n      }\n    } catch (error) {\n      logger.error('Failed to leave channel:', error)\n    }\n  }\n\n  const toggleChannelPin = async (channelId: string) => {\n    const channel = channels.find((ch: Channel) => ch.id === channelId)\n    if (!channel) return\n\n    try {\n      await updateChannel(channelId, {\n        is_favorite: !channel.is_favorite,\n      })\n    } catch (error) {\n      logger.error('Failed to toggle pin:', error)\n    }\n  }\n\n  const handleEditClick = (channelId: string) => {\n    const channel = channels.find((ch: Channel) => ch.id === channelId)\n    if (channel) {\n      openEditChannelDialog(channel)\n    }\n  }\n\n  const handleEditChannel = async () => {\n    if (!channelToEdit || !editChannelName.trim()) return\n\n    try {\n      await updateChannel(channelToEdit.id, {\n        name: editChannelName.trim(),\n        description: editChannelDescription.trim() || undefined,\n      })\n      resetEditChannelDialog()\n    } catch (error) {\n      logger.error('Failed to update channel:', error)\n    }\n  }\n\n  const handleDragEnd = async (event: DragEndEvent) => {\n    const { active, over } = event\n\n    if (!over || active.id === over.id) {\n      return\n    }\n\n    const draggedChannelId = active.id as string\n    const draggedChannel = channels.find((ch: Channel) => ch.id === draggedChannelId)\n\n    if (!draggedChannel) {\n      return\n    }\n\n    const targetGroup = channelGroups.find((g: ChannelGroup) => g.id === over.id)\n\n    if (targetGroup) {\n      await updateChannel(draggedChannelId, {\n        group_id: targetGroup.id,\n        is_favorite: false,\n      })\n      return\n    }\n\n    const targetChannel = channels.find((ch: Channel) => ch.id === over.id)\n\n    if (targetChannel) {\n      const bothHaveNoGroup = !draggedChannel.group_id && !targetChannel.group_id\n      const sameGroup = draggedChannel.group_id === targetChannel.group_id\n\n      if (!bothHaveNoGroup && !sameGroup) {\n        if (!targetChannel.group_id) {\n          await updateChannel(draggedChannelId, {\n            group_id: null,\n            is_favorite: false,\n          })\n        } else {\n          const targetGroupExists = channelGroups.find((g: ChannelGroup) => g.id === targetChannel.group_id)\n          if (targetGroupExists) {\n            await updateChannel(draggedChannelId, {\n              group_id: targetChannel.group_id,\n              is_favorite: false,\n            })\n          }\n        }\n      } else {\n        const groupChannels = channels.filter(\n          (ch: Channel) =>\n            (bothHaveNoGroup ? !ch.group_id : ch.group_id === draggedChannel.group_id) &&\n            ch.is_favorite === draggedChannel.is_favorite\n        )\n\n        const oldIndex = groupChannels.findIndex((ch: Channel) => ch.id === draggedChannelId)\n        const newIndex = groupChannels.findIndex((ch: Channel) => ch.id === over.id)\n\n        if (oldIndex !== -1 && newIndex !== -1) {\n          const reorderedChannels = arrayMove(groupChannels, oldIndex, newIndex)\n\n          for (let i = 0; i < reorderedChannels.length; i++) {\n            await updateChannelOrder(reorderedChannels[i].id, i)\n          }\n        }\n      }\n    }\n  }\n\n  const isAdmin = user?.permissions?.includes('admin') ?? false\n\n  const checkIsMember = (channelId: string): boolean => {\n    // üî• ÂÑ™ÂÖà‰ΩøÁî® channel_members storeÔºàÂåÖÂê´ÊâÄÊúâÈ†ªÈÅìÁöÑÊàêÂì°Ë≥áÊñôÔºâ\n    if (allChannelMembers.length > 0) {\n      return allChannelMembers.some(\n        m => m.channel_id === channelId && m.employee_id === user?.id\n      )\n    }\n\n    // Fallback: ‰ΩøÁî®Áï∂ÂâçËºâÂÖ•ÁöÑÈ†ªÈÅìÊàêÂì°ÂàóË°®\n    const members = channelMembers[channelId] || []\n    return members.some(m => m.employeeId === user?.id)\n  }\n\n  // Helper function: sort channels by pinned and name\n  const sortChannels = (channels: Channel[]) => {\n    return [...channels].sort((a: Channel, b: Channel) => {\n      if (a.is_pinned && !b.is_pinned) return -1\n      if (!a.is_pinned && b.is_pinned) return 1\n      return a.name.localeCompare(b.name, 'zh-TW')\n    })\n  }\n\n  // 1. Company announcements (system group, fixed at top)\n  const announcementGroup = channelGroups.find(\n    (g: ChannelGroup) => g.is_system && g.system_type === 'company_announcements'\n  )\n  const announcementChannels = announcementGroup\n    ? sortChannels(\n        filteredChannels.filter((ch: Channel) => ch.group_id === announcementGroup.id && !ch.is_archived)\n      )\n    : []\n\n  // 2. User-defined groups (exclude archived)\n  const userGroups = channelGroups\n    .filter((g: ChannelGroup) => !g.is_system)\n    .sort((a: ChannelGroup, b: ChannelGroup) => (a.order || 0) - (b.order || 0))\n  const userGroupedChannels = userGroups.map((group: ChannelGroup) => ({\n    group,\n    channels: sortChannels(\n      filteredChannels.filter(\n        ch => ch.group_id === group.id && !ch.is_archived && checkIsMember(ch.id)\n      )\n    ),\n  }))\n\n  // 3. Ungrouped channels (joined but not grouped, exclude archived)\n  const ungroupedChannels = sortChannels(\n    filteredChannels.filter((ch: Channel) => !ch.group_id && !ch.is_archived && checkIsMember(ch.id))\n  )\n\n  // 4. Unjoined channels (public + not joined, exclude archived)\n  const unjoinedChannels = sortChannels(\n    filteredChannels.filter((ch: Channel) => ch.type === 'public' && !ch.is_archived && !checkIsMember(ch.id))\n  )\n\n  // 5. Archived (system group, fixed at bottom)\n  const archivedGroup = channelGroups.find((g: ChannelGroup) => g.is_system && g.system_type === 'archived')\n  const archivedChannels = archivedGroup\n    ? sortChannels(\n        filteredChannels.filter((ch: Channel) => ch.is_archived || ch.group_id === archivedGroup.id)\n      )\n    : []\n\n  const handleCreateGroup = () => {\n    if (newGroupName.trim() && currentWorkspace) {\n      createChannelGroup({\n        workspace_id: currentWorkspace.id,\n        name: newGroupName.trim(),\n        is_collapsed: false,\n        order: channelGroups.length,\n      })\n      setNewGroupName('')\n      setShowNewGroupDialog(false)\n    }\n  }\n\n  const handleCreateChannel = async () => {\n    if (!newChannelName.trim() || !currentWorkspace || !user || selectedMembers.length === 0) {\n      return\n    }\n\n    try {\n      // Âª∫Á´ãÈ†ªÈÅìÔºàÁµ±‰∏ÄÁÇ∫ privateÔºåÂè™ÊúâË¢´ÈÇÄË´ãÁöÑ‰∫∫ÁúãÂæóÂà∞Ôºâ\n      const newChannel = await createChannel({\n        workspace_id: currentWorkspace.id,\n        name: newChannelName.trim(),\n        description: newChannelDescription.trim() || undefined,\n        type: 'private', // üî• Áµ±‰∏ÄÁÇ∫ÁßÅÂØÜÈ†ªÈÅì\n        created_by: user.id,\n      })\n\n      // üî• ÊâπÊ¨°Âä†ÂÖ•ÈÅ∏‰∏≠ÁöÑÊàêÂì°\n      if (newChannel?.id) {\n        try {\n          const channelMemberStore = useChannelMemberStore.getState()\n\n          // ÊâπÊ¨°Âª∫Á´ãÊàêÂì°\n          const memberPromises = selectedMembers.map(async (employeeId) => {\n            return channelMemberStore.create({\n              workspace_id: currentWorkspace.id,\n              channel_id: newChannel.id,\n              employee_id: employeeId,\n              role: employeeId === user.id ? 'owner' : 'member', // Âª∫Á´ãËÄÖÊòØ owner\n              status: 'active',\n            })\n          })\n\n          await Promise.all(memberPromises)\n          logger.log(`‚úÖ Added ${selectedMembers.length} members to channel`)\n\n          // üî• ÈáçÊñ∞ËºâÂÖ• channel_members store\n          await channelMemberStore.fetchAll()\n        } catch (memberError) {\n          logger.warn('‚ö†Ô∏è Failed to add members:', memberError)\n        }\n      }\n\n      resetCreateChannelDialog()\n    } catch (error) {\n      logger.error('Failed to create channel:', error)\n      alert('Âª∫Á´ãÈ†ªÈÅìÂ§±Êïó')\n    }\n  }\n\n  return (\n    <div className=\"w-[280px] bg-white border-r border-morandi-gold/20 flex flex-col shrink-0\">\n      {/* Workspace header */}\n      <WorkspaceHeader\n        workspaceName={currentWorkspace?.name || ''}\n        workspaceIcon={currentWorkspace?.icon || ''}\n        channelFilter={channelFilter}\n        onFilterChange={setChannelFilter}\n        onCreateChannel={() => setShowCreateChannelDialog(true)}\n        onCreateGroup={() => setShowNewGroupDialog(true)}\n        onRefresh={() => currentWorkspace?.id && loadChannels(currentWorkspace.id)}\n        isRefreshing={loading}\n      />\n\n      {/* Search input */}\n      <div className=\"px-4 py-2\">\n        <input\n          type=\"text\"\n          placeholder=\"ÊêúÂ∞ãÈ†ªÈÅì...\"\n          value={searchQuery}\n          onChange={e => setSearchQuery(e.target.value)}\n          className=\"h-8 text-sm\"\n        />\n      </div>\n\n      {/* Channel list */}\n      <ChannelList\n        announcementChannels={announcementChannels}\n        announcementGroup={announcementGroup}\n        userGroupedChannels={userGroupedChannels}\n        ungroupedChannels={ungroupedChannels}\n        unjoinedChannels={unjoinedChannels}\n        archivedChannels={archivedChannels}\n        archivedGroup={archivedGroup}\n        selectedChannelId={selectedChannelId}\n        isAdmin={isAdmin}\n        expandedSections={expandedSections}\n        onSelectChannel={onSelectChannel}\n        toggleChannelFavorite={toggleChannelPin}\n        onDelete={handleDeleteClick}\n        onEdit={handleEditClick}\n        onJoinChannel={handleJoinChannel}\n        onLeaveChannel={handleLeaveChannel}\n        checkIsMember={checkIsMember}\n        toggleGroupCollapse={toggleGroupCollapse}\n        handleDeleteGroupClick={handleDeleteGroupClick}\n        onToggleExpanded={(section: string, expanded: boolean) => {\n          setExpandedSections(prev => ({ ...prev, [section]: expanded }))\n        }}\n        onDragEnd={handleDragEnd}\n      />\n\n      {/* Dialogs */}\n      <CreateGroupDialog\n        isOpen={showNewGroupDialog}\n        groupName={newGroupName}\n        onGroupNameChange={setNewGroupName}\n        onClose={() => setShowNewGroupDialog(false)}\n        onCreate={handleCreateGroup}\n      />\n\n      <CreateChannelDialog\n        isOpen={showCreateChannelDialog}\n        channelName={newChannelName}\n        channelDescription={newChannelDescription}\n        channelType={newChannelType}\n        selectedMembers={selectedMembers}\n        onChannelNameChange={setNewChannelName}\n        onChannelDescriptionChange={setNewChannelDescription}\n        onChannelTypeChange={setNewChannelType}\n        onMembersChange={setSelectedMembers}\n        onClose={resetCreateChannelDialog}\n        onCreate={handleCreateChannel}\n      />\n\n      <EditChannelDialog\n        isOpen={showEditChannelDialog}\n        channelName={editChannelName}\n        channelDescription={editChannelDescription}\n        onChannelNameChange={setEditChannelName}\n        onChannelDescriptionChange={setEditChannelDescription}\n        onClose={resetEditChannelDialog}\n        onSave={handleEditChannel}\n      />\n\n      <MemberManagementDialog\n        memberToRemove={memberToRemove}\n        isRemoveDialogOpen={isRemoveDialogOpen}\n        isRemovingMember={isRemovingMember}\n        onClose={closeRemoveMemberDialog}\n        onRemove={handleRemoveMember}\n      />\n\n      <ChannelDeleteDialog\n        channelToDelete={channelToDelete}\n        isDeleteDialogOpen={isDeleteDialogOpen}\n        isDeletingChannel={isDeletingChannel}\n        onClose={closeDeleteChannelDialog}\n        onDelete={handleDeleteChannel}\n      />\n\n      <GroupDeleteDialog\n        groupToDelete={groupToDelete}\n        isDeleteDialogOpen={isGroupDeleteDialogOpen}\n        isDeletingGroup={isDeletingGroup}\n        onClose={closeDeleteGroupDialog}\n        onDelete={handleDeleteGroup}\n      />\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/CreateChannelDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/CreateGroupDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/DroppableGroupHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/EditChannelDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/MemberManagementDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/SortableChannelItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/WorkspaceHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/hooks/useChannelState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/channel-sidebar/useChannelSidebar.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/FilePreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/MemberSidebar.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":32,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1179,1234],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport { useEffect, useState, useMemo } from 'react'\nimport { useWorkspaceChannels } from '@/stores/workspace-store'\nimport { useChannelMemberStore } from '@/stores/workspace/channel-member-store'\nimport { useUserStore, useAuthStore } from '@/stores'\nimport { User, UserPlus, X } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\n\ninterface MemberSidebarProps {\n  isOpen: boolean\n}\n\nexport function MemberSidebar({ isOpen }: MemberSidebarProps) {\n  const { selectedChannel, currentWorkspace } = useWorkspaceChannels()\n  const { items: channelMembers, fetchAll: fetchChannelMembers, create: addMember } = useChannelMemberStore()\n  const { items: employees, fetchAll: fetchEmployees } = useUserStore()\n  const { user } = useAuthStore()\n  const [showAddMemberDialog, setShowAddMemberDialog] = useState(false)\n  const [selectedEmployees, setSelectedEmployees] = useState<string[]>([])\n  const [searchQuery, setSearchQuery] = useState('')\n  const [isAdding, setIsAdding] = useState(false)\n\n  // ËºâÂÖ•È†ªÈÅìÊàêÂì°ÂíåÂì°Â∑•Ë≥áÊñô\n  useEffect(() => {\n    if (isOpen) {\n      fetchChannelMembers()\n      if (employees.length === 0) {\n        fetchEmployees()\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen])\n\n  // Ë®àÁÆóÁï∂ÂâçÈ†ªÈÅìÁöÑÊàêÂì°ÔºàÂê´Âì°Â∑•Ë≥áÊñôÔºâ\n  const members = useMemo(() => {\n    if (!selectedChannel?.id) return []\n\n    return channelMembers\n      .filter(m => m.channel_id === selectedChannel.id && m.status === 'active')\n      .map(member => {\n        const employee = employees.find(emp => emp.id === member.employee_id)\n        return {\n          id: member.id,\n          employeeId: member.employee_id,\n          role: member.role,\n          status: member.status,\n          profile: employee ? {\n            displayName: employee.display_name,\n            englishName: employee.english_name,\n            email: employee.personal_info?.email,\n            status: employee.status,\n          } : null,\n        }\n      })\n  }, [channelMembers, employees, selectedChannel?.id])\n\n  const memberEmployeeIds = new Set(members.map(m => m.employeeId))\n\n  // üîê Ê¨äÈôêÈ©óË≠âÔºöÊ™¢Êü•Áï∂ÂâçÁî®Êà∂Âú®Ê≠§È†ªÈÅìÁöÑËßíËâ≤\n  const currentUserMember = members.find(m => m.employeeId === user?.id)\n  const currentUserRole = currentUserMember?.role\n  const canManageMembers = currentUserRole === 'owner' || currentUserRole === 'admin'\n\n  // ÈÅéÊøæÂá∫ÈÇÑ‰∏çÊòØÊàêÂì°ÁöÑÂì°Â∑•\n  const availableEmployees = employees.filter(emp => {\n    // 1. ÊéíÈô§Â∑≤Á∂ìÊòØÊàêÂì°ÁöÑ\n    if (memberEmployeeIds.has(emp.id)) return false\n\n    // 2. Âè™È°ØÁ§∫Ê¥ªË∫çÁãÄÊÖã\n    if (emp.status !== 'active') return false\n\n    // 3. üî• Âè™È°ØÁ§∫ÁúüÊ≠£ÁöÑ„ÄåÂì°Â∑•„ÄçÔºàÊúâ employee ËßíËâ≤Ê®ôÁ±§Ôºâ\n    // Êú™‰æÜÂèØËÉΩÊúÉÊúâÂÆ¢Êà∂„ÄÅË®™ÂÆ¢Á≠âÈùûÂì°Â∑•Â∏≥ËôüÔºåÈÄôË£°ÈúÄË¶ÅÈÅéÊøæ\n    const isEmployee = emp.roles?.includes('employee') || emp.roles?.includes('admin')\n    if (!isEmployee) return false\n\n    // 4. ÊêúÂ∞ãÈÅéÊøæ\n    if (searchQuery !== '') {\n      const query = searchQuery.toLowerCase()\n      return (\n        emp.display_name.toLowerCase().includes(query) ||\n        emp.english_name?.toLowerCase().includes(query) ||\n        emp.employee_number.toLowerCase().includes(query)\n      )\n    }\n\n    return true\n  })\n\n  const handleAddMembers = async () => {\n    if (!selectedChannel || !currentWorkspace || selectedEmployees.length === 0) return\n\n    setIsAdding(true)\n    try {\n      // ‰ΩøÁî® Store ÊâπÊ¨°Êñ∞Â¢ûÊàêÂì°\n      for (const employeeId of selectedEmployees) {\n        await addMember({\n          workspace_id: currentWorkspace.id,\n          channel_id: selectedChannel.id,\n          employee_id: employeeId,\n          role: 'member',\n          status: 'active',\n        })\n      }\n\n      // ÈáçÊñ∞ËºâÂÖ•ÊàêÂì°ÂàóË°®\n      await fetchChannelMembers()\n\n      // ÈáçÁΩÆÁãÄÊÖã\n      setSelectedEmployees([])\n      setSearchQuery('')\n      setShowAddMemberDialog(false)\n    } catch (error) {\n      alert('Êñ∞Â¢ûÊàêÂì°Â§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶')\n    } finally {\n      setIsAdding(false)\n    }\n  }\n\n  const toggleEmployeeSelection = (employeeId: string) => {\n    setSelectedEmployees(prev =>\n      prev.includes(employeeId) ? prev.filter(id => id !== employeeId) : [...prev, employeeId]\n    )\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"w-64 border-l border-border bg-white flex flex-col shrink-0\">\n      <div className=\"p-4 border-b border-border\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"font-medium text-morandi-primary\">ÊàêÂì°ÂàóË°®</h3>\n          {canManageMembers && (\n            <button\n              onClick={() => setShowAddMemberDialog(true)}\n              className=\"p-1.5 rounded-md hover:bg-morandi-gold/10 text-morandi-gold transition-colors\"\n              title=\"Êñ∞Â¢ûÊàêÂì°\"\n            >\n              <UserPlus size={16} />\n            </button>\n          )}\n        </div>\n        <p className=\"text-xs text-morandi-secondary\">\n          {members.length} ‰ΩçÊàêÂì°\n          {currentUserRole && (\n            <span className=\"ml-2 text-morandi-gold\">\n              ¬∑ ‰Ω†ÁöÑËßíËâ≤Ôºö\n              {currentUserRole === 'owner'\n                ? 'ÊìÅÊúâËÄÖ'\n                : currentUserRole === 'admin'\n                  ? 'ÁÆ°ÁêÜÂì°'\n                  : currentUserRole === 'manager'\n                    ? 'Á∂ìÁêÜ'\n                    : currentUserRole === 'member'\n                      ? 'ÊàêÂì°'\n                      : 'Ë®™ÂÆ¢'}\n            </span>\n          )}\n        </p>\n      </div>\n      <div className=\"flex-1 overflow-y-auto p-2\">\n        {members.length === 0 ? (\n          <div className=\"text-center text-morandi-secondary text-sm py-8\">\n            <User size={32} className=\"mx-auto mb-2 opacity-50\" />\n            <p>Ê≠§È†ªÈÅìÁõÆÂâçÊ≤íÊúâÊàêÂì°</p>\n          </div>\n        ) : (\n          <div className=\"space-y-1\">\n            {members.map(member => (\n              <div\n                key={member.id}\n                className=\"flex items-center gap-2 p-2 rounded hover:bg-morandi-container/10 transition-colors\"\n              >\n                <div className=\"w-8 h-8 rounded-full bg-morandi-gold/20 flex items-center justify-center text-xs font-medium text-morandi-primary\">\n                  {member.profile?.displayName?.[0]?.toUpperCase() || 'M'}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-morandi-primary truncate\">\n                    {member.profile?.displayName || member.profile?.englishName || 'Êú™Áü•ÊàêÂì°'}\n                  </p>\n                  <p className=\"text-xs text-morandi-secondary truncate\">{member.role || 'ÊàêÂì°'}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Êñ∞Â¢ûÊàêÂì°Â∞çË©±Ê°Ü */}\n      {showAddMemberDialog && (\n        <div\n          className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\n          onClick={() => setShowAddMemberDialog(false)}\n        >\n          <div\n            className=\"bg-white rounded-lg shadow-xl w-full max-w-md mx-4\"\n            onClick={e => e.stopPropagation()}\n          >\n            {/* Ê®ôÈ°åÂàó */}\n            <div className=\"flex items-center justify-between p-4 border-b border-border\">\n              <h3 className=\"font-semibold text-morandi-primary\">Êñ∞Â¢ûÊàêÂì°Âà∞È†ªÈÅì</h3>\n              <button\n                onClick={() => setShowAddMemberDialog(false)}\n                className=\"p-1 rounded-md hover:bg-morandi-container/10 transition-colors\"\n              >\n                <X size={18} />\n              </button>\n            </div>\n\n            {/* ÊêúÂ∞ãÊ°Ü */}\n            <div className=\"p-4 border-b border-border\">\n              <input\n                type=\"text\"\n                placeholder=\"ÊêúÂ∞ãÂì°Â∑•ÂßìÂêçÊàñÁ∑®Ëôü...\"\n                value={searchQuery}\n                onChange={e => setSearchQuery(e.target.value)}\n                className=\"w-full px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-morandi-gold/20 text-sm\"\n              />\n            </div>\n\n            {/* Âì°Â∑•ÂàóË°® */}\n            <div className=\"max-h-96 overflow-y-auto p-2\">\n              {availableEmployees.length === 0 ? (\n                <div className=\"text-center text-morandi-secondary text-sm py-8\">\n                  <User size={32} className=\"mx-auto mb-2 opacity-50\" />\n                  <p>Ê≤íÊúâÂèØÊñ∞Â¢ûÁöÑÂì°Â∑•</p>\n                </div>\n              ) : (\n                <div className=\"space-y-1\">\n                  {availableEmployees.map(employee => (\n                    <div\n                      key={employee.id}\n                      onClick={() => toggleEmployeeSelection(employee.id)}\n                      className={`flex items-center gap-3 p-3 rounded-md cursor-pointer transition-colors ${\n                        selectedEmployees.includes(employee.id)\n                          ? 'bg-morandi-gold/10 border border-morandi-gold/30'\n                          : 'hover:bg-morandi-container/10 border border-transparent'\n                      }`}\n                    >\n                      <div className=\"w-10 h-10 rounded-full bg-morandi-gold/20 flex items-center justify-center text-sm font-medium text-morandi-primary\">\n                        {employee.display_name[0]?.toUpperCase() || 'M'}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm font-medium text-morandi-primary truncate\">\n                          {employee.display_name}\n                        </p>\n                        <p className=\"text-xs text-morandi-secondary truncate\">\n                          {employee.employee_number} ¬∑ {employee.english_name}\n                        </p>\n                      </div>\n                      {selectedEmployees.includes(employee.id) && (\n                        <div className=\"w-5 h-5 rounded-full bg-morandi-gold flex items-center justify-center\">\n                          <svg\n                            className=\"w-3 h-3 text-white\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth={3}\n                              d=\"M5 13l4 4L19 7\"\n                            />\n                          </svg>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Â∫ïÈÉ®ÊåâÈàï */}\n            <div className=\"p-4 border-t border-border flex items-center justify-between\">\n              <p className=\"text-xs text-morandi-secondary\">\n                Â∑≤ÈÅ∏Êìá {selectedEmployees.length} ‰ΩçÂì°Â∑•\n              </p>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setShowAddMemberDialog(false)}\n                  disabled={isAdding}\n                >\n                  ÂèñÊ∂à\n                </Button>\n                <Button\n                  onClick={handleAddMembers}\n                  disabled={selectedEmployees.length === 0 || isAdding}\n                  className=\"bg-morandi-gold hover:bg-morandi-gold/90\"\n                >\n                  {isAdding ? 'Êñ∞Â¢û‰∏≠...' : `Êñ∞Â¢û (${selectedEmployees.length})`}\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/MessageInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/MessageItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/MessageList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/QuickActionMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/UploadProgress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/hooks/useFileUpload.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/hooks/useMessageOperations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/hooks/useScrollToBottom.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/components/workspace/chat/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/constants/menu-items.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/constants/quote-status.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":31,"column":1,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":31,"endColumn":46,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[632,677],"text":"// @ts-expect-error - Const assertion compatibility"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Quote ÁãÄÊÖãÂÆöÁæ©ËàáÂ∞çÁÖß\n * Áî®ÊñºÁµ±‰∏ÄÂâçÁ´ØÈ°ØÁ§∫ËàáË≥áÊñôÂ∫´Ê¨Ñ‰Ωç\n */\n\nimport type { Quote } from '@/stores/types'\n\n// Â†±ÂÉπÂñÆÁãÄÊÖãÂ∞çÁÖß\nexport const QUOTE_STATUS_LABELS = {\n  draft: 'ËçâÁ®ø',\n  proposed: 'ÊèêÊ°à',\n  revised: '‰øÆÊîπ‰∏≠',\n  approved: 'Â∑≤Ê†∏ÂáÜ',\n  converted: 'Â∑≤ËΩâÂñÆ',\n  rejected: 'Â∑≤ÊãíÁµï',\n  billed: 'Â∑≤Ë´ãÊ¨æ',\n} as any\n\n// Â†±ÂÉπÂñÆÁãÄÊÖãÈ°èËâ≤\nexport const QUOTE_STATUS_COLORS = {\n  draft: 'bg-morandi-secondary text-white',\n  proposed: 'bg-morandi-gold text-white',\n  revised: 'bg-blue-500 text-white',\n  approved: 'bg-morandi-green text-white',\n  converted: 'bg-morandi-primary text-white',\n  rejected: 'bg-morandi-red text-white',\n  billed: 'bg-purple-500 text-white',\n} as any\n\n// ÁãÄÊÖãÁØ©ÈÅ∏ÈÅ∏È†Ö\n// @ts-ignore - Const assertion compatibility\nexport const QUOTE_STATUS_FILTERS = [\n  { value: 'all', label: 'ÂÖ®ÈÉ®' },\n  { value: 'draft', label: 'ËçâÁ®ø' },\n  { value: 'proposed', label: 'ÊèêÊ°à' },\n  { value: 'revised', label: '‰øÆÊîπ‰∏≠' },\n  { value: 'approved', label: 'Â∑≤Ê†∏ÂáÜ' },\n  { value: 'converted', label: 'Â∑≤ËΩâÂñÆ' },\n  { value: 'rejected', label: 'Â∑≤ÊãíÁµï' },\n  { value: 'billed', label: 'Â∑≤Ë´ãÊ¨æ' },\n]\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/constants/status-maps.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/core/errors/app-errors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/core/services/base.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/core/types/common.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/data/fitness/exercises.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/data/manifestation-chapters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/data/region-hierarchy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/accommodation/components/CornerHotelVoucher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/components/AttractionsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/components/AttractionsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/components/DatabaseManagementPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/components/tabs/AttractionsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/components/tabs/MichelinRestaurantsTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/components/tabs/PremiumExperiencesTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/hooks/useAttractionsData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/hooks/useAttractionsDialog.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/hooks/useAttractionsFilters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/attractions/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/components/AddEventDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/components/CalendarGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/components/CalendarLegend.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/components/CalendarStyles.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/components/EventDetailDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/components/MoreEventsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/hooks/useCalendarEvents.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/hooks/useCalendarNavigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/hooks/useEventOperations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/hooks/useMoreEventsDialog.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/calendar/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/company-assets/components/CompanyAssetsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/company-assets/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/confirmations/components/ConfirmationsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/confirmations/components/ConfirmationsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/confirmations/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/calculator-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/currency-widget.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":118,"column":5,"severity":1,"nodeType":null,"fix":{"range":[3464,3519],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport { useState, useEffect, useCallback, useMemo } from 'react'\nimport { DollarSign, ArrowRightLeft, TrendingUp } from 'lucide-react'\nimport { cn } from '@/lib/utils'\n\nexport function CurrencyWidget() {\n  // È†êË®≠ÂåØÁéáÔºà1 Â§ñÂπ£ = ? Âè∞Âπ£Ôºâ\n  const DEFAULT_RATES = useMemo(\n    () => ({\n      USD: {\n        rate: 31.5,\n        symbol: '$',\n        name: 'ÁæéÈáë',\n        color: 'from-blue-200/60 to-cyan-100/60',\n        gradient: 'bg-gradient-to-br from-blue-50 via-white to-cyan-50',\n      },\n      JPY: {\n        rate: 0.21,\n        symbol: '¬•',\n        name: 'Êó•Âπ£',\n        color: 'from-red-200/60 to-pink-100/60',\n        gradient: 'bg-gradient-to-br from-red-50 via-white to-pink-50',\n      },\n      KRW: {\n        rate: 0.024,\n        symbol: '‚Ç©',\n        name: 'ÈüìÂÖÉ',\n        color: 'from-purple-200/60 to-violet-100/60',\n        gradient: 'bg-gradient-to-br from-purple-50 via-white to-violet-50',\n      },\n      CNY: {\n        rate: 4.35,\n        symbol: '¬•',\n        name: '‰∫∫Ê∞ëÂπ£',\n        color: 'from-orange-200/60 to-amber-100/60',\n        gradient: 'bg-gradient-to-br from-orange-50 via-white to-amber-50',\n      },\n      VND: {\n        rate: 0.00127,\n        symbol: '‚Ç´',\n        name: 'Ë∂äÂçóÁõæ',\n        color: 'from-emerald-200/60 to-teal-100/60',\n        gradient: 'bg-gradient-to-br from-emerald-50 via-white to-teal-50',\n      },\n      IDR: {\n        rate: 0.002,\n        symbol: 'Rp',\n        name: 'Âç∞Â∞ºÁõæ',\n        color: 'from-rose-200/60 to-pink-100/60',\n        gradient: 'bg-gradient-to-br from-rose-50 via-white to-pink-50',\n      },\n    }),\n    []\n  )\n\n  const [twdAmount, setTwdAmount] = useState('10000')\n  const [foreignAmount, setForeignAmount] = useState('')\n  const [selectedCurrency, setSelectedCurrency] = useState<keyof typeof DEFAULT_RATES>('USD')\n  const [customRate, setCustomRate] = useState(DEFAULT_RATES.USD.rate.toString())\n  const [useCustomRate, setUseCustomRate] = useState(false)\n  const [direction, setDirection] = useState<'twd-to-foreign' | 'foreign-to-twd'>('twd-to-foreign')\n\n  // Áï∂ÂàáÊèõË≤®Âπ£ÊôÇÔºåÊõ¥Êñ∞ÂåØÁéá\n  useEffect(() => {\n    if (!useCustomRate) {\n      setCustomRate(DEFAULT_RATES[selectedCurrency].rate.toString())\n    }\n  }, [selectedCurrency, useCustomRate, DEFAULT_RATES])\n\n  // Ë®àÁÆóÂ§ñÂπ£ÈáëÈ°çÔºàÂè∞Âπ£ ‚Üí Â§ñÂπ£Ôºâ\n  const calculateForeign = useCallback(\n    (twd: string): string => {\n      const amount = parseFloat(twd) || 0\n      const rate = parseFloat(customRate) || 0\n      if (rate === 0) return '0'\n      return (amount / rate).toFixed(2)\n    },\n    [customRate]\n  )\n\n  // Ë®àÁÆóÂè∞Âπ£ÈáëÈ°çÔºàÂ§ñÂπ£ ‚Üí Âè∞Âπ£Ôºâ\n  const calculateTWD = useCallback(\n    (foreign: string): string => {\n      const amount = parseFloat(foreign) || 0\n      const rate = parseFloat(customRate) || 0\n      return (amount * rate).toFixed(2)\n    },\n    [customRate]\n  )\n\n  // Áï∂Âè∞Âπ£ÈáëÈ°çËÆäÊõ¥\n  const handleTwdChange = (value: string) => {\n    setTwdAmount(value)\n    setDirection('twd-to-foreign')\n    setForeignAmount(calculateForeign(value))\n  }\n\n  // Áï∂Â§ñÂπ£ÈáëÈ°çËÆäÊõ¥\n  const handleForeignChange = (value: string) => {\n    setForeignAmount(value)\n    setDirection('foreign-to-twd')\n    setTwdAmount(calculateTWD(value))\n  }\n\n  // Áï∂ÂåØÁéáËÆäÊõ¥ÊôÇÔºåÈáçÊñ∞Ë®àÁÆó\n  useEffect(() => {\n    if (direction === 'twd-to-foreign') {\n      setForeignAmount(calculateForeign(twdAmount))\n    } else {\n      setTwdAmount(calculateTWD(foreignAmount))\n    }\n  }, [customRate, direction, twdAmount, foreignAmount, calculateForeign, calculateTWD])\n\n  // ÂàùÂßãÂåñÂ§ñÂπ£ÈáëÈ°ç\n  useEffect(() => {\n    setForeignAmount(calculateForeign(twdAmount))\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []) // Âè™Âú®ÁµÑ‰ª∂ÊéõËºâÊôÇÂü∑Ë°å‰∏ÄÊ¨°\n\n  const currencyInfo = DEFAULT_RATES[selectedCurrency]\n\n  // ÂàáÊèõÊñπÂêë\n  const swapDirection = () => {\n    setDirection(prev => (prev === 'twd-to-foreign' ? 'foreign-to-twd' : 'twd-to-foreign'))\n  }\n\n  return (\n    <div className=\"h-full\">\n      <div\n        className={cn(\n          'h-full rounded-2xl border border-white/70 shadow-xl backdrop-blur-md transition-all duration-300 hover:shadow-2xl hover:border-white/80',\n          currencyInfo.gradient\n        )}\n      >\n        <div className=\"p-5 space-y-4 h-full flex flex-col\">\n          {/* Header with Icon */}\n          <div className=\"flex items-start gap-3\">\n            <div\n              className={cn(\n                'rounded-full p-2.5 text-white shadow-lg shadow-black/10',\n                'bg-gradient-to-br',\n                currencyInfo.color,\n                'ring-2 ring-white/50 ring-offset-1 ring-offset-white/20'\n              )}\n            >\n              <DollarSign className=\"w-5 h-5 drop-shadow-sm\" />\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"text-sm font-semibold text-morandi-primary leading-tight tracking-wide\">\n                ÂåØÁéáÊèõÁÆó\n              </p>\n              <p className=\"text-xs text-morandi-secondary/90 mt-1.5 leading-relaxed\">\n                ËºïÈ¨ÜË®àÁÆóÂêÑÂúãË≤®Âπ£ÔºåÊéåÊè°Âç≥ÊôÇÂåØÁéá\n              </p>\n            </div>\n          </div>\n\n          {/* Currency Selection */}\n          <div className=\"rounded-xl bg-white/70 p-3.5 shadow-md border border-white/40\">\n            <label className=\"text-xs font-semibold text-morandi-primary mb-2 block\">\n              ÈÅ∏ÊìáË≤®Âπ£\n            </label>\n            <select\n              value={selectedCurrency}\n              onChange={e => {\n                setSelectedCurrency(e.target.value as keyof typeof DEFAULT_RATES)\n                setUseCustomRate(false)\n              }}\n              className=\"w-full px-3.5 py-2.5 text-sm font-medium border border-white/60 rounded-xl bg-white/90 hover:bg-white focus:bg-white transition-all outline-none shadow-sm backdrop-blur-sm\"\n            >\n              {Object.entries(DEFAULT_RATES).map(([code, info]) => (\n                <option key={code} value={code}>\n                  {info.symbol} {info.name} ({code})\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Currency Conversion - Side by Side */}\n          <div className=\"rounded-xl bg-white/70 p-3.5 shadow-md border border-white/40\">\n            <div className=\"flex items-end gap-2\">\n              {/* TWD Input */}\n              <div className=\"flex-1\">\n                <label className=\"text-xs font-semibold text-morandi-primary mb-2 block\">\n                  Âè∞Âπ£ (TWD)\n                </label>\n                <div className=\"relative group\">\n                  <span className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-morandi-secondary/70 text-xs font-semibold\">\n                    NT$\n                  </span>\n                  <input\n                    type=\"number\"\n                    value={twdAmount}\n                    onChange={e => handleTwdChange(e.target.value)}\n                    className=\"w-full px-3.5 py-2.5 pl-[46px] border border-white/60 rounded-xl font-mono text-sm font-medium bg-white/90 hover:bg-white hover:shadow-sm focus:bg-white transition-all outline-none shadow-sm backdrop-blur-sm\"\n                    placeholder=\"10000\"\n                  />\n                </div>\n              </div>\n\n              {/* Arrow Button */}\n              <button\n                onClick={swapDirection}\n                className=\"p-2.5 hover:bg-white/80 rounded-xl transition-all group mb-0.5 shadow-sm hover:shadow-md border border-transparent hover:border-white/60\"\n                title=\"ÂàáÊèõÊñπÂêë\"\n              >\n                <ArrowRightLeft className=\"h-4 w-4 text-morandi-gold group-hover:scale-110 group-hover:rotate-180 transition-all duration-300\" />\n              </button>\n\n              {/* Foreign Currency Input */}\n              <div className=\"flex-1\">\n                <label className=\"text-xs font-semibold text-morandi-primary mb-2 block\">\n                  {currencyInfo.name} ({selectedCurrency})\n                </label>\n                <div className=\"relative group\">\n                  <span className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-morandi-secondary/70 text-xs font-semibold\">\n                    {currencyInfo.symbol}\n                  </span>\n                  <input\n                    type=\"number\"\n                    value={foreignAmount}\n                    onChange={e => handleForeignChange(e.target.value)}\n                    className=\"w-full px-3.5 py-2.5 pl-[46px] border border-white/60 rounded-xl font-mono text-sm font-medium bg-white/90 hover:bg-white hover:shadow-sm focus:bg-white transition-all outline-none shadow-sm backdrop-blur-sm\"\n                    placeholder=\"0.00\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Exchange Rate Setting */}\n          <div className=\"rounded-xl bg-white/70 p-3.5 shadow-md border border-white/40 space-y-2.5\">\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-xs font-semibold text-morandi-primary\">\n                ÂåØÁéá (1 {selectedCurrency} = ? TWD)\n              </label>\n              <button\n                onClick={() => {\n                  setUseCustomRate(false)\n                  setCustomRate(DEFAULT_RATES[selectedCurrency].rate.toString())\n                }}\n                className=\"text-xs text-morandi-gold hover:text-morandi-gold/80 font-semibold transition-all hover:scale-105 px-2 py-1 rounded-lg hover:bg-morandi-gold/10\"\n              >\n                ÈáçË®≠\n              </button>\n            </div>\n            <input\n              type=\"number\"\n              step=\"0.001\"\n              value={customRate}\n              onChange={e => {\n                setCustomRate(e.target.value)\n                setUseCustomRate(true)\n              }}\n              className=\"w-full px-3.5 py-2.5 border border-white/60 rounded-xl font-mono text-sm font-medium bg-white/90 hover:bg-white hover:shadow-sm focus:bg-white transition-all outline-none shadow-sm backdrop-blur-sm\"\n              placeholder=\"Ëº∏ÂÖ•ÂåØÁéá\"\n            />\n            <div className=\"flex items-center gap-1.5 text-xs text-morandi-secondary/90 bg-white/40 px-2.5 py-1.5 rounded-lg\">\n              <TrendingUp className=\"w-3.5 h-3.5 text-morandi-gold\" />\n              <span className=\"font-medium\">\n                {useCustomRate ? 'Â∑≤Ëá™Ë®ÇÂåØÁéá' : `È†êË®≠ÂåØÁéá: ${DEFAULT_RATES[selectedCurrency].rate}`}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/flight-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/manifestation-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/notes-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/remittance-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/stats-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/timer-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/visa-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/weather-widget-weekly.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/weather-widget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/widget-config.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/components/widget-settings-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/hooks/use-notes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/hooks/use-stats-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/hooks/use-widgets.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/dashboard/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/components/DisbursementColumns.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/components/DisbursementDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/components/DisbursementList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/components/DisbursementPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/hooks/useDisbursementData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/hooks/useDisbursementFilters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/hooks/useDisbursementForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/hooks/useDisbursementPDF.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/disbursement/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/esims/components/EsimCreateDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/esims/components/EsimSearchDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/payments/components/AddReceiptDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/payments/components/BatchReceiptDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/payments/components/PaymentItemRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/payments/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/payments/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/payments/hooks/usePaymentForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/payments/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/payments/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/components/AddRequestDialog.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":73,"column":5,"severity":1,"nodeType":null,"fix":{"range":[2185,2240],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client'\n\nimport { logger } from '@/lib/utils/logger'\nimport { useEffect, useMemo } from 'react'\nimport { Plus, Trash2 } from 'lucide-react'\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Combobox } from '@/components/ui/combobox'\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select'\nimport { useRequestForm } from '../hooks/useRequestForm'\nimport { useRequestOperations } from '../hooks/useRequestOperations'\nimport { categoryOptions } from '../types'\nimport { cn } from '@/lib/utils'\n\ninterface AddRequestDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n}\n\nexport function AddRequestDialog({ open, onOpenChange }: AddRequestDialogProps) {\n  const {\n    formData,\n    setFormData,\n    requestItems,\n    newItem,\n    setNewItem,\n    filteredOrders,\n    total_amount,\n    addItemToList,\n    removeItem,\n    resetForm,\n    suppliers,\n    tours,\n    orders,\n  } = useRequestForm()\n\n  const { generateRequestNumber, createRequest } = useRequestOperations()\n\n  // ‚úÖ ËºâÂÖ•ÂúòÈ´î„ÄÅË®ÇÂñÆÂíå‰æõÊáâÂïÜË≥áÊñôÔºàÈñãÂïüÂ∞çË©±Ê°ÜÊôÇÔºâ\n  useEffect(() => {\n    if (open) {\n      const loadData = async () => {\n        const { useTourStore, useOrderStore, useSupplierStore, useEmployeeStore } = await import('@/stores')\n        const tourStore = useTourStore.getState()\n        const orderStore = useOrderStore.getState()\n        const supplierStore = useSupplierStore.getState()\n        const employeeStore = useEmployeeStore.getState()\n\n        if (tourStore.items.length === 0) {\n          await tourStore.fetchAll()\n        }\n        if (orderStore.items.length === 0) {\n          await orderStore.fetchAll()\n        }\n        if (supplierStore.items.length === 0) {\n          await supplierStore.fetchAll()\n        }\n        if (employeeStore.items.length === 0) {\n          await employeeStore.fetchAll()\n        }\n      }\n      loadData().catch((err: unknown) => logger.error('ËºâÂÖ•Ë≥áÊñôÂ§±Êïó:', err))\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [open])\n\n  // Generate upcoming Thursdays for request date (20 weeks = ~5 months)\n  const upcomingThursdays = useMemo(() => {\n    const thursdays = []\n    const today = new Date()\n    const currentDay = today.getDay()\n\n    // Â¶ÇÊûú‰ªäÂ§©ÊòØÈÄ±ÂõõÔºåÂæû‰ªäÂ§©ÈñãÂßãÔºõÂê¶ÂâáÂæû‰∏ã‰∏ÄÂÄãÈÄ±ÂõõÈñãÂßã\n    let daysUntilThursday = (4 - currentDay + 7) % 7\n\n    for (let i = 0; i < 20; i++) {\n      const thursdayDate = new Date(today)\n      thursdayDate.setDate(today.getDate() + daysUntilThursday + i * 7)\n\n      thursdays.push({\n        value: thursdayDate.toISOString().split('T')[0],\n        label: `${thursdayDate.toLocaleDateString('zh-TW')} (${thursdayDate.toLocaleDateString('zh-TW', { weekday: 'short' })})`,\n      })\n    }\n\n    return thursdays\n  }, [])\n\n  const handleSubmit = async () => {\n    if (!formData.tour_id || requestItems.length === 0 || !formData.request_date) {\n      alert('Ë´ãÂ°´ÂØ´ÂøÖÂ°´Ê¨Ñ‰ΩçÔºàÂúòÈ´î„ÄÅË´ãÊ¨æÊó•Êúü„ÄÅËá≥Â∞ë‰∏ÄÈ†ÖË´ãÊ¨æÈ†ÖÁõÆÔºâ')\n      return\n    }\n\n    const selectedTour = tours.find(t => t.id === formData.tour_id)\n    const selectedOrder = orders.find(o => o.id === formData.order_id)\n\n    if (!selectedTour) {\n      alert('Êâæ‰∏çÂà∞ÈÅ∏‰∏≠ÁöÑÂúòÈ´î')\n      return\n    }\n\n    try {\n      await createRequest(\n        formData,\n        requestItems,\n        selectedTour.name || '',\n        selectedTour.code || '',\n        selectedOrder?.order_number || undefined\n      )\n\n      alert('‚úÖ Ë´ãÊ¨æÂñÆÂª∫Á´ãÊàêÂäü')\n      resetForm()\n      onOpenChange(false)\n    } catch (error) {\n      logger.error('‚ùå Create Request Error:', error)\n      alert('‚ùå Âª∫Á´ãÂ§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶')\n    }\n  }\n\n  const handleCancel = () => {\n    resetForm()\n    onOpenChange(false)\n  }\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-[90vw] w-[90vw] h-[90vh] flex flex-col\">\n        <DialogHeader>\n          <DialogTitle>Êñ∞Â¢ûË´ãÊ¨æÂñÆ</DialogTitle>\n          <p className=\"text-sm text-morandi-secondary\">\n            Ë´ãÊ¨æÂñÆËôü: {generateRequestNumber()} (Ëá™ÂãïÁîüÊàê)\n          </p>\n        </DialogHeader>\n\n        {/* Basic Info - Single Row */}\n        <div className=\"bg-white border border-border rounded-md p-4 shadow-sm overflow-visible\">\n          <div className=\"grid grid-cols-3 gap-4\">\n              {/* ÈÅ∏ÊìáÂúòÈ´î */}\n              <div>\n                <Label className=\"text-sm font-medium text-morandi-secondary\">ÂúòÈ´î *</Label>\n                <Combobox\n                  options={tours.map(tour => ({\n                    value: tour.id,\n                    label: `${tour.code || ''} - ${tour.name || ''}`,\n                  }))}\n                  value={formData.tour_id}\n                  onChange={value => {\n                    setFormData(prev => ({\n                      ...prev,\n                      tour_id: value,\n                      order_id: '',\n                    }))\n                  }}\n                  placeholder=\"Ë´ãÈÅ∏ÊìáÂúòÈ´î...\"\n                  emptyMessage=\"Êâæ‰∏çÂà∞ÂúòÈ´î\"\n                  className=\"mt-1\"\n                />\n              </div>\n\n              {/* ÈÅ∏ÊìáË®ÇÂñÆ */}\n              <div>\n                <Label className=\"text-sm font-medium text-morandi-secondary\">Ë®ÇÂñÆÔºàÈÅ∏Â°´Ôºâ</Label>\n                <Select\n                  disabled={!formData.tour_id || filteredOrders.length === 0}\n                  value={formData.order_id}\n                  onValueChange={value => setFormData(prev => ({ ...prev, order_id: value }))}\n                >\n                  <SelectTrigger className=\"mt-1 border-morandi-container/30\">\n                    <SelectValue\n                      placeholder={\n                        !formData.tour_id\n                          ? 'Ë´ãÂÖàÈÅ∏ÊìáÂúòÈ´î'\n                          : filteredOrders.length === 0\n                            ? 'Ê≠§ÂúòÈ´îÊ≤íÊúâË®ÇÂñÆ'\n                            : 'Ë´ãÈÅ∏ÊìáË®ÇÂñÆ...'\n                      }\n                    />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {filteredOrders.map(order => (\n                      <SelectItem key={order.id} value={order.id}>\n                        {order.order_number} - {order.contact_person || 'ÁÑ°ËÅØÁµ°‰∫∫'}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Request Date */}\n              <div>\n                <div className=\"flex items-center justify-between mb-1\">\n                  <Label className=\"text-sm font-medium text-morandi-secondary\">\n                    Ë´ãÊ¨æÊó•Êúü <span className=\"text-morandi-red\">*</span>\n                  </Label>\n                  <div className=\"flex items-center space-x-1\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"isSpecialBilling\"\n                      checked={formData.is_special_billing}\n                      onChange={e => {\n                        setFormData(prev => ({\n                          ...prev,\n                          is_special_billing: e.target.checked,\n                          request_date: '',\n                        }))\n                      }}\n                      className=\"rounded border-border\"\n                    />\n                    <label htmlFor=\"isSpecialBilling\" className=\"text-xs text-morandi-primary cursor-pointer\">\n                      ÁâπÊÆäÂá∫Â∏≥\n                    </label>\n                  </div>\n                </div>\n\n                {formData.is_special_billing ? (\n                  <Input\n                    type=\"date\"\n                    value={formData.request_date}\n                    onChange={e => setFormData(prev => ({ ...prev, request_date: e.target.value }))}\n                    className=\"bg-morandi-gold/10 border-morandi-container/30\"\n                  />\n                ) : (\n                  <Select\n                    value={formData.request_date}\n                    onValueChange={value => setFormData(prev => ({ ...prev, request_date: value }))}\n                  >\n                    <SelectTrigger className=\"border-morandi-container/30\">\n                      <SelectValue placeholder=\"ÈÅ∏ÊìáË´ãÊ¨æÊó•Êúü (ÈÄ±Âõõ)\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {upcomingThursdays.map(thursday => (\n                        <SelectItem key={thursday.value} value={thursday.value}>\n                          {thursday.label}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                )}\n              </div>\n            </div>\n        </div>\n\n        {/* Add Item Form - Table Style */}\n        <div className=\"bg-white border border-border rounded-md p-4 shadow-sm flex-1 flex flex-col overflow-hidden mt-4\">\n            <h3 className=\"text-sm font-medium text-morandi-primary mb-4\">Ë´ãÊ¨æÈ†ÖÁõÆ</h3>\n            <div className=\"overflow-x-auto flex-1\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-border\">\n                    <th className=\"text-left py-2 px-3 text-sm font-medium text-morandi-secondary w-32\">\n                      Ë´ãÊ¨æÈ°ûÂûã\n                    </th>\n                    <th className=\"text-left py-2 px-3 text-sm font-medium text-morandi-secondary w-64\">\n                      ‰æõÊáâÂïÜ\n                    </th>\n                    <th className=\"text-left py-2 px-3 text-sm font-medium text-morandi-secondary w-28\">\n                      ÂñÆÂÉπ\n                    </th>\n                    <th className=\"text-left py-2 px-3 text-sm font-medium text-morandi-secondary w-24\">\n                      Êï∏Èáè\n                    </th>\n                    <th className=\"text-left py-2 px-3 text-sm font-medium text-morandi-secondary w-28\">\n                      Â∞èË®à\n                    </th>\n                    <th className=\"text-left py-2 px-3 text-sm font-medium text-morandi-secondary w-32\">\n                      ‰ªòÊ¨æÊñπÂºè\n                    </th>\n                    <th className=\"text-left py-2 px-3 text-sm font-medium text-morandi-secondary w-32\">\n                      ÊîØÁ•®Êó•Êúü\n                    </th>\n                    <th className=\"text-left py-2 px-3 text-sm font-medium text-morandi-secondary w-48\">\n                      ÂÇôË®ª\n                    </th>\n                    <th className=\"text-center py-2 px-3 text-sm font-medium text-morandi-secondary w-32\">\n                      Êìç‰Ωú\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {/* New Item Row */}\n                  <tr className=\"bg-morandi-gold/5 border-b-2 border-morandi-gold/30\">\n                    <td className=\"py-2 px-3 w-32\">\n                      <Select\n                        value={newItem.category}\n                        onValueChange={value =>\n                          setNewItem(prev => ({ ...prev, category: value as typeof newItem.category }))\n                        }\n                      >\n                        <SelectTrigger className=\"h-9 border-morandi-container/30\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {categoryOptions.map(option => (\n                            <SelectItem key={option.value} value={option.value}>\n                              {option.label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </td>\n                    <td className=\"py-2 px-3 w-64\">\n                      <Combobox\n                        options={suppliers.map(supplier => ({\n                          value: supplier.id,\n                          label: `${supplier.name} (${supplier.group})`,\n                        }))}\n                        value={newItem.supplier_id}\n                        onChange={value => setNewItem(prev => ({ ...prev, supplier_id: value }))}\n                        placeholder=\"ÊêúÂ∞ã‰æõÊáâÂïÜ...\"\n                        emptyMessage=\"Êâæ‰∏çÂà∞‰æõÊáâÂïÜ\"\n                        className=\"h-9\"\n                      />\n                    </td>\n                    <td className=\"py-2 px-3 w-28\">\n                      <Input\n                        type=\"text\"\n                        inputMode=\"numeric\"\n                        value={newItem.unit_price || ''}\n                        onChange={e => {\n                          // ÂÖ®ÂΩ¢ËΩâÂçäÂΩ¢‰∏¶Âè™‰øùÁïôÊï∏Â≠ó\n                          let value = e.target.value\n                            .replace(/[Ôºê-Ôºô]/g, (s) => String.fromCharCode(s.charCodeAt(0) - 0xFEE0))\n                            .replace(/[^\\d]/g, '')\n                          setNewItem(prev => ({ ...prev, unit_price: value ? Number(value) : 0 }))\n                        }}\n                        onKeyDown={e => {\n                          if (e.key === 'Enter' && !e.nativeEvent.isComposing) {\n                            e.preventDefault()\n                          }\n                        }}\n                        placeholder=\"0\"\n                        className=\"h-9 border-morandi-container/30\"\n                      />\n                    </td>\n                    <td className=\"py-2 px-3 w-24\">\n                      <Input\n                        type=\"text\"\n                        inputMode=\"numeric\"\n                        value={newItem.quantity || ''}\n                        onChange={e => {\n                          // ÂÖ®ÂΩ¢ËΩâÂçäÂΩ¢‰∏¶Âè™‰øùÁïôÊï∏Â≠ó\n                          let value = e.target.value\n                            .replace(/[Ôºê-Ôºô]/g, (s) => String.fromCharCode(s.charCodeAt(0) - 0xFEE0))\n                            .replace(/[^\\d]/g, '')\n                          setNewItem(prev => ({ ...prev, quantity: value ? Number(value) : 1 }))\n                        }}\n                        onKeyDown={e => {\n                          if (e.key === 'Enter' && !e.nativeEvent.isComposing) {\n                            e.preventDefault()\n                          }\n                        }}\n                        placeholder=\"1\"\n                        className=\"h-9 border-morandi-container/30\"\n                      />\n                    </td>\n                    <td className=\"py-2 px-3 w-28 text-sm font-bold text-morandi-gold\">\n                      {(newItem.unit_price * newItem.quantity).toLocaleString()}\n                    </td>\n                    <td className=\"py-2 px-3 w-32\">\n                      <Select\n                        value={newItem.payment_method || 'transfer'}\n                        onValueChange={value => {\n                          const paymentMethod = value as 'transfer' | 'check' | 'cash'\n                          setNewItem(prev => ({\n                            ...prev,\n                            payment_method: paymentMethod,\n                            // Ê∏ÖÁ©∫ÊîØÁ•®Êó•ÊúüÔºàÂ¶ÇÊûú‰∏çÊòØÊîØÁ•®Ôºâ\n                            custom_request_date: paymentMethod === 'check' ? prev.custom_request_date : undefined,\n                          }))\n                        }}\n                      >\n                        <SelectTrigger className=\"h-9 border-morandi-container/30\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"transfer\">ËΩâÂ∏≥</SelectItem>\n                          <SelectItem value=\"check\">ÊîØÁ•®</SelectItem>\n                          <SelectItem value=\"cash\">ÁèæÈáë</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </td>\n                    <td className=\"py-2 px-3 w-32\">\n                      {newItem.payment_method === 'check' && (\n                        <Input\n                          type=\"date\"\n                          value={newItem.custom_request_date || ''}\n                          onChange={e => setNewItem(prev => ({ ...prev, custom_request_date: e.target.value }))}\n                          className=\"h-9 border-morandi-container/30\"\n                        />\n                      )}\n                    </td>\n                    <td className=\"py-2 px-3 w-48\">\n                      <Input\n                        value={newItem.description}\n                        onChange={e => setNewItem(prev => ({ ...prev, description: e.target.value }))}\n                        onKeyDown={e => {\n                          if (e.key === 'Enter') {\n                            e.preventDefault()\n                            // Âè™ÊúâÂú®‰∏çÊòØËº∏ÂÖ•Ê≥ïÁµÑÂêà‰∏≠ÊôÇÊâçÊñ∞Â¢û\n                            if (!e.nativeEvent.isComposing) {\n                              addItemToList()\n                            }\n                          }\n                        }}\n                        placeholder=\"Ëº∏ÂÖ•È†ÖÁõÆÊèèËø∞\"\n                        className=\"h-9 border-morandi-container/30\"\n                      />\n                    </td>\n                    <td className=\"py-2 px-3 w-32 text-center\">\n                      <Button\n                        onClick={addItemToList}\n                        size=\"sm\"\n                        className=\"h-9 bg-morandi-gold hover:bg-morandi-gold-hover text-white\"\n                      >\n                        <Plus size={14} />\n                      </Button>\n                    </td>\n                  </tr>\n\n                  {/* Existing Items */}\n                  {requestItems.map((item, index) => (\n                    <tr\n                      key={item.id}\n                      className={cn(\n                        'border-b border-border/40 hover:bg-morandi-container/10 transition-colors',\n                        index % 2 === 1 && 'bg-morandi-container/5'\n                      )}\n                    >\n                      <td className=\"py-3 px-3 w-32\">\n                        <span className=\"text-xs bg-morandi-gold/20 text-morandi-gold px-2 py-1 rounded font-medium\">\n                          {categoryOptions.find(c => c.value === item.category)?.label}\n                        </span>\n                      </td>\n                      <td className=\"py-3 px-3 w-64 text-sm text-morandi-primary font-medium\">\n                        {item.supplierName}\n                      </td>\n                      <td className=\"py-3 px-3 w-28 text-sm text-morandi-secondary\">\n                        {item.unit_price.toLocaleString()}\n                      </td>\n                      <td className=\"py-3 px-3 w-24 text-sm text-morandi-secondary\">{item.quantity}</td>\n                      <td className=\"py-3 px-3 w-28 text-sm font-bold text-morandi-gold\">\n                        {(item.unit_price * item.quantity).toLocaleString()}\n                      </td>\n                      <td className=\"py-3 px-3 w-32\">\n                        <span className=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded\">\n                          {item.payment_method === 'transfer' && 'ËΩâÂ∏≥'}\n                          {item.payment_method === 'cash' && 'ÁèæÈáë'}\n                          {item.payment_method === 'check' && 'ÊîØÁ•®'}\n                          {!item.payment_method && 'ËΩâÂ∏≥'}\n                        </span>\n                      </td>\n                      <td className=\"py-3 px-3 w-32 text-sm text-morandi-secondary\">\n                        {item.custom_request_date && (\n                          <span className=\"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded\">\n                            {new Date(item.custom_request_date).toLocaleDateString('zh-TW')}\n                          </span>\n                        )}\n                      </td>\n                      <td className=\"py-3 px-3 w-48 text-sm text-morandi-secondary\">{item.description}</td>\n                      <td className=\"py-3 px-3 w-32 text-center\">\n                        <button\n                          onClick={() => removeItem(item.id)}\n                          className=\"text-morandi-red hover:bg-morandi-red/10 p-2 rounded-lg transition-colors\"\n                        >\n                          <Trash2 size={16} />\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n\n              {requestItems.length > 0 && (\n                <div className=\"mt-4 pt-4 border-t border-border flex justify-end items-center\">\n                  <span className=\"text-base font-semibold text-morandi-primary mr-4\">Á∏ΩÈáëÈ°ç:</span>\n                  <span className=\"text-xl font-bold text-morandi-gold\">\n                    NT$ {total_amount.toLocaleString()}\n                  </span>\n                </div>\n              )}\n            </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex justify-end space-x-2 pt-4 border-t border-border mt-4\">\n          <Button variant=\"outline\" onClick={handleCancel}>\n            ÂèñÊ∂à\n          </Button>\n          <Button\n            onClick={handleSubmit}\n            disabled={!formData.tour_id || requestItems.length === 0 || !formData.request_date}\n            className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white rounded-md\"\n          >\n            Êñ∞Â¢ûË´ãÊ¨æÂñÆ (ÂÖ± {requestItems.length} È†ÖÔºåNT$ {total_amount.toLocaleString()})\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/components/BatchRequestDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/components/BatchTourSelect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/components/RequestDateInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/components/RequestItemForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/components/RequestItemList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/components/SupplierSearchSelect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/hooks/useBatchRequestForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/hooks/useRequestForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/hooks/useRequestOperations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/hooks/useRequestTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/finance/requests/types.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":55,"column":1,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":55,"endColumn":46,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1237,1282],"text":"// @ts-expect-error - Const assertion compatibility"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PaymentRequest, PaymentRequestItem } from '@/stores/types'\n\nexport interface RequestFormData {\n  tour_id: string\n  order_id: string\n  request_date: string\n  note: string\n  is_special_billing: boolean\n  created_by: string\n}\n\nexport interface BatchRequestFormData {\n  request_date: string\n  note: string\n  is_special_billing: boolean\n  created_by: string\n}\n\nexport interface RequestItem {\n  id: string\n  category: PaymentRequestItem['category']\n  supplier_id: string\n  supplierName: string\n  description: string\n  unit_price: number\n  quantity: number\n  payment_method?: 'transfer' | 'check' | 'cash'\n  custom_request_date?: string // ÊîØÁ•®Êó•ÊúüÔºàÂè™ÊúâÈÅ∏ÊîØÁ•®ÊôÇÊâçÂ°´Ôºâ\n}\n\nexport interface NewItemFormData {\n  category: PaymentRequestItem['category']\n  supplier_id: string\n  description: string\n  unit_price: number\n  quantity: number\n  payment_method?: 'transfer' | 'check' | 'cash'\n  custom_request_date?: string // ÊîØÁ•®Êó•ÊúüÔºàÂè™ÊúâÈÅ∏ÊîØÁ•®ÊôÇÊâçÂ°´Ôºâ\n}\n\nexport const statusLabels: Record<string, string> = {\n  pending: 'Ë´ãÊ¨æ‰∏≠',\n  processing: 'ËôïÁêÜ‰∏≠',\n  confirmed: 'Â∑≤Á¢∫Ë™ç',\n  paid: 'Â∑≤‰ªòÊ¨æ',\n}\n\nexport const statusColors: Record<string, string> = {\n  pending: 'bg-morandi-gold',\n  processing: 'bg-morandi-gold',\n  confirmed: 'bg-morandi-green',\n  paid: 'bg-morandi-primary',\n}\n\n// @ts-ignore - Const assertion compatibility\nexport const categoryOptions: Array<{ value: string; label: string }> = [\n  { value: '‰ΩèÂÆø', label: 'üè® ‰ΩèÂÆø' },\n  { value: '‰∫§ÈÄö', label: 'üöå ‰∫§ÈÄö' },\n  { value: 'È§êÈ£ü', label: 'üçΩÔ∏è È§êÈ£ü' },\n  { value: 'ÈñÄÁ•®', label: 'üé´ ÈñÄÁ•®' },\n  { value: 'Â∞éÈÅä', label: 'üë• Â∞éÈÅä' },\n  { value: 'ÂÖ∂‰ªñ', label: 'üì¶ ÂÖ∂‰ªñ' },\n]\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/itinerary/components/CornerFlightItinerary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/itinerary/components/PrintItineraryForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/itinerary/components/PrintItineraryPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/orders/hooks/useOrders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/orders/services/order.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/payments/hooks/usePayments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/payments/services/disbursement-order.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/payments/services/payment-request.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/AccommodationItemRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/CategorySection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/CostItemRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/PrintableQuickQuote.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/PrintableQuotation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/QuickQuoteDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/QuickQuoteDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/QuoteDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/QuoteHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/QuotesList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/QuotesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/SaveVersionDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/SellingPriceSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quick-quote/PrintableQuickQuote.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quick-quote/QuickQuoteCustomerInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quick-quote/QuickQuoteItemsTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quick-quote/QuickQuotePaymentInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quick-quote/QuickQuoteReceiptInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quick-quote/QuickQuoteSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quotation/PrintableQuotation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quotation/QuotationInclusions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quotation/QuotationInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quotation/QuotationPricingTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/quotation/QuotationTerms.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/shared/PrintControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/shared/PrintFooter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/shared/PrintHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/shared/print-styles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/components/printable/shared/usePrintLogo.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useCategoryOperations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuickQuoteForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuoteActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuoteCalculations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuoteForm.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuoteState.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":24,"column":5,"severity":1,"nodeType":null,"fix":{"range":[903,958],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":32,"column":5,"severity":1,"nodeType":null,"fix":{"range":[1074,1129],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"import { useState, useEffect, useMemo } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport { useQuotes } from './useQuotes'\nimport { useTourStore, useOrderStore } from '@/stores'\nimport { useWorkspaceStoreData } from '@/stores/workspace/workspace-store'\nimport { CostCategory, ParticipantCounts, SellingPrices, costCategories } from '../types'\n\nexport const useQuoteState = () => {\n  const params = useParams()\n  const router = useRouter()\n  const { quotes, updateQuote, loadQuotes } = useQuotes()\n  const { items: tours, create: addTour } = useTourStore()\n  const { items: orders } = useOrderStore()\n  const workspaceStore = useWorkspaceStoreData()\n\n  const quote_id = params.id as string\n  const quote = quotes.find(q => q.id === quote_id)\n\n  // Ëá™ÂãïËºâÂÖ• workspacesÔºàÂ¶ÇÊûúÈÇÑÊ≤íËºâÂÖ•Ôºâ\n  useEffect(() => {\n    if (workspaceStore.items.length === 0) {\n      workspaceStore.fetchAll()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // Ëá™ÂãïËºâÂÖ• quotesÔºàÂ¶ÇÊûúÈÇÑÊ≤íËºâÂÖ•Ôºâ\n  useEffect(() => {\n    if (quotes.length === 0) {\n      loadQuotes()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // Ê™¢Êü•ÊòØÂê¶ÁÇ∫ÁâπÊÆäÂúòÂ†±ÂÉπÂñÆ\n  const relatedTour = quote?.tour_id ? tours.find(t => t.id === quote.tour_id) : null\n  const isSpecialTour = relatedTour?.status === 'special'\n  const isReadOnly = isSpecialTour // ÁâπÊÆäÂúòÂ†±ÂÉπÂñÆË®≠ÁÇ∫ÂîØËÆÄ\n\n  // Ë®àÁÆóÊóÖÈÅäÂúòÁöÑÂØ¶ÈöõÈ†êË®à‰∫∫Êï∏ÔºàÂæûË®ÇÂñÆÁöÑ member_count Âä†Á∏ΩÔºâ\n  const tourPlannedParticipants = useMemo(() => {\n    if (!relatedTour) return 0\n    const tourOrders = orders.filter(order => order.tour_id === relatedTour.id)\n    return tourOrders.reduce((sum, order) => sum + (order.member_count || 0), 0)\n  }, [relatedTour, orders])\n\n\n  const [categories, setCategories] = useState<CostCategory[]>(() => {\n    const initialCategories = quote?.categories || costCategories\n    // Á¢∫‰øùÊØèÂÄãÂàÜÈ°ûÁöÑÁ∏ΩË®àÈÉΩÊ≠£Á¢∫Ë®àÁÆó\n    return initialCategories.map(cat => ({\n      ...cat,\n      total: cat.items.reduce((sum, item) => sum + (item.total || 0), 0),\n    }))\n  })\n\n  const [accommodationDays, setAccommodationDays] = useState<number>(quote?.accommodation_days || 0)\n\n  // Â§öË∫´‰ªΩ‰∫∫Êï∏Áµ±Ë®àÔºàÂàùÂßãÂÄºÔºöÂæû quote ËºâÂÖ•ÔºåÊàñÂæû tour/order Êé®ÁÆóÔºåÊúÄÂæåÊâçÁî®È†êË®≠ÂÄº 1Ôºâ\n  const [participantCounts, setParticipantCounts] = useState<ParticipantCounts>(() => {\n    if (quote?.participant_counts) {\n      return quote.participant_counts\n    }\n\n    // Â¶ÇÊûúÊúâ tourÔºåÂæû tour ÁöÑË®ÇÂñÆË®àÁÆóÈ†êË®à‰∫∫Êï∏\n    if (quote?.tour_id && relatedTour) {\n      const tourOrders = orders.filter(order => order.tour_id === relatedTour.id)\n      const totalMembers = tourOrders.reduce((sum, order) => sum + (order.member_count || 0), 0)\n\n      if (totalMembers > 0) {\n        return {\n          adult: totalMembers,\n          child_with_bed: 0,\n          child_no_bed: 0,\n          single_room: 0,\n          infant: 0,\n        }\n      }\n\n      // Â¶ÇÊûúË®ÇÂñÆÊ≤íÊúâ‰∫∫Êï∏ÔºåÁî® tour ÁöÑ max_participants\n      if (relatedTour.max_participants) {\n        return {\n          adult: relatedTour.max_participants,\n          child_with_bed: 0,\n          child_no_bed: 0,\n          single_room: 0,\n          infant: 0,\n        }\n      }\n    }\n\n    // Â¶ÇÊûú quote Êúâ group_sizeÔºå‰ΩøÁî®ÂÆÉ\n    const quoteGroupSize = quote?.group_size\n    if (quoteGroupSize && quoteGroupSize > 0) {\n      return {\n        adult: quoteGroupSize,\n        child_with_bed: 0,\n        child_no_bed: 0,\n        single_room: 0,\n        infant: 0,\n      }\n    }\n\n    // ÊúÄÂæåÊâçÁî®È†êË®≠ÂÄº\n    return {\n      adult: 1,\n      child_with_bed: 0,\n      child_no_bed: 0,\n      single_room: 0,\n      infant: 0,\n    }\n  })\n\n  // Áï∂ quote ËºâÂÖ•ÂæåÔºåÊõ¥Êñ∞ÊâÄÊúâÁãÄÊÖã\n  useEffect(() => {\n    if (quote) {\n      if (quote.categories) {\n        const loadedCategories = quote.categories.map(cat => ({\n          ...cat,\n          total: cat.items.reduce((sum, item) => sum + (item.total || 0), 0),\n        }))\n        setCategories(loadedCategories)\n      }\n      if (quote.accommodation_days !== undefined) {\n        setAccommodationDays(quote.accommodation_days)\n      }\n      if (quote.participant_counts) {\n        setParticipantCounts(quote.participant_counts)\n      }\n      if (quote.selling_prices) {\n        setSellingPrices(quote.selling_prices)\n      }\n      if (quote.name) {\n        setQuoteName(quote.name)\n      }\n    }\n  }, [quote?.id]) // Âè™Âú® quote.id ÊîπËÆäÊôÇÂü∑Ë°å\n\n  // Á∏Ω‰∫∫Êï∏ÔºöÂÑ™ÂÖà‰ΩøÁî®ÊóÖÈÅäÂúòË®ÇÂñÆÁöÑÈ†êË®à‰∫∫Êï∏ÔºåÂÖ∂Ê¨°Áî® max_participantsÔºåÊúÄÂæåÂæûÂèÉËàá‰∫∫Êï∏Âä†Á∏Ω\n  const groupSize =\n    tourPlannedParticipants ||\n    relatedTour?.max_participants ||\n    participantCounts.adult +\n      participantCounts.child_with_bed +\n      participantCounts.child_no_bed +\n      participantCounts.single_room +\n      participantCounts.infant\n\n  // Â∞éÈÅäË≤ªÁî®ÂàÜÊî§‰∫∫Êï∏Ôºà‰∏çÂê´Â¨∞ÂÖíÔºâÔºöÂÑ™ÂÖà‰ΩøÁî®ÊóÖÈÅäÂúòË®ÇÂñÆÁöÑÈ†êË®à‰∫∫Êï∏ÔºåÂÖ∂Ê¨°Áî® max_participantsÔºåÊúÄÂæåÂæûÂèÉËàá‰∫∫Êï∏Âä†Á∏Ω\n  const groupSizeForGuide =\n    tourPlannedParticipants ||\n    relatedTour?.max_participants ||\n    participantCounts.adult +\n      participantCounts.child_with_bed +\n      participantCounts.child_no_bed +\n      participantCounts.single_room\n\n  const [quoteName, setQuoteName] = useState<string>(quote?.name || '')\n  const [saveSuccess, setSaveSuccess] = useState<boolean>(false)\n  const [isSaveDialogOpen, setIsSaveDialogOpen] = useState<boolean>(false)\n  const [versionName, setVersionName] = useState<string>('')\n  const [currentEditingVersion, setCurrentEditingVersion] = useState<number | null>(null) // ËøΩËπ§Áï∂ÂâçÁ∑®ËºØÁöÑÁâàÊú¨Á¥¢Âºï\n\n  // Â§öË∫´‰ªΩÂîÆÂÉπ\n  const [sellingPrices, setSellingPrices] = useState<SellingPrices>(\n    quote?.selling_prices || {\n      adult: 0,\n      child_with_bed: 0,\n      child_no_bed: 0,\n      single_room: 0,\n      infant: 0,\n    }\n  )\n\n  // Â¶ÇÊûúÊâæ‰∏çÂà∞Â†±ÂÉπÂñÆÔºåËøîÂõûÂàóË°®È†ÅÔºàÂè™ÊúâÂú®Ë≥áÊñôÂ∑≤ËºâÂÖ•ÊôÇÊâçÂà§Êñ∑Ôºâ\n  useEffect(() => {\n    // Âè™ÊúâÁï∂ quotes Èô£ÂàóÊúâË≥áÊñôÔºàË°®Á§∫Â∑≤ËºâÂÖ•Ôºâ‰∏îÊâæ‰∏çÂà∞Â∞çÊáâÁöÑ quote ÊôÇÔºåÊâçË∑≥ËΩâ\n    if (quotes.length > 0 && !quote) {\n      router.push('/quotes')\n    }\n  }, [quote, quotes.length, router])\n\n  return {\n    quote_id,\n    quote,\n    relatedTour,\n    isSpecialTour,\n    isReadOnly,\n    categories,\n    setCategories,\n    accommodationDays,\n    setAccommodationDays,\n    participantCounts,\n    setParticipantCounts,\n    groupSize,\n    groupSizeForGuide,\n    quoteName,\n    setQuoteName,\n    saveSuccess,\n    setSaveSuccess,\n    isSaveDialogOpen,\n    setIsSaveDialogOpen,\n    versionName,\n    setVersionName,\n    currentEditingVersion,\n    setCurrentEditingVersion,\n    sellingPrices,\n    setSellingPrices,\n    updateQuote,\n    addTour,\n    router,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuoteTourSync.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuotes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuotesData.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":31,"column":5,"severity":1,"nodeType":null,"fix":{"range":[929,984],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/**\n * Hook for quotes data fetching and CRUD operations\n */\n\n'use client'\n\nimport { useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { useQuotes } from './useQuotes'\nimport { useTourStore, useRegionsStore } from '@/stores'\nimport { logger } from '@/lib/utils/logger'\n\nexport const useQuotesData = () => {\n  const router = useRouter()\n  const { quotes, addQuote, updateQuote, deleteQuote, duplicateQuote, loadQuotes } = useQuotes()\n  const { items: tours, fetchAll: fetchTours } = useTourStore()\n  const { countries, cities, fetchAll: fetchRegions, getCitiesByCountry } = useRegionsStore()\n\n  // ËºâÂÖ•Â†±ÂÉπÂñÆË≥áÊñô - Âè™Âú®È¶ñÊ¨°ËºâÂÖ•ÊôÇÂü∑Ë°å\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      loadQuotes()\n      // ‚úÖ ËºâÂÖ• toursÔºàÂ†±ÂÉπÂñÆÈúÄË¶ÅÈóúËÅØÊóÖÈÅäÂúòÔºâ\n      if (tours.length === 0) {\n        fetchTours()\n      }\n      // ‚úÖ ÁßªÈô§Ëá™ÂãïËºâÂÖ• regionsÔºàÊîπÁÇ∫Âú®ÊâìÈñãÂ∞çË©±Ê°ÜÊôÇÊâçËºâÂÖ•Ôºâ\n      // fetchRegions()\n    }, 100)\n    return () => clearTimeout(timer)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []) // Âè™Âü∑Ë°å‰∏ÄÊ¨°ÔºåÈÅøÂÖçÁÑ°ÈôêÂæ™Áí∞\n\n  const handleDuplicateQuote = async (quote_id: string, e?: React.MouseEvent) => {\n    if (e) e.stopPropagation()\n\n    try {\n      const duplicated = await duplicateQuote(quote_id)\n      if (duplicated && 'id' in duplicated && duplicated.id) {\n        router.push(`/quotes/${duplicated.id}`)\n      } else {\n        alert('Ë§áË£ΩÂ†±ÂÉπÂñÆÂ§±ÊïóÔºåË´ãÈáçË©¶')\n      }\n    } catch (error) {\n      logger.error('‚ùå Ë§áË£ΩÂ†±ÂÉπÂñÆÂ§±Êïó:', error)\n      alert('Ë§áË£ΩÂ†±ÂÉπÂñÆÂ§±ÊïóÔºåË´ãÈáçË©¶')\n    }\n  }\n\n  const handleTogglePin = async (quoteId: string, isPinned: boolean, e?: React.MouseEvent) => {\n    if (e) e.stopPropagation()\n    await updateQuote(quoteId, { is_pinned: !isPinned })\n  }\n\n  const handleDeleteQuote = async (quoteId: string, e?: React.MouseEvent) => {\n    if (e) e.stopPropagation()\n    await deleteQuote(quoteId)\n  }\n\n  const handleQuoteClick = (quoteId: string) => {\n    router.push(`/quotes/${quoteId}`)\n  }\n\n  return {\n    // Data\n    quotes,\n    tours,\n    countries,\n    cities,\n    getCitiesByCountry,\n\n    // Actions\n    addQuote,\n    updateQuote,\n    deleteQuote,\n    handleDuplicateQuote,\n    handleTogglePin,\n    handleDeleteQuote,\n    handleQuoteClick,\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/hooks/useQuotesFilters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/services/quote.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/quotes/utils/calculateTierPricing.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/suppliers/components/SuppliersDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/suppliers/components/SuppliersList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/suppliers/components/SuppliersPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/suppliers/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/DeleteConfirmDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/TourActionButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/TourChannelOperations.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/TourExpandedView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/TourForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/TourMobileCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/TourOperationsAddButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/TourOverviewTab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/TourTableColumns.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/ToursPage.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":245,"column":5,"severity":1,"nodeType":null,"fix":{"range":[7395,7450],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/**\n * ToursPage - Main tours list page component\n */\n\n'use client'\n\nimport React, { useCallback, useEffect, useMemo } from 'react'\nimport { useRouter, useSearchParams } from 'next/navigation'\nimport { ResponsiveHeader } from '@/components/layout/responsive-header'\nimport { useTours } from '../hooks/useTours-advanced'\nimport { PageRequest } from '@/core/types/common'\nimport {\n  Calendar,\n  FileText,\n  MapPin,\n  BarChart3,\n  FileCheck,\n  AlertCircle,\n  Archive,\n} from 'lucide-react'\nimport {\n  useOrderStore,\n  useEmployeeStore,\n  useRegionsStore,\n  useMemberStore,\n} from '@/stores'\nimport { useAuthStore } from '@/stores/auth-store'\nimport { useQuotes } from '@/features/quotes/hooks/useQuotes'\nimport { Tour } from '@/stores/types'\nimport { EnhancedTable } from '@/components/ui/enhanced-table'\nimport { useDialog } from '@/hooks/useDialog'\nimport { useTourPageState } from '../hooks/useTourPageState'\nimport { useTourOperations } from '../hooks/useTourOperations'\nimport { TourForm } from './TourForm'\nimport { TourExpandedView } from './TourExpandedView'\nimport { TourMobileCard } from './TourMobileCard'\nimport { DeleteConfirmDialog } from './DeleteConfirmDialog'\nimport { useTourTableColumns } from './TourTableColumns'\nimport { useTourChannelOperations } from './TourChannelOperations'\nimport { useTourActionButtons } from './TourActionButtons'\nimport {\n  useRealtimeForTours,\n} from '@/hooks/use-realtime-hooks'\n\nexport const ToursPage: React.FC = () => {\n  // ‚úÖ Realtime Ë®ÇÈñ±ÔºàÂè™Ë®ÇÈñ± ToursÔºâ\n  // Orders, Members, Quotes Âè™Áî®‰æÜÈ°ØÁ§∫Áµ±Ë®àÊï∏Â≠óÔºå‰∏çÈúÄË¶ÅÂç≥ÊôÇË®ÇÈñ±\n  // Â±ïÈñãÊôÇÁöÑË©≥Á¥∞Ë≥áÊñôÊúÉÂú® TourExpandedView ‰∏≠ÊåâÈúÄË®ÇÈñ±\n  useRealtimeForTours()\n\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const { user } = useAuthStore()\n  const orderStore = useOrderStore()\n  const { items: orders } = orderStore\n  const addOrder = orderStore.create\n  const { items: members } = useMemberStore()\n  const employeeStore = useEmployeeStore()\n  const { items: employees } = employeeStore\n  const { countries, cities, fetchAll: fetchRegions, getCitiesByCountry } = useRegionsStore()\n  const { quotes, updateQuote } = useQuotes()\n  const { dialog, openDialog, closeDialog } = useDialog()\n\n  // Use custom hooks\n  const state = useTourPageState()\n  const {\n    currentPage,\n    setCurrentPage,\n    sortBy,\n    setSortBy,\n    sortOrder,\n    setSortOrder,\n    expandedRows,\n    activeStatusTab,\n    setActiveStatusTab,\n    searchQuery,\n    setSearchQuery,\n    deleteConfirm,\n    setDeleteConfirm,\n    pageSize,\n    activeTabs,\n    submitting,\n    setSubmitting,\n    formError,\n    setFormError,\n    triggerAddOnAdd,\n    setTriggerAddOnAdd,\n    triggerRefundAdd,\n    setTriggerRefundAdd,\n    triggerPaymentAdd,\n    setTriggerPaymentAdd,\n    triggerCostAdd,\n    setTriggerCostAdd,\n    tourExtraFields,\n    setTourExtraFields,\n    newTour,\n    setNewTour,\n    newOrder,\n    setNewOrder,\n    availableCities,\n    setAvailableCities,\n    toggleRowExpand,\n    setActiveTab,\n    getStatusColor,\n    setSelectedTour,\n  } = state\n\n  // Lazy load: only load regions and employees when opening create dialog\n  const handleOpenCreateDialog = useCallback(\n    async (tour: Tour | null = null, fromQuoteId?: string) => {\n      if (countries.length === 0) {\n        await fetchRegions()\n      }\n      if (employees.length === 0) {\n        await employeeStore.fetchAll()\n      }\n      openDialog('create', tour, fromQuoteId)\n    },\n    [countries.length, employees.length, fetchRegions, employeeStore, openDialog]\n  )\n\n  // Build PageRequest parameters\n  const pageRequest: PageRequest = useMemo(\n    () => ({\n      page: currentPage,\n      pageSize: 20,\n      search: '',\n      sortBy,\n      sortOrder,\n    }),\n    [currentPage, sortBy, sortOrder]\n  )\n\n  // Use tours hook\n  const { data: tours, loading, actions } = useTours(pageRequest)\n\n  // ‚úÖ ÁßªÈô§Ëá™ÂãïËºâÂÖ• regionsÔºàÊîπÁÇ∫Âú®ÊâìÈñãÂ∞çË©±Ê°ÜÊôÇÊâçËºâÂÖ•Ôºâ\n  // ÂéüÂõ†ÔºöÂ§ßÈÉ®ÂàÜÁî®Êà∂Âè™ÊòØÁÄèË¶ΩÂàóË°®Ôºå‰∏çÈúÄË¶ÅËºâÂÖ• 187 Á≠Ü cities\n  // React.useEffect(() => {\n  //   if (countries.length === 0) {\n  //     fetchRegions();\n  //   }\n  // }, [countries.length]);\n\n  // Get active countries from new region store\n  const activeCountries = useMemo(() => {\n    return countries\n      .filter(c => c.is_active)\n      .map(c => ({ id: c.id, code: c.code || '', name: c.name }))\n  }, [countries])\n\n  // Get cities by country ID\n  const getCitiesByCountryId = useCallback(\n    (countryId: string) => {\n      return getCitiesByCountry(countryId)\n        .filter(c => c.is_active)\n        .map(c => ({\n          id: c.id,\n          code: c.airport_code || c.name,\n          name: c.name,\n          country_id: c.country_id,\n        }))\n    },\n    [getCitiesByCountry]\n  )\n\n  // Filter tours by status and search query\n  const filteredTours = (tours || []).filter(tour => {\n    // Â∞ÅÂ≠òÂàÜÈ†ÅÔºöÂè™È°ØÁ§∫Â∑≤ÁµêÂúòÁöÑ\n    if (activeStatusTab === 'archived') {\n      const searchLower = searchQuery.toLowerCase()\n      const searchMatch =\n        !searchQuery ||\n        tour.name.toLowerCase().includes(searchLower) ||\n        tour.code.toLowerCase().includes(searchLower) ||\n        (tour.location || '').toLowerCase().includes(searchLower) ||\n        (tour.status || '').toLowerCase().includes(searchLower) ||\n        tour.description?.toLowerCase().includes(searchLower)\n\n      return tour.closing_status === 'closed' && searchMatch\n    }\n\n    // ÂÖ∂‰ªñÂàÜÈ†ÅÔºöÊéíÈô§Â∑≤ÁµêÂúòÁöÑ\n    const notClosed = tour.closing_status !== 'closed'\n    const statusMatch = activeStatusTab === 'all' || tour.status === activeStatusTab\n    const searchLower = searchQuery.toLowerCase()\n    const searchMatch =\n      !searchQuery ||\n      tour.name.toLowerCase().includes(searchLower) ||\n      tour.code.toLowerCase().includes(searchLower) ||\n      (tour.location || '').toLowerCase().includes(searchLower) ||\n      (tour.status || '').toLowerCase().includes(searchLower) ||\n      tour.description?.toLowerCase().includes(searchLower)\n\n    return notClosed && statusMatch && searchMatch\n  })\n\n  // Handle edit mode: load tour data when dialog opens in edit mode\n  useEffect(() => {\n    if (dialog.type === 'edit' && dialog.data) {\n      const tour = dialog.data as Tour\n\n      let countryCode = ''\n      let cityCode = ''\n\n      // Try to find matching city from destinations\n      for (const country of activeCountries) {\n        const citiesInCountry = getCitiesByCountry(country.id)\n          .filter(c => c.is_active)\n          .map(c => ({\n            id: c.id,\n            code: c.airport_code || c.name,\n            name: c.name,\n            country_id: c.country_id,\n          }))\n        const matchedCity = citiesInCountry.find(city => city.name === tour.location)\n        if (matchedCity) {\n          countryCode = country.code\n          cityCode = matchedCity.code\n          setAvailableCities(citiesInCountry)\n          break\n        }\n      }\n\n      // If not found, set as custom\n      if (!countryCode) {\n        countryCode = '__custom__'\n        cityCode = '__custom__'\n      }\n\n      setNewTour({\n        name: tour.name,\n        countryCode,\n        cityCode,\n        customLocation: countryCode === '__custom__' ? (tour.location || undefined) : undefined,\n        departure_date: tour.departure_date || '',\n        return_date: tour.return_date || '',\n        price: tour.price ?? 0,\n        status: (tour.status || 'draft') as Tour['status'],\n        isSpecial: tour.status === 'special',\n        max_participants: tour.max_participants || 20,\n        description: tour.description || '',\n      })\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dialog.type, dialog.data, activeCountries])\n\n  // Handle navigation from quote\n  useEffect(() => {\n    const fromQuoteId = searchParams.get('fromQuote')\n    const highlightId = searchParams.get('highlight')\n    const departure_date = searchParams.get('departure_date')\n    const shouldOpenDialog = searchParams.get('openDialog')\n\n    if (fromQuoteId) {\n      const sourceQuote = quotes.find(quote => quote.id === fromQuoteId)\n      if (sourceQuote) {\n        setNewTour(prev => ({\n          ...prev,\n          name: sourceQuote.name || prev.name,\n          price: Math.round((sourceQuote.total_cost ?? 0) / (sourceQuote.group_size ?? 1)),\n        }))\n        handleOpenCreateDialog(null, fromQuoteId)\n      }\n    }\n\n    if (departure_date && shouldOpenDialog === 'true') {\n      setNewTour(prev => ({\n        ...prev,\n        departure_date: departure_date,\n      }))\n      handleOpenCreateDialog()\n    }\n\n    if (highlightId) {\n      toggleRowExpand(highlightId)\n      setActiveTab(highlightId, 'tasks')\n    }\n  }, [searchParams, quotes, handleOpenCreateDialog, setNewTour, toggleRowExpand, setActiveTab])\n\n  const resetForm = useCallback(() => {\n    setNewTour({\n      name: '',\n      countryCode: '',\n      cityCode: '',\n      departure_date: '',\n      return_date: '',\n      price: 0,\n      status: 'draft',\n      isSpecial: false,\n      max_participants: 20,\n      description: '',\n    })\n    setAvailableCities([])\n    setNewOrder({\n      contact_person: '',\n      sales_person: '',\n      assistant: '',\n      member_count: 1,\n      total_amount: 0,\n    })\n    setFormError(null)\n  }, [setNewTour, setAvailableCities, setNewOrder, setFormError])\n\n  // Use tour operations hook\n  const operations = useTourOperations({\n    actions,\n    addOrder,\n    updateQuote,\n    availableCities,\n    resetForm,\n    closeDialog,\n    setSubmitting,\n    setFormError,\n    dialogType: dialog.type || 'create',\n    dialogData: dialog.data,\n  })\n\n  const handleAddTour = useCallback(() => {\n    const fromQuoteId = searchParams.get('fromQuote')\n    operations.handleAddTour(newTour, newOrder, fromQuoteId ?? undefined)\n  }, [operations, newTour, newOrder, searchParams])\n\n  const handleSortChange = useCallback(\n    (field: string, order: 'asc' | 'desc') => {\n      setSortBy(field)\n      setSortOrder(order)\n      setCurrentPage(1)\n    },\n    [setSortBy, setSortOrder, setCurrentPage]\n  )\n\n  const handleRowClick = useCallback(\n    (tour: Tour) => {\n      setSelectedTour(tour)\n      router.push(`/tours/${tour.id}`)\n    },\n    [router, setSelectedTour]\n  )\n\n  const handleDeleteTour = useCallback(async () => {\n    await operations.handleDeleteTour(deleteConfirm.tour)\n    setDeleteConfirm({ isOpen: false, tour: null })\n  }, [operations, deleteConfirm.tour, setDeleteConfirm])\n\n  // Use extracted hooks for table columns, channel operations, and action buttons\n  const columns = useTourTableColumns({ orders, getStatusColor })\n\n  const { handleCreateChannel, handleUnlockTour } = useTourChannelOperations({ actions })\n\n  const { renderActions } = useTourActionButtons({\n    quotes,\n    activeStatusTab,\n    user,\n    operations,\n    openDialog,\n    setSelectedTour,\n    setDeleteConfirm,\n    handleCreateChannel,\n    handleUnlockTour,\n  })\n\n  const renderExpanded = useCallback(\n    (tour: Tour) => (\n      <TourExpandedView\n        tour={tour}\n        orders={orders}\n        activeTabs={activeTabs}\n        setActiveTab={setActiveTab}\n        openDialog={openDialog}\n        tourExtraFields={tourExtraFields}\n        setTourExtraFields={setTourExtraFields}\n        triggerAddOnAdd={triggerAddOnAdd}\n        setTriggerAddOnAdd={setTriggerAddOnAdd}\n        triggerRefundAdd={triggerRefundAdd}\n        setTriggerRefundAdd={setTriggerRefundAdd}\n        triggerPaymentAdd={triggerPaymentAdd}\n        setTriggerPaymentAdd={setTriggerPaymentAdd}\n        triggerCostAdd={triggerCostAdd}\n        setTriggerCostAdd={setTriggerCostAdd}\n      />\n    ),\n    [\n      orders,\n      activeTabs,\n      setActiveTab,\n      openDialog,\n      tourExtraFields,\n      setTourExtraFields,\n      triggerAddOnAdd,\n      setTriggerAddOnAdd,\n      triggerRefundAdd,\n      setTriggerRefundAdd,\n      triggerPaymentAdd,\n      setTriggerPaymentAdd,\n      triggerCostAdd,\n      setTriggerCostAdd,\n    ]\n  )\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-morandi-secondary\">ËºâÂÖ•‰∏≠...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <ResponsiveHeader\n        title=\"ÊóÖÈÅäÂúòÁÆ°ÁêÜ\"\n        icon={MapPin}\n        breadcrumb={[\n          { label: 'È¶ñÈ†Å', href: '/' },\n          { label: 'ÊóÖÈÅäÂúòÁÆ°ÁêÜ', href: '/tours' },\n        ]}\n        showSearch={true}\n        searchTerm={searchQuery}\n        onSearchChange={setSearchQuery}\n        searchPlaceholder=\"ÊêúÂ∞ãÊóÖÈÅäÂúò...\"\n        onAdd={handleOpenCreateDialog}\n        addLabel=\"Êñ∞Â¢ûÊóÖÈÅäÂúò\"\n        tabs={[\n          { value: 'all', label: 'ÂÖ®ÈÉ®', icon: BarChart3 },\n          { value: 'ÊèêÊ°à', label: 'ÊèêÊ°à', icon: FileText },\n          { value: 'ÈÄ≤Ë°å‰∏≠', label: 'ÈÄ≤Ë°å‰∏≠', icon: Calendar },\n          { value: 'ÂæÖÁµêÊ°à', label: 'ÂæÖÁµêÊ°à', icon: AlertCircle },\n          { value: 'ÁµêÊ°à', label: 'ÁµêÊ°à', icon: FileCheck },\n          { value: 'archived', label: 'Â∞ÅÂ≠ò', icon: Archive },\n        ]}\n        activeTab={activeStatusTab}\n        onTabChange={(tab: string) => {\n          setActiveStatusTab(tab)\n          setCurrentPage(1)\n        }}\n      />\n\n      {/* Tour list */}\n      <div className=\"flex-1 overflow-hidden\">\n        {/* Ê°åÈù¢Ê®°ÂºèÔºöË°®Ê†º */}\n        <div className=\"hidden md:block h-full\">\n          <EnhancedTable\n            columns={columns}\n            data={filteredTours}\n            loading={loading}\n            onSort={handleSortChange}\n            expandable={{\n              expanded: expandedRows,\n              onExpand: toggleRowExpand,\n              renderExpanded,\n            }}\n            actions={renderActions}\n            onRowClick={handleRowClick}\n            bordered={true}\n          />\n        </div>\n\n        {/* ÊâãÊ©üÊ®°ÂºèÔºöÂç°ÁâáÂàóË°® */}\n        <div className=\"md:hidden space-y-3 pb-4\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-morandi-gold\"></div>\n            </div>\n          ) : filteredTours.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <MapPin size={48} className=\"text-morandi-secondary/30 mb-4\" />\n              <p className=\"text-morandi-secondary\">Ê≤íÊúâÊâæÂà∞ÊóÖÈÅäÂúò</p>\n              <p className=\"text-sm text-morandi-secondary/70 mt-1\">Ë´ãË™øÊï¥ÁØ©ÈÅ∏Ê¢ù‰ª∂ÊàñÊñ∞Â¢ûÊóÖÈÅäÂúò</p>\n            </div>\n          ) : (\n            filteredTours.map(tour => (\n              <TourMobileCard\n                key={tour.id}\n                tour={tour}\n                onClick={() => handleRowClick(tour)}\n                getStatusColor={getStatusColor}\n              />\n            ))\n          )}\n        </div>\n      </div>\n\n      {/* Tour form dialog */}\n      <TourForm\n        isOpen={dialog.isOpen}\n        onClose={() => {\n          resetForm()\n          closeDialog()\n        }}\n        mode={dialog.type === 'edit' ? 'edit' : 'create'}\n        newTour={newTour}\n        setNewTour={setNewTour}\n        newOrder={newOrder}\n        setNewOrder={setNewOrder}\n        activeCountries={activeCountries}\n        availableCities={availableCities}\n        setAvailableCities={setAvailableCities}\n        getCitiesByCountryId={getCitiesByCountryId}\n        submitting={submitting}\n        formError={formError}\n        onSubmit={handleAddTour}\n      />\n\n      {/* Delete confirmation dialog */}\n      <DeleteConfirmDialog\n        isOpen={deleteConfirm.isOpen}\n        tour={deleteConfirm.tour}\n        onClose={() => setDeleteConfirm({ isOpen: false, tour: null })}\n        onConfirm={handleDeleteTour}\n      />\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/sections/DailyImageCarousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/sections/TourFeaturesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/sections/TourFlightSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/sections/TourHeroSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/sections/TourHotelsSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/sections/TourItinerarySection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/sections/TourLeaderSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/components/sections/TourNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/hooks/useTourGallery.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/hooks/useTourItineraryNav.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/hooks/useTourOperations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/hooks/useTourPageState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/hooks/useTourScrollEffects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/hooks/useTours-advanced.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/hooks/useTours.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/services/tour.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/tours/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/transportation-rates/components/CountryList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/transportation-rates/components/RatesDetailDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/components/AddVisaDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/components/VisasInfoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/components/VisasList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/components/VisasPage.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":58,"column":3,"severity":1,"nodeType":null,"fix":{"range":[1701,1756],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').","line":100,"column":3,"severity":1,"nodeType":null,"fix":{"range":[2713,2768],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"'use client'\n\nimport React, { useEffect } from 'react'\nimport { FileText, Clock, CheckCircle, XCircle, AlertCircle, FileCheck, Info } from 'lucide-react'\nimport { Button } from '@/components/ui/button'\nimport { ResponsiveHeader } from '@/components/layout/responsive-header'\nimport { logger } from '@/lib/utils/logger'\nimport { tourService } from '@/features/tours/services/tour.service'\nimport { toast } from 'sonner'\nimport { useVisasData } from '../hooks/useVisasData'\nimport { useVisasFilters } from '../hooks/useVisasFilters'\nimport { useVisasDialog } from '../hooks/useVisasDialog'\nimport { VisasList } from './VisasList'\nimport { VisasInfoDialog } from './VisasInfoDialog'\nimport { AddVisaDialog } from './AddVisaDialog'\nimport {\n  useRealtimeForVisas,\n} from '@/hooks/use-realtime-hooks'\n\n// ============================================\n// Á∞ΩË≠âÁÆ°ÁêÜ‰∏ªÈ†ÅÈù¢\n// ============================================\n\nexport default function VisasPage() {\n  // ‚úÖ Realtime Ë®ÇÈñ±ÔºàÂè™Ë®ÇÈñ± VisasÔºâ\n  // Tours, Orders, Members, Customers Âè™Áî®‰æÜÈ°ØÁ§∫ÂêçÁ®±Ôºå‰∏çÈúÄË¶ÅÂç≥ÊôÇË®ÇÈñ±\n  useRealtimeForVisas()\n  // Ë≥áÊñôÁÆ°ÁêÜ\n  const {\n    visas,\n    tours,\n    orders,\n    user,\n    canManageVisas,\n    addVisa,\n    updateVisa,\n    deleteVisa,\n    addTour,\n    fetchTours,\n    addOrder,\n  } = useVisasData()\n\n  // ËºâÂÖ•Ë≥áÊñô\n  React.useEffect(() => {\n    const loadData = async () => {\n      const { useVisaStore, useOrderStore, useMemberStore, useCustomerStore } = await import(\n        '@/stores'\n      )\n      await Promise.all([\n        useVisaStore.getState().fetchAll(),\n        fetchTours(),\n        useOrderStore.getState().fetchAll(),\n        useMemberStore.getState().fetchAll(),\n        useCustomerStore.getState().fetchAll(),\n      ])\n    }\n    loadData()\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  // ÁØ©ÈÅ∏ÁÆ°ÁêÜ\n  const { activeTab, setActiveTab, selectedRows, setSelectedRows, filteredVisas } =\n    useVisasFilters(visas)\n\n  // Â∞çË©±Ê°ÜÁÆ°ÁêÜ\n  const {\n    isDialogOpen,\n    setIsDialogOpen,\n    contact_info,\n    setContactInfo,\n    applicants,\n    setApplicants,\n    tourOptions,\n    calculateFee,\n    addApplicant,\n    removeApplicant,\n    updateApplicant,\n    resetForm,\n  } = useVisasDialog(tours)\n\n  const [isInfoDialogOpen, setIsInfoDialogOpen] = React.useState(false)\n  const [isSubmitting, setIsSubmitting] = React.useState(false)\n\n  // Ê¨äÈôêÊ™¢Êü•ÔºöÊ∏ÖÈô§ÈÅ∏Êìá\n  useEffect(() => {\n    if (!canManageVisas && selectedRows.length > 0) {\n      setSelectedRows([])\n    }\n  }, [canManageVisas, selectedRows.length, setSelectedRows])\n\n  // Á¨¨‰∏ÄÂÄãËæ¶ÁêÜ‰∫∫Ëá™ÂãïÂ∏∂ÂÖ•Áî≥Ë´ã‰∫∫ÂßìÂêç\n  useEffect(() => {\n    if (applicants.length > 0) {\n      setApplicants(prev => {\n        const updated = [...prev]\n        updated[0].name = contact_info.applicant_name\n        return updated\n      })\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [contact_info.applicant_name, applicants.length])\n\n  // ËôïÁêÜÊâπÊ¨°Êñ∞Â¢ûÁ∞ΩË≠â\n  const handleAddVisa = async () => {\n    // Èò≤Ê≠¢ÈáçË§áÊèê‰∫§\n    if (isSubmitting) return\n    setIsSubmitting(true)\n\n    try {\n    if (!canManageVisas || !contact_info.applicant_name || !user) return\n\n    let selectedTour\n\n    // Â¶ÇÊûúÊ≤íÈÅ∏ÂúòËôüÔºå‰ΩøÁî®È†êË®≠Á∞ΩË≠âÂúòÔºà‰∏çËá™ÂãïÂª∫Á´ãÔºâ\n    if (!contact_info.tour_id) {\n      const currentYear = new Date().getFullYear()\n      const defaultTourCode = `VISA-${currentYear}`\n      const existingDefaultTour = tours.find(t => t.code === defaultTourCode)\n\n      if (existingDefaultTour) {\n        selectedTour = existingDefaultTour\n      } else {\n        // ÊèêÁ§∫ÁÆ°ÁêÜÂì°ÈúÄË¶ÅÂÖàÂª∫Á´ãÁ∞ΩË≠âÂúò\n        toast.error(`Ë´ãÂÖàÂú®Á∞ΩË≠âÈ†ÅÈù¢Ë®≠ÂÆö ${currentYear} Âπ¥È†êË®≠Á∞ΩË≠âÂúòÔºåÊàñÂú®Ë°®ÂñÆ‰∏≠ÈÅ∏ÊìáÂúòËôü`)\n        return\n      }\n    } else {\n      selectedTour = tours.find(t => t.id === contact_info.tour_id)\n      if (!selectedTour) return\n    }\n\n    // ÂèñÂæóÊàñÂª∫Á´ãË®ÇÂñÆ\n    const totalFee = applicants.reduce((sum, a) => sum + calculateFee(a.country), 0)\n    let targetOrder\n\n    // Â¶ÇÊûúÈÅ∏Êìá„Äå+ Êñ∞Â¢ûË®ÇÂñÆ„ÄçÊàñÊ≤íÊúâÈÅ∏Ë®ÇÂñÆÔºåÂâáËá™ÂãïÂª∫Á´ã\n    if (contact_info.order_id && contact_info.order_id !== '__create_new__') {\n      targetOrder = orders.find(o => o.id === contact_info.order_id)\n      if (!targetOrder) return\n    } else {\n      // ÈáçÊñ∞Êü•Ë©¢Ë©≤ÂúòÁöÑË®ÇÂñÆÊï∏ÈáèÔºàÁ¢∫‰øùÊúÄÊñ∞Ôºâ\n      const { supabase } = await import('@/lib/supabase/client')\n      const { count } = await supabase\n        .from('orders')\n        .select('*', { count: 'exact', head: true })\n        .eq('tour_id', selectedTour.id)\n\n      const nextNumber = ((count || 0) + 1).toString().padStart(3, '0')\n      const order_number = `${selectedTour.code}-${nextNumber}`\n\n      targetOrder = await addOrder({\n        order_number,\n        tour_id: selectedTour.id,\n        code: order_number,\n        tour_name: selectedTour.name,\n        contact_person: contact_info.contact_person || contact_info.applicant_name,\n        sales_person: user.display_name || 'Á≥ªÁµ±',\n        assistant: user.display_name || 'Á≥ªÁµ±',\n        member_count: applicants.filter(a => a.name).length,\n        total_amount: totalFee,\n        paid_amount: 0,\n        remaining_amount: totalFee,\n        payment_status: 'unpaid' as const,\n      } as any)\n\n      if (contact_info.order_id === '__create_new__') {\n        toast.success(`Â∑≤Âª∫Á´ãË®ÇÂñÆÔºö${order_number}`)\n      }\n    }\n\n    if (!targetOrder) {\n      logger.error('Ë®ÇÂñÆÂª∫Á´ãÂ§±Êïó')\n      return\n    }\n\n    // ÊâπÊ¨°Âª∫Á´ãÁ∞ΩË≠âÔºà‰ΩøÁî® for...of Á¢∫‰øùÈ†ÜÂ∫èÂü∑Ë°åÔºâ\n    for (const applicant of applicants) {\n      if (!applicant.name) continue\n\n      const fee = calculateFee(applicant.country)\n      const total_cost = applicant.is_urgent ? applicant.cost + 900 : applicant.cost\n\n      await addVisa({\n        applicant_name: applicant.name,\n        contact_person: contact_info.contact_person || '',\n        contact_phone: contact_info.contact_phone || '',\n        visa_type: applicant.country,\n        country: applicant.country,\n        submission_date: applicant.submission_date,\n        received_date: applicant.received_date,\n        fee,\n        cost: total_cost,\n        status: 'pending',\n        order_id: targetOrder.id,\n        order_number: targetOrder.order_number || '',\n        tour_id: selectedTour.id,\n        code: selectedTour.code,\n        created_by: user.id,\n        note: '',\n      })\n    }\n\n      // ÈáçÁΩÆË°®ÂñÆ\n      const currentYear = new Date().getFullYear()\n      const visaCode = `VISA${currentYear}001`\n      const defaultVisaTour = tours.find(t => t.code === visaCode)\n      resetForm(defaultVisaTour?.id)\n      setIsDialogOpen(false)\n    } catch (error) {\n      logger.error('ÊâπÊ¨°Êñ∞Â¢ûÁ∞ΩË≠âÂ§±Êïó', error)\n      toast.error('Êñ∞Â¢ûÁ∞ΩË≠âÂ§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  // ÊâπÊ¨°ÈÄÅ‰ª∂\n  const handleBatchSubmit = async () => {\n    if (!canManageVisas || selectedRows.length === 0) return\n    const today = new Date().toISOString().split('T')[0]\n\n    for (const id of selectedRows) {\n      await updateVisa(id, { status: 'submitted', submission_date: today })\n    }\n\n    setSelectedRows([])\n  }\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      <ResponsiveHeader\n        title=\"Á∞ΩË≠âÁÆ°ÁêÜ\"\n        icon={FileText}\n        breadcrumb={[\n          { label: 'È¶ñÈ†Å', href: '/' },\n          { label: 'Á∞ΩË≠âÁÆ°ÁêÜ', href: '/visas' },\n        ]}\n        actions={\n          <div className=\"flex items-center gap-3\">\n            {/* ÊâπÊ¨°Êìç‰ΩúÂçÄÂüü */}\n            {canManageVisas && selectedRows.length > 0 ? (\n              <>\n                <span className=\"text-sm text-morandi-primary\">\n                  Â∑≤ÈÅ∏Êìá {selectedRows.length} Á≠ÜÁ∞ΩË≠â\n                </span>\n                <Button\n                  onClick={() => {\n                    selectedRows.forEach(id => updateVisa(id, { status: 'submitted' }))\n                    setSelectedRows([])\n                  }}\n                  size=\"sm\"\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n                >\n                  ÈÄÅ\n                </Button>\n                <Button\n                  onClick={() => {\n                    selectedRows.forEach(id => updateVisa(id, { status: 'collected' }))\n                    setSelectedRows([])\n                  }}\n                  size=\"sm\"\n                  className=\"bg-green-600 hover:bg-green-700 text-white\"\n                >\n                  Âèñ\n                </Button>\n                <Button\n                  onClick={() => {\n                    selectedRows.forEach(id => updateVisa(id, { status: 'rejected' }))\n                    setSelectedRows([])\n                  }}\n                  size=\"sm\"\n                  className=\"bg-red-600 hover:bg-red-700 text-white\"\n                >\n                  ÈÄÄ\n                </Button>\n                <Button variant=\"outline\" size=\"sm\" onClick={() => setSelectedRows([])}>\n                  ÂèñÊ∂àÈÅ∏Êìá\n                </Button>\n              </>\n            ) : (\n              <>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setIsInfoDialogOpen(true)}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Info size={16} />\n                  Êü•ÁúãÁ∞ΩË≠âË≥áË®ä\n                </Button>\n                {canManageVisas && (\n                  <Button\n                    onClick={() => setIsDialogOpen(true)}\n                    className=\"bg-morandi-gold hover:bg-morandi-gold-hover text-white\"\n                  >\n                    Êñ∞Â¢ûÁ∞ΩË≠â\n                  </Button>\n                )}\n              </>\n            )}\n          </div>\n        }\n        tabs={[\n          { value: 'all', label: 'ÂÖ®ÈÉ®', icon: FileText },\n          { value: 'pending', label: 'ÂæÖÈÄÅ‰ª∂', icon: Clock },\n          { value: 'submitted', label: 'Â∑≤ÈÄÅ‰ª∂', icon: AlertCircle },\n          { value: 'issued', label: 'Â∑≤‰∏ã‰ª∂', icon: CheckCircle },\n          { value: 'collected', label: 'Â∑≤Âèñ‰ª∂', icon: FileCheck },\n          { value: 'rejected', label: 'ÈÄÄ‰ª∂', icon: XCircle },\n        ]}\n        activeTab={activeTab}\n        onTabChange={setActiveTab}\n      />\n\n      <div className=\"flex-1 overflow-auto\">\n        {/* Á∞ΩË≠âÂàóË°® */}\n        <VisasList\n          filteredVisas={filteredVisas}\n          canManageVisas={canManageVisas}\n          selectedRows={selectedRows}\n          onSelectionChange={setSelectedRows}\n          onDelete={deleteVisa}\n          onUpdateStatus={(id, status) => updateVisa(id, { status })}\n        />\n      </div>\n\n      {/* Á∞ΩË≠âË≥áË®äÂ∞çË©±Ê°Ü */}\n      <VisasInfoDialog open={isInfoDialogOpen} onClose={() => setIsInfoDialogOpen(false)} />\n\n      {/* Êñ∞Â¢ûÁ∞ΩË≠âÂ∞çË©±Ê°Ü */}\n      <AddVisaDialog\n        open={isDialogOpen}\n        onClose={() => setIsDialogOpen(false)}\n        onSubmit={handleAddVisa}\n        contact_info={contact_info}\n        setContactInfo={setContactInfo}\n        applicants={applicants}\n        tourOptions={tourOptions}\n        calculateFee={calculateFee}\n        addApplicant={addApplicant}\n        removeApplicant={removeApplicant}\n        updateApplicant={updateApplicant}\n        canSubmit={!!contact_info.applicant_name && applicants.some(a => a.name)}\n        isSubmitting={isSubmitting}\n      />\n    </div>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/constants/visa-info.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/hooks/useVisasData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/hooks/useVisasDialog.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/hooks/useVisasFilters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/features/visas/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/use-accounting-module.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/use-realtime-hooks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useChannelsRealtime.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":14,"column":1,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":14,"endColumn":59,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[384,442],"text":"// @ts-expect-error - Type compatibility with createRealtimeHook"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Channel Realtime Ë®ÇÈñ± Hook\n * Ëá™ÂãïÁÆ°ÁêÜ channels ÁöÑ Realtime Ë®ÇÈñ±ÁîüÂëΩÈÄ±Êúü\n * ‰ΩøÁî® createRealtimeHook Â∑•Âª†ÂáΩÊï∏ÂâµÂª∫\n */\n\n'use client'\n\nimport { createRealtimeHook } from '@/lib/realtime/createRealtimeHook'\nimport { useChannelStore } from '@/stores/workspace/channel-store'\nimport { IndexedDBAdapter } from '@/stores/adapters/indexeddb-adapter'\nimport type { Channel } from '@/stores/workspace/types'\n\n// @ts-ignore - Type compatibility with createRealtimeHook\nconst channelIndexedDB = new IndexedDBAdapter<Channel>('channels')\n\n/**\n * Channels Realtime Hook\n * ‰ΩøÁî®ÊôÇÊ©üÔºöÈÄ≤ÂÖ•Â∑•‰ΩúÁ©∫ÈñìÈ†ÅÈù¢\n *\n * ÊúÉËá™ÂãïÔºö\n * 1. Âú®ÁµÑ‰ª∂ÊéõËºâÊôÇË®ÇÈñ± channels Ë°®Ê†º\n * 2. Âú®ÁµÑ‰ª∂Âç∏ËºâÊôÇÂèñÊ∂àË®ÇÈñ±\n * 3. Âç≥ÊôÇÂêåÊ≠•ÊâÄÊúâ channel ËÆäÊõ¥ÔºàÊñ∞Â¢û/‰øÆÊîπ/Âà™Èô§Ôºâ\n *\n * @example\n * ```tsx\n * function Workspace() {\n *   useChannelsRealtime();\n *\n *   const { items: channels } = useChannelStore();\n *   // channels ÊúÉËá™ÂãïÂç≥ÊôÇÊõ¥Êñ∞\n * }\n * ```\n */\nexport const useChannelsRealtime = createRealtimeHook<Channel>({\n  tableName: 'channels',\n  indexedDB: channelIndexedDB,\n  store: useChannelStore as any,\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useChatRealtime.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useConfirmDialog.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useCrudOperations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useDataFiltering.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useDialog.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useDialogState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useEnterSubmit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useListPageState.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/usePermissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useRequireAuth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/hooks/useSwipeNavigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/auth-guard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/auth/auth-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/auth/local-auth-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/auth/quick-login-token.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/cache/memory-cache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/company.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/layout.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/morandi-colors.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/time.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/timebox.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/timeouts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/workspace-settings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/constants/workspace.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/contract-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/data/create-data-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/database.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/init-local-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/migrations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/operations/delete.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/operations/query.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/operations/read.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/operations/write.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/seed-regions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/sync-schema-helper.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/utils/connection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/utils/helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/db/version-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/excel/receipt-excel.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/files.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/formula-calculator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/manifestation/reminder.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/pdf/disbursement-pdf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/pdf/receipt-pdf.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/permissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/pnr-parser.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/rbac-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/realtime/createRealtimeHook.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/realtime/hooks/useRealtimeSubscription.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/realtime/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/realtime/realtime-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/realtime/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/status-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/supabase/admin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/supabase/client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/supabase/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/sync/background-sync-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/sync/network-monitor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/sync/sync-status-service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/sync/sync-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/task-templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/ui/alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/ui/global-dialog-override.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/utils/format-date.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/utils/logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/utils/receipt-number-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/utils/text.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/utils/uuid.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/workspace-filter.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":91,"column":30,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":91,"endColumn":60}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Workspace ÁØ©ÈÅ∏Â∑•ÂÖ∑\n * Áî®Êñº super_admin ÂàáÊèõÊü•ÁúãÁâπÂÆö workspace ÁöÑË≥áÊñô\n */\n\nimport { canCrossWorkspace, type UserRole } from './rbac-config'\n\n/**\n * ÂèñÂæóÁï∂ÂâçÈÅ∏ÊìáÁöÑ workspace IDÔºàÂ¶ÇÊûúÊúâÁöÑË©±Ôºâ\n * @returns workspace ID Êàñ nullÔºàË°®Á§∫Êü•ÁúãÂÖ®ÈÉ®Ôºâ\n */\nexport function getCurrentWorkspaceFilter(): string | null {\n  if (typeof window === 'undefined') return null\n\n  const workspaceId = localStorage.getItem('current_workspace_filter')\n  return workspaceId || null\n}\n\n/**\n * Ë®≠ÂÆö workspace ÁØ©ÈÅ∏\n * @param workspaceId - workspace ID Êàñ nullÔºàÊü•ÁúãÂÖ®ÈÉ®Ôºâ\n */\nexport function setCurrentWorkspaceFilter(workspaceId: string | null): void {\n  if (typeof window === 'undefined') return\n\n  if (workspaceId) {\n    localStorage.setItem('current_workspace_filter', workspaceId)\n  } else {\n    localStorage.removeItem('current_workspace_filter')\n  }\n}\n\n/**\n * Ê™¢Êü•Ë≥áÊñôË°®ÊòØÂê¶Êúâ workspace_id Ê¨Ñ‰Ωç\n *\n * ‚ö†Ô∏è Ê≥®ÊÑèÔºöworkspace_permissions Ë°®Ê†º‰∏çÂ≠òÂú®ÔºåÂ∑≤ÁßªÈô§\n */\nconst WORKSPACE_ENABLED_TABLES = [\n  'body_measurements',\n  'bulletins',\n  // 'calendar_events',  // ‚ö†Ô∏è Êö´ÊôÇÂÅúÁî®ÔºöÊúÉÂ∞éËá¥Ë°å‰∫ãÊõÜË≥áÊñôÊ∂àÂ§±\n  'channel_groups',\n  'channel_members',\n  'channels',\n  'confirmations',\n  'customers',\n  'disbursement_orders',\n  'employees',\n  'esims',\n  'fitness_goals',\n  'itineraries',\n  'linkpay_logs',\n  'messages',\n  'orders',\n  'payment_requests',\n  'payments',\n  'personal_canvases',\n  'personal_records',\n  'progress_photos',\n  'quotes',\n  'receipts',\n  'rich_documents',\n  // 'todos',  // ‚ö†Ô∏è Êö´ÊôÇÂÅúÁî®ÔºöÊúÉÂ∞éËá¥ÂæÖËæ¶‰∫ãÈ†ÖÊ∂àÂ§±\n  'tours',\n  'workout_sessions',\n]\n\n/**\n * Ê™¢Êü•Ë°®Ê†ºÊòØÂê¶ÊîØÊè¥ workspace ÁØ©ÈÅ∏\n */\nexport function isWorkspaceFilterEnabled(tableName: string): boolean {\n  return WORKSPACE_ENABLED_TABLES.includes(tableName)\n}\n\n/**\n * ÂèñÂæó Supabase Êü•Ë©¢ÁöÑ workspace ÁØ©ÈÅ∏Ê¢ù‰ª∂\n *\n * @param tableName - Ë°®Ê†ºÂêçÁ®±\n * @returns workspace_id Êàñ nullÔºà‰∏çÁØ©ÈÅ∏Ôºâ\n */\nexport function getWorkspaceFilterForQuery(tableName: string): string | null {\n  // Ê™¢Êü•Ë°®Ê†ºÊòØÂê¶ÊîØÊè¥ workspace ÁØ©ÈÅ∏\n  if (!isWorkspaceFilterEnabled(tableName)) {\n    return null\n  }\n\n  // üîê ÂÆâÂÖ®ÊÄß‰øÆÂæ©Ôºö‰∏ÄËà¨‰ΩøÁî®ËÄÖËá™Âãï‰ΩøÁî®Ëá™Â∑±ÁöÑ workspace_id\n  // Âè™ÊúâÂÖ∑ÊúâË∑® workspace Ê¨äÈôêÁöÑËßíËâ≤ÂèØ‰ª•ÈÄèÈÅé localStorage ÊâãÂãïÂàáÊèõ workspace\n  try {\n    // ÂãïÊÖãÂºïÂÖ•ÈÅøÂÖçÂæ™Áí∞‰æùË≥¥\n    const { useAuthStore } = require('@/stores/auth-store')\n    const user = useAuthStore.getState().user\n\n    if (!user) {\n      return null // Êú™ÁôªÂÖ•Ôºå‰∏çÁØ©ÈÅ∏\n    }\n\n    // ÂèñÂæó‰ΩøÁî®ËÄÖËßíËâ≤\n    const userRole = user.roles?.[0] as UserRole\n\n    // Ê™¢Êü•ÊòØÂê¶ÊúâË∑® workspace Ê¨äÈôêÔºàsuper_adminÔºâ\n    if (canCrossWorkspace(userRole)) {\n      const manualFilter = getCurrentWorkspaceFilter()\n\n      // Â¶ÇÊûúÊâãÂãïÈÅ∏Êìá‰∫Ü workspaceÔºå‰ΩøÁî®Ë©≤ÈÅ∏Êìá\n      if (manualFilter) {\n        return manualFilter\n      }\n\n      // Êú™ÈÅ∏ÊìáÊôÇÔºåÈ†êË®≠‰ΩøÁî®Ëá™Â∑±ÁöÑ workspace\n      return user.workspace_id || null\n    }\n\n    // ‚úÖ ‰∏ÄËà¨‰ΩøÁî®ËÄÖÔºöÂº∑Âà∂‰ΩøÁî®Ëá™Â∑±ÁöÑ workspace_idÔºà‰∏çÂèØÂàáÊèõÔºâ\n    return user.workspace_id || null\n  } catch (error) {\n    console.warn('‚ö†Ô∏è getWorkspaceFilterForQuery ÂèñÂæó user Â§±Êïó:', error)\n    return null\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/lib/workspace-helpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/services/fastmove.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/services/offline-auth.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/services/storage/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/services/voucher-auto-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/services/workspace-members.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/accounting-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/accounting-subject-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/adapters/indexeddb-adapter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/adapters/supabase-adapter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/attraction-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/auth-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/calendar-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/confirmation-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/core/create-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/core/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/cost-template-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/esim-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/home-settings-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/linkpay-log-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/manifestation-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/operations/create.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":27,"column":41,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":27,"endColumn":75},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":35,"column":30,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":35,"endColumn":60},{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":70,"column":30,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":70,"endColumn":60}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Create Êìç‰ΩúÔºàFastInsert Á≠ñÁï•ÔºöÁ´ãÂç≥Êõ¥Êñ∞ UIÔºåËÉåÊôØÂêåÊ≠• SupabaseÔºâ\n *\n * ÊµÅÁ®ãÔºö\n * 1. Á´ãÂç≥ÂØ´ÂÖ• IndexedDBÔºàÂø´ÂèñÔºâ‚Üí Ê®ÇËßÄÊõ¥Êñ∞\n * 2. Á´ãÂç≥Êõ¥Êñ∞ UIÔºà‰∏çÁ≠âÂæÖ SupabaseÔºâ\n * 3. ËÉåÊôØÂØ´ÂÖ• Supabase ‚Üí Â¶ÇÊûúÂ§±ÊïóÂâáÂõûÊªæ\n */\n\nimport type { BaseEntity } from '@/types'\nimport type { StoreConfig, CreateInput } from '../core/types'\nimport { IndexedDBAdapter } from '../adapters/indexeddb-adapter'\nimport { SupabaseAdapter } from '../adapters/supabase-adapter'\nimport { SyncCoordinator } from '../sync/coordinator'\nimport { generateCode } from '../utils/code-generator'\nimport { generateUUID } from '@/lib/utils/uuid'\nimport { logger } from '@/lib/utils/logger'\nimport { useAuthStore } from '@/stores/auth-store'\n\n/**\n * Lazy get workspace code to avoid circular dependency\n * Âª∂ÈÅ≤ÂèñÂæó workspace codeÔºåÈÅøÂÖçÂú®Ê®°ÁµÑËºâÂÖ•ÊôÇËß∏ÁôºÂæ™Áí∞‰æùË≥¥\n */\nasync function getWorkspaceCodeLazy(): Promise<string | null> {\n  try {\n    // ÊñπÊ≥ï 1ÔºöÂæû workspace-helpers ÂèñÂæóÔºàÂ¶ÇÊûú store Â∑≤ËºâÂÖ•Ôºâ\n    const { getCurrentWorkspaceCode } = require('@/lib/workspace-helpers')\n    const codeFromStore = getCurrentWorkspaceCode()\n    if (codeFromStore) {\n      return codeFromStore\n    }\n\n    // ÊñπÊ≥ï 2ÔºöÁõ¥Êé•Âæû IndexedDB Êü•Ë©¢ÔºàfallbackÔºâ\n    logger.log('üì¶ Workspace store Êú™ËºâÂÖ•ÔºåÂæû IndexedDB Êü•Ë©¢...')\n    const { useAuthStore } = require('@/stores/auth-store')\n    const user = useAuthStore.getState().user\n    const workspaceId = user?.workspace_id\n\n    if (!workspaceId) {\n      logger.warn('‚ö†Ô∏è ÁÑ°Ê≥ïÂèñÂæó workspace_id')\n      return null\n    }\n\n    const { openDB } = await import('idb')\n    const db = await openDB('VenturoOfflineDB')\n    const tx = db.transaction('workspaces', 'readonly')\n    const store = tx.objectStore('workspaces')\n    const workspace = await store.get(workspaceId)\n\n    if (workspace?.code) {\n      logger.log('‚úÖ Âæû IndexedDB ÂèñÂæó workspace code:', workspace.code)\n      return workspace.code\n    }\n\n    logger.warn('‚ö†Ô∏è IndexedDB ‰∏≠Êâæ‰∏çÂà∞ workspace')\n    return null\n  } catch (error) {\n    logger.warn('‚ö†Ô∏è ÁÑ°Ê≥ïÂèñÂæó workspace codeÔºå‰ΩøÁî®È†êË®≠Á∑®Ëôü', error)\n    return null\n  }\n}\n\n/**\n * Lazy get workspace ID to avoid circular dependency\n * Âª∂ÈÅ≤ÂèñÂæó workspace IDÔºåÈÅøÂÖçÂú®Ê®°ÁµÑËºâÂÖ•ÊôÇËß∏ÁôºÂæ™Áí∞‰æùË≥¥\n */\nfunction getWorkspaceIdLazy(): string | null {\n  try {\n    // ÂãïÊÖã require auth-store ÈÅøÂÖçÈ†ÇÂ±§Âæ™Áí∞‰æùË≥¥\n    const { useAuthStore } = require('@/stores/auth-store')\n    const user = useAuthStore.getState().user\n    const workspaceId = user?.workspace_id || null\n\n    if (!workspaceId) {\n      logger.warn('‚ö†Ô∏è ÁÑ°Ê≥ïÂèñÂæó workspace ID', {\n        hasUser: !!user,\n        userId: user?.id,\n        userWorkspaceId: user?.workspace_id,\n      })\n    } else {\n      logger.log('‚úÖ ÂèñÂæó workspace ID:', workspaceId)\n    }\n\n    return workspaceId\n  } catch (error) {\n    logger.warn('‚ö†Ô∏è ÂèñÂæó workspace ID ÊôÇÁôºÁîüÈåØË™§:', error)\n    return null\n  }\n}\n\n/**\n * Âª∫Á´ãË≥áÊñôÔºàÁ∞°ÂåñÁâàÔºöÁõ¥Êé•Êñ∞Â¢ûÔºâ\n */\nexport async function create<T extends BaseEntity>(\n  data: CreateInput<T>,\n  existingItems: T[],\n  config: StoreConfig,\n  indexedDB: IndexedDBAdapter<T>,\n  supabase: SupabaseAdapter<T>,\n  sync: SyncCoordinator<T>\n): Promise<T> {\n  const { tableName, codePrefix, enableSupabase } = config\n\n  // üî• ÊúÄÊó©ÊúüÁöÑ debugÔºöÊ™¢Êü•ÂÇ≥ÂÖ•ÁöÑ data\n  if (tableName === 'quotes') {\n    interface QuoteData {\n      quote_type?: string\n    }\n    logger.log('üîç [create.ts] ‰∏ÄÈñãÂßãÊî∂Âà∞ÁöÑ data:', {\n      quote_type: (data as QuoteData).quote_type,\n      codePrefix,\n      tableName,\n    })\n  }\n\n  try {\n    // ÁîüÊàê ID ÂíåÊôÇÈñìÊà≥Ë®ò\n    const id = generateUUID()\n    const now = new Date().toISOString()\n\n    // ÂèñÂæó workspace_idÔºàÂ¶ÇÊûúË≥áÊñô‰∏≠Ê≤íÊúâÊèê‰æõÔºâ\n    const workspaceId = getWorkspaceIdLazy()\n\n    // Êüê‰∫õË°®Ê†º‰∏çÈúÄË¶Å workspace_idÔºà‰æãÂ¶ÇÔºöÂ≠êÈ†ÖÁõÆË°®Ê†ºÔºåÂ∑≤ÈÄèÈÅéÂ§ñÈçµÈóúËÅØÔºâ\n    const tablesWithoutWorkspaceId = [\n      'quote_items',\n      'order_members',\n      'members', // ‚úÖ Êñ∞Â¢ûÔºöÂúòÂì°Ë°®\n      'payment_request_items', // ‚úÖ Êñ∞Â¢ûÔºöË´ãÊ¨æÈ†ÖÁõÆ\n      'tour_participants',\n      'itinerary_days',\n      'itinerary_activities',\n      'itineraries', // ‚úÖ Êñ∞Â¢ûÔºöË°åÁ®ãË°®ÔºàÊúÉÂæû tour_id ÈóúËÅØÂèñÂæó workspace_idÔºâ\n    ]\n    const shouldAddWorkspaceId = !tablesWithoutWorkspaceId.includes(tableName)\n\n    // Ê™¢Êü•Ë≥áÊñô‰∏≠ÊòØÂê¶Â∑≤Êúâ workspace_id\n    const hasWorkspaceId = !!(data as Record<string, unknown>).workspace_id\n\n    // Â¶ÇÊûúÈúÄË¶Å workspace_id ‰ΩÜË≥áÊñô‰∏≠Ê≤íÊúâÔºå‰∏îÁÑ°Ê≥ïÂèñÂæóÔºåÂâáÊããÂá∫ÈåØË™§\n    if (shouldAddWorkspaceId && !hasWorkspaceId && !workspaceId) {\n      const errorMsg = `‚ùå [${tableName}] ÁÑ°Ê≥ïÂèñÂæó workspace_idÔºåË´ãÁ¢∫Ë™çÂ∑≤ÁôªÂÖ•`\n      logger.error(errorMsg)\n      throw new Error(errorMsg)\n    }\n\n    // ÂèñÂæóÁï∂Ââç‰ΩøÁî®ËÄÖ IDÔºàÁî®ÊñºËá™ÂãïÂ°´ÂÖ• created_by/updated_byÔºâ\n    const getUserId = () => {\n      try {\n        const { user } = useAuthStore.getState()\n        return user?.id || null\n      } catch {\n        return null\n      }\n    }\n    const userId = getUserId()\n\n    // Â¶ÇÊûúÊúâ codePrefixÔºåÁîüÊàêÁ∑®Ëôü\n    let recordData = {\n      ...data,\n      id,\n      created_at: now,\n      updated_at: now,\n      // Ëá™ÂãïÂ°´ÂÖ• workspace_idÔºàÂ¶ÇÊûúË≥áÊñô‰∏≠Ê≤íÊúâÊèê‰æõ‰∏îË°®Ê†ºÈúÄË¶ÅÔºâ\n      ...(shouldAddWorkspaceId && !hasWorkspaceId && workspaceId\n        ? { workspace_id: workspaceId }\n        : {}),\n      // Ëá™ÂãïÂ°´ÂÖ• created_byÔºàÂ¶ÇÊûúË≥áÊñô‰∏≠Ê≤íÊúâÊèê‰æõ‰∏îÊúâÁôªÂÖ•‰ΩøÁî®ËÄÖÔºâ\n      ...((data as Record<string, unknown>).created_by === undefined && userId\n        ? { created_by: userId }\n        : {}),\n      // Ëá™ÂãïÂ°´ÂÖ• updated_byÔºàÂ¶ÇÊûúË≥áÊñô‰∏≠Ê≤íÊúâÊèê‰æõ‰∏îÊúâÁôªÂÖ•‰ΩøÁî®ËÄÖÔºâ\n      ...((data as Record<string, unknown>).updated_by === undefined && userId\n        ? { updated_by: userId }\n        : {}),\n    } as T\n\n    if (codePrefix) {\n      const existingCode = (data as Record<string, unknown>).code\n      if (!existingCode || (typeof existingCode === 'string' && existingCode.trim() === '')) {\n        // üî• ‰øÆÊ≠£ÔºöÂæû IndexedDB ËÆÄÂèñÊâÄÊúâË≥áÊñô‰ª•ÁîüÊàêÁ∑®ËôüÔºàÈÅøÂÖçÈáçË§áÔºâ\n        const allItemsFromDB = await indexedDB.getAll()\n        interface ItemWithDeleted extends BaseEntity {\n          _deleted?: boolean\n          workspace_id?: string\n        }\n        const itemsForCodeGeneration = allItemsFromDB.filter(\n          (item): item is ItemWithDeleted => {\n            const itemWithMeta = item as ItemWithDeleted\n            return !itemWithMeta._deleted && itemWithMeta.workspace_id === workspaceId\n          }\n        )\n\n        // Âª∂ÈÅ≤ÂèñÂæó workspace codeÔºàÈÅøÂÖçÂæ™Áí∞‰æùË≥¥Ôºâ\n        const workspaceCode = await getWorkspaceCodeLazy()\n        if (workspaceCode) {\n          // üî• ÂÇ≥ÈÅû quote_type Áµ¶ generateCodeÔºàÁî®ÊñºÂçÄÂàÜÂø´ÈÄüÂ†±ÂÉπÂñÆÂíåÊ®ôÊ∫ñÂ†±ÂÉπÂñÆÔºâ\n          const quoteType = (data as Record<string, unknown>).quote_type as string | undefined\n\n          interface QuoteData {\n            quote_type?: string\n          }\n          logger.log('üîç [create.ts] generateCode ÂèÉÊï∏:', {\n            workspaceCode,\n            codePrefix,\n            quoteType,\n            dataQuoteType: (data as QuoteData).quote_type,\n          })\n\n          interface CodeConfig {\n            prefix: string\n            quoteType?: string\n          }\n          const code = generateCode(\n            workspaceCode,\n            { prefix: codePrefix, quoteType } as CodeConfig,\n            itemsForCodeGeneration // üî• ‰ΩøÁî® IndexedDB Ë≥áÊñô\n          )\n\n          logger.log('‚úÖ [create.ts] ÁîüÊàêÁ∑®Ëôü:', code)\n          recordData = { ...recordData, code } as T\n        } else {\n          // Ê≤íÊúâ workspace codeÔºå‰ΩøÁî®ÂÇ≥Áµ±Á∑®ËôüÔºàÁÑ°ÂâçÁ∂¥Ôºâ\n          const code = generateCode('', { prefix: codePrefix } as CodeConfig, itemsForCodeGeneration)\n          recordData = { ...recordData, code } as T\n        }\n      }\n    }\n\n    // ‚úÖ Ê≠•È©ü 1ÔºöÂØ´ÂÖ• IndexedDBÔºàÊú¨Âú∞Âø´ÂèñÔºâ‚ö° FastIn\n    await indexedDB.put(recordData)\n\n    // ‚úÖ Ê≠•È©ü 2ÔºöËÉåÊôØÂêåÊ≠•Âà∞ SupabaseÔºà‰∏çÈòªÂ°û UIÔºâ\n    if (enableSupabase && typeof window !== 'undefined') {\n      // Ê∏ÖÁêÜË≥áÊñôÔºöÂ∞áÁ©∫Â≠ó‰∏≤ÁöÑÊôÇÈñìÊ¨Ñ‰ΩçËΩâÁÇ∫ nullÔºàPostgreSQL ‰∏çÊé•ÂèóÁ©∫Â≠ó‰∏≤Ôºâ\n      const cleanedData = { ...recordData } as Record<string, unknown>\n      Object.keys(cleanedData).forEach(key => {\n        const value = cleanedData[key]\n        // ÊôÇÈñìÁõ∏ÈóúÊ¨Ñ‰ΩçÔºöÁ©∫Â≠ó‰∏≤ËΩâ null\n        if ((key.endsWith('_at') || key.endsWith('_date') || key === 'deadline') && value === '') {\n          cleanedData[key] = null\n        }\n      })\n\n      // ‰ΩøÁî® put (upsert) ËÄåÈùû insertÔºåÈÅøÂÖç‰∏ªÈçµË°ùÁ™Å\n      supabase.put(cleanedData as T).catch(async error => {\n        logger.error(`‚ùå [${tableName}] Supabase ËÉåÊôØÂêåÊ≠•Â§±ÊïóÔºàË≥áÊñôÂÉÖÂ≠òÊñºÊú¨Âú∞Ôºâ:`, {\n          error,\n          data: cleanedData,\n          message: 'ÈáçÊñ∞Êï¥ÁêÜÈ†ÅÈù¢ÂæåÊ≠§Ë≥áÊñôÂèØËÉΩÊ∂àÂ§±ÔºÅ'\n        })\n\n        // üî• ÈáçË¶ÅÔºöÊ®ôË®òÁÇ∫ÂæÖÂêåÊ≠•ÔºåÈÅøÂÖçÈáçÊñ∞Êï¥ÁêÜÊôÇË≥áÊñôÊ∂àÂ§±\n        try {\n          const dataWithSync = {\n            ...recordData,\n            _needs_sync: true,\n            _synced_at: null\n          } as T\n          await indexedDB.put(dataWithSync)\n          logger.log(`‚úÖ [${tableName}] Â∑≤Ê®ôË®òÁÇ∫ÂæÖÂêåÊ≠•ÔºåË≥áÊñôÂ∞áÂú®Á∂≤Ë∑ØÊÅ¢Âæ©ÂæåËá™Âãï‰∏äÂÇ≥`)\n        } catch (updateError) {\n          logger.error(`‚ùå [${tableName}] ÁÑ°Ê≥ïÊ®ôË®òÂæÖÂêåÊ≠•ÁãÄÊÖã:`, updateError)\n        }\n\n        // Âú®ÈñãÁôºÁí∞Â¢ÉÈ°ØÁ§∫Ë≠¶Âëä\n        if (process.env.NODE_ENV === 'development') {\n          logger.error(`\nüö® Supabase ÂêåÊ≠•Â§±ÊïóË≠¶Âëä üö®\nË°®Ê†º: ${tableName}\nÈåØË™§: ${error?.message || error}\nË≥áÊñô ID: ${cleanedData.id}\n\n‚ö†Ô∏è Ë≥áÊñôÂ∑≤Ê®ôË®òÁÇ∫„ÄåÂæÖÂêåÊ≠•„ÄçÔºåÁ∂≤Ë∑ØÊÅ¢Âæ©ÂæåÂ∞áËá™Âãï‰∏äÂÇ≥\n          `)\n        }\n      })\n    }\n\n    return recordData\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Âª∫Á´ãÂ§±Êïó'\n    logger.error(`‚ùå [${tableName}] Êñ∞Â¢ûÂ§±Êïó:`, error)\n    throw new Error(errorMessage)\n  }\n}\n\n/**\n * ÊâπÊ¨°Âª∫Á´ãË≥áÊñô\n */\nexport async function createMany<T extends BaseEntity>(\n  dataArray: CreateInput<T>[],\n  existingItems: T[],\n  config: StoreConfig,\n  indexedDB: IndexedDBAdapter<T>,\n  supabase: SupabaseAdapter<T>,\n  sync: SyncCoordinator<T>\n): Promise<T[]> {\n  const results: T[] = []\n\n  for (const data of dataArray) {\n    const created = await create(data, existingItems, config, indexedDB, supabase, sync)\n    results.push(created)\n  }\n\n  logger.log(`‚úÖ [${config.tableName}] createMany: Â∑≤Âª∫Á´ã ${results.length} Á≠Ü`)\n\n  return results\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/operations/delete.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/operations/fetch.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/operations/query.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/operations/update.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":34,"column":34,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":34,"endColumn":64}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Update Êìç‰ΩúÔºàFastInsert Á≠ñÁï•ÔºöÁ´ãÂç≥Êõ¥Êñ∞ UIÔºåËÉåÊôØÂêåÊ≠• SupabaseÔºâ\n *\n * ÊµÅÁ®ãÔºö\n * 1. Á´ãÂç≥Êõ¥Êñ∞ IndexedDBÔºàÂø´ÂèñÔºâ‚Üí Ê®ÇËßÄÊõ¥Êñ∞\n * 2. Á´ãÂç≥Êõ¥Êñ∞ UIÔºà‰∏çÁ≠âÂæÖ SupabaseÔºâ\n * 3. ËÉåÊôØÊõ¥Êñ∞ Supabase ‚Üí Â¶ÇÊûúÂ§±ÊïóÂâáÂõûÊªæ\n */\n\nimport type { BaseEntity } from '@/types'\nimport type { StoreConfig, UpdateInput } from '../core/types'\nimport { IndexedDBAdapter } from '../adapters/indexeddb-adapter'\nimport { SupabaseAdapter } from '../adapters/supabase-adapter'\nimport { SyncCoordinator } from '../sync/coordinator'\nimport { logger } from '@/lib/utils/logger'\n\n/**\n * Êõ¥Êñ∞Ë≥áÊñôÔºàÁ∞°ÂåñÁâàÔºöÁõ¥Êé•Êõ¥Êñ∞Ôºâ\n */\nexport async function update<T extends BaseEntity>(\n  id: string,\n  data: UpdateInput<T>,\n  config: StoreConfig,\n  indexedDB: IndexedDBAdapter<T>,\n  supabase: SupabaseAdapter<T>,\n  sync: SyncCoordinator<T>\n): Promise<T> {\n  const { tableName, enableSupabase } = config\n\n  try {\n    // ÂèñÂæóÁï∂Ââç‰ΩøÁî®ËÄÖ IDÔºàÁî®ÊñºËá™ÂãïÂ°´ÂÖ• updated_byÔºâ\n    const getUserId = (): string | null => {\n      try {\n        const { useAuthStore } = require('@/stores/auth-store') as { useAuthStore: { getState: () => { user?: { id?: string } | null } } }\n        const { user } = useAuthStore.getState()\n        return user?.id || null\n      } catch {\n        return null\n      }\n    }\n    const _userId = getUserId()\n\n    // Ê∏ÖÁêÜË≥áÊñôÔºöÂ∞áÁ©∫Â≠ó‰∏≤ÁöÑÊôÇÈñìÊ¨Ñ‰ΩçËΩâÁÇ∫ nullÔºàPostgreSQL ‰∏çÊé•ÂèóÁ©∫Â≠ó‰∏≤Ôºâ\n    const cleanedData = { ...data } as Record<string, unknown>\n    Object.keys(cleanedData).forEach(key => {\n      const value = cleanedData[key]\n      // ÊôÇÈñìÁõ∏ÈóúÊ¨Ñ‰ΩçÔºöÁ©∫Â≠ó‰∏≤ËΩâ null\n      if ((key.endsWith('_at') || key.endsWith('_date') || key === 'deadline') && value === '') {\n        cleanedData[key] = null\n      }\n    })\n\n    // Ëá™ÂãïÂ°´ÂÖ• updated_byÔºàÂ¶ÇÊûúË≥áÊñô‰∏≠Ê≤íÊúâÊèê‰æõ‰∏îÊúâÁôªÂÖ•‰ΩøÁî®ËÄÖÔºâ\n    if (cleanedData.updated_by === undefined && _userId) {\n      cleanedData.updated_by = _userId\n    }\n\n    // ‚úÖ Ê≠•È©ü 1ÔºöÊõ¥Êñ∞ IndexedDBÔºàÊú¨Âú∞Âø´ÂèñÔºâ‚ö° Á´ãÂç≥ÂèçÊò†\n    await indexedDB.update(id, cleanedData as Partial<T>)\n\n    // ‚úÖ Ê≠•È©ü 2ÔºöËÉåÊôØÂêåÊ≠•Âà∞ SupabaseÔºà‰∏çÈòªÂ°û UIÔºâ\n    if (enableSupabase && typeof window !== 'undefined') {\n      supabase.update(id, cleanedData as Partial<T>).catch((error: unknown) => {\n        logger.warn(`‚ö†Ô∏è [${tableName}] Supabase ËÉåÊôØÂêåÊ≠•Â§±ÊïóÔºàÂ∑≤‰øùÂ≠òÂà∞Êú¨Âú∞Ôºâ:`, error)\n      })\n    }\n\n    // ÂèñÂæóÊõ¥Êñ∞ÂæåÁöÑÂÆåÊï¥Ë≥áÊñô\n    const updatedItem = await indexedDB.getById(id)\n    if (!updatedItem) {\n      throw new Error('Êâæ‰∏çÂà∞Ë¶ÅÊõ¥Êñ∞ÁöÑÈ†ÖÁõÆ')\n    }\n\n    return updatedItem\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Êõ¥Êñ∞Â§±Êïó'\n    logger.error(`‚ùå [${tableName}] Êõ¥Êñ∞Â§±Êïó:`, error)\n    throw new Error(errorMessage)\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/pnrs-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/receipt-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/region-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/supplier-category-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/sync/coordinator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/sync/event-bus.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/sync/merge-strategy.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/theme-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/timebox-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/useTravelInvoiceStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/user-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/utils/abort-manager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/utils/code-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/voucher-entry-store.ts","messages":[{"ruleId":"@typescript-eslint/prefer-as-const","severity":2,"message":"Expected a `const` instead of a literal type assertion.","line":22,"column":35,"nodeType":"TSLiteralType","messageId":"preferConstAssertion","endLine":22,"endColumn":52,"fix":{"range":[528,545],"text":"const"}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\n * ÂÇ≥Á•®ÊòéÁ¥∞ Store\n * Âª∫Á´ãÊó•ÊúüÔºö2025-01-17\n */\n\nimport { createStore } from './core/create-store'\nimport type { VoucherEntry } from '@/types/accounting-pro.types'\n\n/**\n * ÂÇ≥Á•®ÊòéÁ¥∞ Store\n *\n * ‰ΩøÁî®ÊñπÂºèÔºö\n * ```tsx\n * const entries = useVoucherEntryStore(state => state.items)\n * const fetchAll = useVoucherEntryStore(state => state.fetchAll)\n *\n * // Êü•Ë©¢ÁâπÂÆöÂÇ≥Á•®ÁöÑÂàÜÈåÑ\n * const voucherEntries = entries.filter(e => e.voucher_id === voucherId)\n * ```\n */\nexport const useVoucherEntryStore = createStore<VoucherEntry>({\n  tableName: 'voucher_entries' as 'voucher_entries',\n  enableSupabase: true,\n  fastInsert: true,\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/voucher-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace-module-store.ts","messages":[{"ruleId":"@typescript-eslint/prefer-as-const","severity":2,"message":"Expected a `const` instead of a literal type assertion.","line":30,"column":37,"nodeType":"TSLiteralType","messageId":"preferConstAssertion","endLine":30,"endColumn":56,"fix":{"range":[784,803],"text":"const"}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"/**\n * Â∑•‰ΩúÁ©∫ÈñìÊ®°ÁµÑÊéàÊ¨ä Store\n * Âª∫Á´ãÊó•ÊúüÔºö2025-01-17\n */\n\nimport { createStore } from './core/create-store'\nimport type { WorkspaceModule } from '@/types/accounting-pro.types'\n\n/**\n * Â∑•‰ΩúÁ©∫ÈñìÊ®°ÁµÑÊéàÊ¨ä Store\n *\n * ‰ΩøÁî®ÊñπÂºèÔºö\n * ```tsx\n * const modules = useWorkspaceModuleStore(state => state.items)\n * const fetchAll = useWorkspaceModuleStore(state => state.fetchAll)\n *\n * // Ê™¢Êü•ÊúÉË®àÊ®°ÁµÑÊòØÂê¶Â∑≤ÂïüÁî®\n * const accountingModule = modules.find(m =>\n *   m.workspace_id === workspaceId &&\n *   m.module_name === 'accounting' &&\n *   m.is_enabled\n * )\n *\n * const hasAccounting = !!accountingModule\n * const isExpired = accountingModule?.expires_at &&\n *   new Date(accountingModule.expires_at) < new Date()\n * ```\n */\nexport const useWorkspaceModuleStore = createStore<WorkspaceModule>({\n  tableName: 'workspace_modules' as 'workspace_modules',\n  enableSupabase: true,\n  fastInsert: true,\n})\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/advance-list-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/canvas-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/channel-group-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/channel-member-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/channel-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/channels-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/chat-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/members-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/message-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/personal-canvas-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/rich-document-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/shared-order-list-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/widgets-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/stores/workspace/workspace-store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/accounting-pro.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/base.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/calendar.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/company-asset.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/company.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/confirmation.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/customer.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/esim.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/manifestation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/models.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/order.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/pnr.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/quote.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/receipt.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/supplier-category.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/supplier.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/tour-departure.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/tour.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/src/types/transportation-rates.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/supabase/functions/workspace-api/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/test-data-persistence.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/tests/setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/verify-final-status.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":58}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { createClient } = require('@supabase/supabase-js')\n\nconst supabaseUrl = 'https://pfqvdacxowpgfamuvnsn.supabase.co'\nconst supabaseServiceKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmcXZkYWN4b3dwZ2ZhbXV2bnNuIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTEwODMyMCwiZXhwIjoyMDc0Njg0MzIwfQ.kbJbdYHtOWudBGzV3Jv5OWzWQQZT4aBFFgfUczaVdIE'\n\nasync function verifyFinalStatus() {\n  const supabase = createClient(supabaseUrl, supabaseServiceKey)\n\n  console.log('üîç ÊúÄÁµÇÈ©óË≠â - todos Ë≥áÊñôË°®\\n')\n\n  try {\n    // Ê™¢Êü•Ê¨Ñ‰Ωç\n    const { data, error } = await supabase\n      .from('todos')\n      .select('*')\n      .limit(1)\n\n    if (error) {\n      console.error('‚ùå Êü•Ë©¢Â§±Êïó:', error.message)\n      return false\n    }\n\n    console.log('‚úÖ Êü•Ë©¢ÊàêÂäü')\n\n    if (data && data.length > 0) {\n      const fields = Object.keys(data[0])\n      console.log(`\\nüìã Ê¨Ñ‰ΩçÂàóË°® (${fields.length} ÂÄã):`)\n      fields.forEach(field => {\n        if (field === 'updated_by') {\n          console.log(`  ‚úÖ ${field} (Êñ∞Â¢ûÊàêÂäü!)`)\n        } else {\n          console.log(`  ‚Ä¢ ${field}`)\n        }\n      })\n\n      // Ê™¢Êü• updated_by ÊòØÂê¶ÊúâÂÄº\n      const hasUpdatedBy = 'updated_by' in data[0]\n      const updatedByValue = data[0].updated_by\n\n      console.log(`\\nüîç updated_by Ê¨Ñ‰ΩçÁãÄÊÖã:`)\n      console.log(`  Â≠òÂú®: ${hasUpdatedBy ? '‚úÖ ÊòØ' : '‚ùå Âê¶'}`)\n      console.log(`  ÂÄº: ${updatedByValue || '(null)'}`)\n\n      // Ê™¢Êü•ÊòØÂê¶Â∑≤Âæû created_by Ë§áË£Ω\n      if (hasUpdatedBy && updatedByValue === data[0].created_by) {\n        console.log(`  ‚úÖ Â∑≤Ê≠£Á¢∫Âæû created_by Ë§áË£Ω`)\n      }\n\n      return hasUpdatedBy\n    } else {\n      console.log('‚ö†Ô∏è Ë≥áÊñôË°®ÁÇ∫Á©∫ÔºåÁÑ°Ê≥ïÈ©óË≠âÊ¨Ñ‰Ωç')\n      return true\n    }\n  } catch (err) {\n    console.error('‚ùå Âü∑Ë°åÈåØË™§:', err.message)\n    return false\n  }\n}\n\nverifyFinalStatus()\n  .then(success => {\n    if (success) {\n      console.log('\\nüéâ Migration È©óË≠âÊàêÂäüÔºÅ')\n      console.log('ÁèæÂú®ÂèØ‰ª•ÈáçÂïüÊáâÁî®Á®ãÂºèÊ∏¨Ë©¶ÂäüËÉΩ„ÄÇ')\n    } else {\n      console.log('\\n‚ö†Ô∏è Migration È©óË≠âÂ§±Êïó')\n    }\n    process.exit(success ? 0 : 1)\n  })\n","usedDeprecatedRules":[]},{"filePath":"/Users/william/Projects/venturo-new/vitest.setup.ts","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-undef').","line":17,"column":1,"severity":1,"nodeType":null,"fix":{"range":[352,388],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'no-undef').","line":21,"column":1,"severity":1,"nodeType":null,"fix":{"range":[457,493],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"import '@testing-library/jest-dom'\nimport { expect, afterEach, vi } from 'vitest'\nimport { cleanup } from '@testing-library/react'\n\n// Cleanup after each test case (e.g., clearing jsdom)\nafterEach(() => {\n  cleanup()\n})\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: vi.fn(),\n  setItem: vi.fn(),\n  removeItem: vi.fn(),\n  clear: vi.fn(),\n}\n// eslint-disable-next-line no-undef\n;(global as any).localStorage = localStorageMock\n\n// Mock IndexedDB\n// eslint-disable-next-line no-undef\n;(global as any).indexedDB = {}\n","usedDeprecatedRules":[]}]