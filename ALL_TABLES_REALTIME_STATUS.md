# Venturo æ‰€æœ‰è³‡æ–™è¡¨ Realtime ç‹€æ…‹åˆ†æ

> **åˆ†ææ—¥æœŸ**: 2025-10-30
> **ç¸½è¡¨æ ¼æ•¸**: 50 å€‹

---

## ğŸ“Š è¡¨æ ¼åˆ†é¡

### âœ… å·²æ”¯æ´ Realtimeï¼ˆä½¿ç”¨ createStoreï¼‰- 20 å€‹

#### æ¥­å‹™å¯¦é«”ï¼ˆ13 å€‹ï¼‰

1. **tours** - æ—…éŠåœ˜ âœ…
2. **orders** - è¨‚å–® âœ…
3. **quotes** - å ±åƒ¹å–® âœ…
4. **customers** - å®¢æˆ¶ âœ…
5. **itineraries** - è¡Œç¨‹è¡¨ âœ… (ä½¿ç”¨ useItineraryStore)
6. **payment_requests** - è«‹æ¬¾å–® âœ…
7. **disbursement_orders** - å‡ºç´å–® âœ…
8. **receipt_orders** - æ”¶æ¬¾å–® âœ…
9. **visas** - ç°½è­‰ âœ…
10. **suppliers** - ä¾›æ‡‰å•† âœ…
11. **regions** - åœ°å€ âœ…
12. **calendar_events** - è¡Œäº‹æ›† âœ…
13. **todos** - å¾…è¾¦äº‹é … âœ…

#### å­å¯¦é«”ï¼ˆ3 å€‹ï¼‰

14. **members** - åœ˜å“¡ âœ…
15. **quote_items** - å ±åƒ¹é …ç›® âœ…
16. **tour_addons** - åŠ è³¼é …ç›® âœ…

#### Workspace ç³»çµ±ï¼ˆ2 å€‹ï¼‰

17. **channels** - é »é“ âœ… (Phase 2)
18. **messages** - è¨Šæ¯ âœ… (Phase 3)

#### å…¶ä»–ï¼ˆ2 å€‹ï¼‰

19. **employees** - å“¡å·¥ âœ…
20. **templates** - ç¯„æœ¬ âœ…

---

### âš ï¸ æœªæ”¯æ´ Realtimeï¼ˆæœªä½¿ç”¨ createStoreï¼‰- 30 å€‹

#### Workspace ç›¸é—œï¼ˆ5 å€‹ï¼‰

1. **workspaces** - å·¥ä½œç©ºé–“
2. **workspace_items** - å·¥ä½œç©ºé–“é …ç›®
3. **channel_groups** - é »é“ç¾¤çµ„
4. **channel_members** - é »é“æˆå“¡
5. **bulletins** - å…¬å‘Š

#### è¨‚å–® & åœ˜å“¡ç›¸é—œï¼ˆ3 å€‹ï¼‰

6. **order_members** - è¨‚å–®åœ˜å“¡
7. **tour_members** - æ—…éŠåœ˜åœ˜å“¡
8. **tour_refunds** - æ—…éŠåœ˜é€€æ¬¾

#### è²¡å‹™ç›¸é—œï¼ˆ10 å€‹ï¼‰

9. **payments** - ä»˜æ¬¾è¨˜éŒ„
10. **receipts** - æ”¶æ¬¾è¨˜éŒ„
11. **receipt_payment_items** - æ”¶æ¬¾é …ç›®
12. **disbursement_requests** - æ”¯å‡ºè«‹æ±‚
13. **payment_request_items** - è«‹æ¬¾é …ç›®
14. **transactions** - äº¤æ˜“è¨˜éŒ„
15. **accounting_entries** - æœƒè¨ˆåˆ†éŒ„
16. **accounts** - æœƒè¨ˆç§‘ç›®
17. **budgets** - é ç®—
18. **categories** - åˆ†é¡

#### å ±åƒ¹ & åƒ¹æ ¼ç›¸é—œï¼ˆ3 å€‹ï¼‰

19. **quote_versions** - å ±åƒ¹ç‰ˆæœ¬
20. **quote_categories** - å ±åƒ¹åˆ†é¡
21. **price_list_items** - åƒ¹ç›®è¡¨

#### é ä»˜æ¬¾ç›¸é—œï¼ˆ2 å€‹ï¼‰

22. **advance_lists** - é ä»˜æ¬¾åˆ—è¡¨
23. **advance_items** - é ä»˜æ¬¾é …ç›®

#### è¨‚å–®åˆ†äº«ï¼ˆ1 å€‹ï¼‰

24. **shared_order_lists** - åˆ†äº«è¨‚å–®åˆ—è¡¨

#### Timebox ç›¸é—œï¼ˆ4 å€‹ï¼‰

25. **timebox_schedules** - Timebox æ’ç¨‹
26. **timebox_weeks** - Timebox é€±
27. **timebox_boxes** - Timebox ç›’å­
28. **timebox_blocks** - Timebox å€å¡Š

#### å…¶ä»–ï¼ˆ2 å€‹ï¼‰

29. **activities** - æ´»å‹•
30. **rich_documents** - å¯Œæ–‡æœ¬æ–‡æª”
31. **personal_canvases** - å€‹äººç•«å¸ƒ
32. **syncqueue** - åŒæ­¥ä½‡åˆ—ï¼ˆç³»çµ±ç”¨ï¼‰

---

## ğŸ¯ å„ªå…ˆç´šåˆ†é¡

### ğŸ”´ é«˜å„ªå…ˆç´šï¼ˆéœ€è¦ç«‹å³æ”¯æ´ Realtimeï¼‰- 10 å€‹

**å¤šäººå”ä½œã€ç¶“å¸¸è®Šæ›´çš„è³‡æ–™**ï¼š

1. **channel_members** - é »é“æˆå“¡ï¼ˆå¤šäººåŠ å…¥/é›¢é–‹ï¼‰
2. **bulletins** - å…¬å‘Šï¼ˆéœ€å³æ™‚æ¨é€ï¼‰
3. **order_members** - è¨‚å–®åœ˜å“¡ï¼ˆå¤šäººç·¨è¼¯ï¼‰
4. **tour_members** - æ—…éŠåœ˜åœ˜å“¡ï¼ˆå¤šäººç·¨è¼¯ï¼‰
5. **payments** - ä»˜æ¬¾è¨˜éŒ„ï¼ˆè²¡å‹™å³æ™‚æ›´æ–°ï¼‰
6. **receipts** - æ”¶æ¬¾è¨˜éŒ„ï¼ˆè²¡å‹™å³æ™‚æ›´æ–°ï¼‰
7. **advance_lists** - é ä»˜æ¬¾åˆ—è¡¨ï¼ˆå¤šäººæŸ¥çœ‹ï¼‰
8. **shared_order_lists** - åˆ†äº«è¨‚å–®åˆ—è¡¨ï¼ˆå¤šäººå”ä½œï¼‰
9. **activities** - æ´»å‹•ï¼ˆè¡Œç¨‹è¦åŠƒï¼‰
10. **workspaces** - å·¥ä½œç©ºé–“ï¼ˆåœ˜éšŠè¨­å®šï¼‰

---

### ğŸŸ¡ ä¸­å„ªå…ˆç´šï¼ˆå»ºè­°æ”¯æ´ Realtimeï¼‰- 12 å€‹

**å¶çˆ¾å¤šäººå­˜å–çš„è³‡æ–™**ï¼š

11. **workspace_items** - å·¥ä½œç©ºé–“é …ç›®
12. **channel_groups** - é »é“ç¾¤çµ„
13. **tour_refunds** - æ—…éŠåœ˜é€€æ¬¾
14. **disbursement_requests** - æ”¯å‡ºè«‹æ±‚
15. **payment_request_items** - è«‹æ¬¾é …ç›®
16. **receipt_payment_items** - æ”¶æ¬¾é …ç›®
17. **transactions** - äº¤æ˜“è¨˜éŒ„
18. **quote_versions** - å ±åƒ¹ç‰ˆæœ¬
19. **quote_categories** - å ±åƒ¹åˆ†é¡
20. **price_list_items** - åƒ¹ç›®è¡¨
21. **advance_items** - é ä»˜æ¬¾é …ç›®
22. **timebox_schedules** - Timebox æ’ç¨‹

---

### ğŸŸ¢ ä½å„ªå…ˆç´šï¼ˆå¯é¸ï¼‰- 8 å€‹

**ç³»çµ±ç”¨æˆ–å€‹äººå°ˆç”¨è³‡æ–™**ï¼š

23. **accounting_entries** - æœƒè¨ˆåˆ†éŒ„ï¼ˆå€‹äººè¨˜å¸³ï¼‰
24. **accounts** - æœƒè¨ˆç§‘ç›®ï¼ˆè¨­å®šé¡ï¼‰
25. **budgets** - é ç®—ï¼ˆè¨­å®šé¡ï¼‰
26. **categories** - åˆ†é¡ï¼ˆè¨­å®šé¡ï¼‰
27. **timebox_weeks** - Timebox é€±
28. **timebox_boxes** - Timebox ç›’å­
29. **timebox_blocks** - Timebox å€å¡Š
30. **rich_documents** - å¯Œæ–‡æœ¬æ–‡æª”
31. **personal_canvases** - å€‹äººç•«å¸ƒ
32. **syncqueue** - åŒæ­¥ä½‡åˆ—ï¼ˆç³»çµ±ç”¨ï¼Œä¸éœ€è¦ï¼‰

---

## ğŸ“ˆ çµ±è¨ˆ

| åˆ†é¡                  | æ•¸é‡   | ç™¾åˆ†æ¯”   |
| --------------------- | ------ | -------- |
| âœ… å·²æ”¯æ´ Realtime    | 20     | 40%      |
| ğŸ”´ é«˜å„ªå…ˆç´šï¼ˆéœ€æ”¯æ´ï¼‰ | 10     | 20%      |
| ğŸŸ¡ ä¸­å„ªå…ˆç´šï¼ˆå»ºè­°ï¼‰   | 12     | 24%      |
| ğŸŸ¢ ä½å„ªå…ˆç´šï¼ˆå¯é¸ï¼‰   | 8      | 16%      |
| **ç¸½è¨ˆ**              | **50** | **100%** |

---

## ğŸš€ å»ºè­°è¡Œå‹•

### Phase 5: é«˜å„ªå…ˆç´šè¡¨æ ¼ï¼ˆ10 å€‹ï¼‰

å»ºè­°å„ªå…ˆæ”¹é€ é€™ 10 å€‹è¡¨æ ¼ï¼š

```typescript
// åœ¨ src/stores/index.ts åŠ å…¥ï¼š

// Workspace ç³»çµ±
export const useWorkspaceItemStore = createStore<WorkspaceItem>('workspace_items')
export const useChannelMemberStore = createStore<ChannelMember>('channel_members')
export const useChannelGroupStore = createStore<ChannelGroup>('channel_groups')
export const useBulletinStore = createStore<Bulletin>('bulletins')

// åœ˜å“¡ç®¡ç†
export const useOrderMemberStore = createStore<OrderMember>('order_members')
export const useTourMemberStore = createStore<TourMember>('tour_members')

// è²¡å‹™å³æ™‚
export const usePaymentStore = createStore<Payment>('payments')
export const useReceiptStore = createStore<Receipt>('receipts')

// å”ä½œåŠŸèƒ½
export const useAdvanceListStore = createStore<AdvanceList>('advance_lists')
export const useSharedOrderListStore = createStore<SharedOrderList>('shared_order_lists')
export const useActivityStore = createStore<Activity>('activities')
```

**é ä¼°å·¥ä½œé‡**: 2-3 å°æ™‚
**å½±éŸ¿**: +10 å€‹è¡¨æ ¼æ”¯æ´ Realtime
**å®Œæˆå¾Œè¦†è“‹ç‡**: 60% (30/50)

---

## ğŸ’¡ å¯¦ä½œæ–¹å¼

### é¸é … Aï¼šä½¿ç”¨ createStoreï¼ˆæ¨è–¦ï¼‰âœ…

**å„ªé»**ï¼š

- è‡ªå‹•ç²å¾— Realtime
- é›¶é¡å¤–ä»£ç¢¼
- çµ±ä¸€æ¶æ§‹

**å¯¦ä½œ**ï¼š

```typescript
export const useChannelMemberStore = createStore<ChannelMember>('channel_members')
```

### é¸é … Bï¼šæ‰‹å‹•åŠ å…¥ Realtime

**é©ç”¨æ–¼**ï¼šæœ‰è¤‡é›œé‚è¼¯çš„ storeï¼ˆå¦‚ manifestation-storeï¼‰

**å¯¦ä½œ**ï¼š

```typescript
// åœ¨ç¾æœ‰ store ä¸­åŠ å…¥
useEffect(() => {
  realtimeManager.subscribe({
    table: 'table_name',
    handlers: { ... }
  });
}, []);
```

---

## âš ï¸ æ³¨æ„äº‹é …

### Realtime é€£ç·šæ•¸é™åˆ¶

```
ç›®å‰: 18 å€‹è¡¨æ ¼ Ã— 40 ä½¿ç”¨è€… = 720 å€‹é€£ç·š
å…è²»ä¸Šé™: 200 å€‹é€£ç·š

å¦‚æœå…¨éƒ¨ 50 å€‹è¡¨æ ¼:
50 Ã— 40 = 2000 å€‹é€£ç·š âš ï¸ è¶…æ¨™ 10 å€
```

### å»ºè­°ç­–ç•¥

1. **æŒ‰éœ€è¨‚é–±** - åªè¨‚é–±ç•¶å‰é é¢ä½¿ç”¨çš„è¡¨æ ¼
2. **å„ªå…ˆç´šè¨‚é–±** - é‡è¦è¡¨æ ¼æ°¸é è¨‚é–±ï¼Œæ¬¡è¦è¡¨æ ¼æŒ‰éœ€
3. **å»¶é²è¨‚é–±** - é é¢è¼‰å…¥å¾Œæ‰è¨‚é–±
4. **å–æ¶ˆè¨‚é–±** - é›¢é–‹é é¢æ™‚å–æ¶ˆ

---

## ğŸ¯ çµè«–

ä½ èªªå¾—å°ï¼ä¸åª 18 å€‹è¡¨æ ¼ï¼Œè€Œæ˜¯ **50 å€‹è¡¨æ ¼**ã€‚

ç›®å‰ç‹€æ…‹ï¼š

- âœ… **20 å€‹è¡¨æ ¼**å·²æ”¯æ´ Realtimeï¼ˆ40%ï¼‰
- âš ï¸ **30 å€‹è¡¨æ ¼**å°šæœªæ”¯æ´ï¼ˆ60%ï¼‰

å»ºè­°ï¼š

1. å„ªå…ˆå®Œæˆ **10 å€‹é«˜å„ªå…ˆç´šè¡¨æ ¼**ï¼ˆPhase 5ï¼‰
2. é€æ­¥åŠ å…¥ **12 å€‹ä¸­å„ªå…ˆç´šè¡¨æ ¼**ï¼ˆPhase 6ï¼‰
3. ä½å„ªå…ˆç´šè¡¨æ ¼å¯ä»¥æš«ç·©

**æº–å‚™é–‹å§‹ Phase 5 å—ï¼Ÿ** ğŸš€
