const { createClient } = require('@supabase/supabase-js');

const supabaseUrl = 'https://pfqvdacxowpgfamuvnsn.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBmcXZkYWN4b3dwZ2ZhbXV2bnNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMDgzMjAsImV4cCI6MjA3NDY4NDMyMH0.LIMG0qmHixTPcbdzJrh4h0yTp8mh3FlggeZ6Bi_NwtI';
const supabase = createClient(supabaseUrl, supabaseKey);

// å¯¦éš›çš„å°ç£æ™¯é»
const taiwanAttractions = [
  { name: 'é™½æ˜å±±åœ‹å®¶å…¬åœ’', notes: 'å°åŒ—è¿‘éƒŠçš„ç«å±±åœ°è³ªå…¬åœ’ï¼Œä»¥æº«æ³‰ã€ç¡«ç£ºå™´æ°£å­”ã€æœéµ‘èŠ±èåã€‚æ˜¥å¤©èŠ±å­£æ™‚æ»¿å±±éé‡çš„æœéµ‘å’Œæ«»èŠ±ï¼Œç§‹å¤©çš„èŠ’èŠ±ä¹Ÿå¾ˆå£¯è§€ã€‚å°æ²¹å‘çš„ç¡«ç£ºå™´æ°£æ˜¯å¿…è¨ªæ™¯é»ã€‚', duration: 240, tags: ['åœ‹å®¶å…¬åœ’', 'æº«æ³‰', 'èŠ±å­£', 'å¥è¡Œ', 'è‡ªç„¶'] },
  { name: 'é™½æ˜å±±', notes: 'å°åŒ—å¸‚æ°‘çš„å¾ŒèŠ±åœ’ï¼Œæ“æœ‰è±å¯Œçš„ç«å±±åœ°å½¢å’Œæº«æ³‰è³‡æºã€‚ç«¹å­æ¹–çš„æµ·èŠ‹èŠ±å­£ã€æ“å¤©å´—çš„è‰åŸã€å†·æ°´å‘çš„æº«æ³‰éƒ½æ˜¯ç†±é–€æ™¯é»ã€‚å¤œæ™šå¯ä¿¯ç°å°åŒ—å¤œæ™¯ã€‚', duration: 180, tags: ['å±±', 'æº«æ³‰', 'èŠ±å­£', 'å¤œæ™¯', 'å¥è¡Œ'] },
  { name: 'å°æ²¹å‘', notes: 'é™½æ˜å±±åœ‹å®¶å…¬åœ’å…§æœ€è‘—åçš„ç«å±±åœ°ç†±æ™¯è§€ï¼Œç¡«ç£ºè’¸æ°£å¾åœ°åº•å™´å‡ºï¼Œç…™éœ§ç¹šç¹ã€‚ç©ºæ°£ä¸­ç€°æ¼«ç¡«ç£ºå‘³ï¼ŒçŒ¶å¦‚ç½®èº«å¤–æ˜Ÿçƒã€‚æœ‰å®Œå–„çš„æ­¥é“å’Œè§€æ™¯å°ã€‚', duration: 60, tags: ['ç«å±±', 'åœ°ç†±', 'ç¡«ç£º', 'è‡ªç„¶å¥‡è§€', 'é™½æ˜å±±'] },
  { name: 'æ·¡æ°´', notes: 'å°åŒ—è¿‘éƒŠçš„æ²³æ¸¯å°é®ï¼Œä»¥æ·¡æ°´è€è¡—ã€æ¼äººç¢¼é ­çš„å¤•é™½èåã€‚ç´…æ¯›åŸã€çœŸç†å¤§å­¸æ˜¯å¤è¹Ÿå·¡ç¦®å¿…è¨ªã€‚é˜¿çµ¦ã€é­šä¸¸ã€éµè›‹æ˜¯ç•¶åœ°åç‰©ã€‚', duration: 180, tags: ['è€è¡—', 'å¤•é™½', 'å¤è¹Ÿ', 'å°åƒ', 'æ²³å²¸'] },
  { name: 'æ±åŒ—è§’', notes: 'å°ç£åŒ—éƒ¨æµ·å²¸ç·šçš„ç²¾è¯ï¼Œæ“æœ‰å¥‡ç‰¹çš„æµ·è•åœ°å½¢å’Œç¾éº—æ²™ç˜ã€‚é¾æ´æ˜¯æµ®æ½›è–åœ°ï¼Œå—é›…å¥‡å²©çš„é€ å‹ç¨ç‰¹ï¼Œé»ƒé‡‘ç€‘å¸ƒæ˜¯å»¢ç…™é“éºè·¡å½¢æˆçš„æ™¯è§€ã€‚', duration: 300, tags: ['æµ·å²¸', 'åœ°è³ª', 'æµ®æ½›', 'æµ·æ™¯', 'è‡ªç„¶'] },
  { name: 'æ±åŒ—è§’æµ·å²¸', notes: 'å¾ç‘èŠ³åˆ°å®œè˜­çš„æµ·å²¸é¢¨æ™¯å€ï¼Œæ²¿é€”æœ‰å—é›…å¥‡å²©ã€é™°é™½æµ·ã€é‡‘ç“œçŸ³ã€ä¹ä»½ç­‰æ™¯é»ã€‚æµ·è•åœ°å½¢å¤šè®Šï¼Œæ˜¯åœ°è³ªæ„›å¥½è€…çš„å¤©å ‚ã€‚', duration: 360, tags: ['æµ·å²¸', 'å…¬è·¯', 'åœ°è³ª', 'é¢¨æ™¯å€', 'åŒ—éƒ¨'] },
  { name: 'ç¦éš†', notes: 'æ±åŒ—è§’æœ€çŸ¥åçš„æ²™ç˜ï¼Œæ¯å¹´å¤å¤©èˆ‰è¾¦æµ·æ´‹éŸ³æ¨‚ç¥­ã€‚é›™æºªæ²³å£å½¢æˆçš„æ²™å˜´åœ°å½¢ç¨ç‰¹ï¼Œå¯ç§Ÿå€Ÿç¨æœ¨èˆŸæˆ–SUPã€‚ç¦éš†ä¾¿ç•¶æ˜¯ç•¶åœ°å¿…åƒã€‚', duration: 240, tags: ['æµ·ç˜', 'éŸ³æ¨‚ç¥­', 'æˆ²æ°´', 'ä¾¿ç•¶', 'å¤å¤©'] },
  { name: 'ç¦éš†æµ·æ°´æµ´å ´', notes: 'åŒ—å°ç£æœ€è‘—åçš„æµ·æ°´æµ´å ´ï¼Œé‡‘é»ƒè‰²çš„æ²™ç˜å»¶ç¶¿ç´„ä¸‰å…¬é‡Œã€‚å¤å­£èˆ‰è¾¦åœ‹éš›æ²™é›•è—è¡“å­£ï¼Œå„åœ‹è—è¡“å®¶çš„æ²™é›•ä½œå“ä»¤äººé©šå˜†ã€‚', duration: 180, tags: ['æµ·ç˜', 'æ²™é›•', 'æˆ²æ°´', 'å¤å¤©', 'è¦ªå­'] },
  { name: 'é‡‘å±±è€è¡—', notes: 'åŒ—æµ·å²¸è‘—åçš„è€è¡—ï¼Œä»¥é‡‘å±±é´¨è‚‰å’Œé‡‘åŒ…é‡Œæº«æ³‰èåã€‚å»Ÿå£çš„å»£å®‰å®®å‰æœ‰å„ç¨®å°åƒæ”¤ï¼ŒèŠ‹åœ“ã€è‚‰ç²½éƒ½å¾ˆå—æ­¡è¿ã€‚é™„è¿‘æœ‰ç…é ­å±±å…¬åœ’å¯å¥è¡Œã€‚', duration: 120, tags: ['è€è¡—', 'å°åƒ', 'é´¨è‚‰', 'æº«æ³‰', 'åŒ—æµ·å²¸'] },
  { name: 'è€è¡—å»Ÿå£', notes: 'é‡‘å±±è€è¡—çš„ä¸­å¿ƒåœ°å¸¶ï¼Œå»£å®‰å®®å‰èšé›†å„ç¨®å‚³çµ±å°åƒã€‚é‡‘å±±é´¨è‚‰æ”¤æœ€ç‚ºæœ‰åï¼ŒéŠå®¢è‡ªè¡Œç«¯ç›¤å­æ‰¾ä½å­æ˜¯ç‰¹è‰²ã€‚å‘¨æœ«å‡æ—¥äººæ½®çœ¾å¤šã€‚', duration: 90, tags: ['å»Ÿå£', 'å°åƒ', 'é´¨è‚‰', 'å‚³çµ±', 'ç†±é¬§'] },
  { name: 'æ³•é¼“å±±', notes: 'è–åš´æ³•å¸«å‰µè¾¦çš„ä½›æ•™é“å ´ï¼Œå»ºç¯‰èåˆç¾ä»£èˆ‡ç¦ªæ„ã€‚å±±ä¸Šç’°å¢ƒæ¸…å¹½ï¼Œæœ‰å¤§æ®¿ã€ç¦ªå ‚å’Œä½›æ•™è—è¡“é¤¨ã€‚æä¾›ç¦ªä¿®é«”é©—ï¼Œé©åˆéœå¿ƒæ²‰æ¾±ã€‚', duration: 150, tags: ['ä½›æ•™', 'ç¦ªä¿®', 'å»ºç¯‰', 'éœå¿ƒ', 'é“å ´'] },
  { name: 'ç¦å®¹å¤§é£¯åº—', notes: 'åŒ—æµ·å²¸çš„äº”æ˜Ÿç´šåº¦å‡é£¯åº—ï¼Œæœ‰å®¤å…§å¤–æº«æ³‰å’Œç„¡é‚Šéš›æ³³æ± ã€‚åæ“æµ·æ™¯è¦–é‡ï¼Œé¤é£²é¸æ“‡å¤šå…ƒã€‚æ˜¯åŒ—æµ·å²¸åº¦å‡çš„ç†±é–€é¸æ“‡ã€‚', duration: 480, tags: ['é£¯åº—', 'åº¦å‡æ‘', 'æº«æ³‰', 'æµ·æ™¯', 'ä½å®¿'] }
];

// å¯¦éš›çš„é¦™æ¸¯æ™¯é»
const hongKongAttractions = [
  { name: 'æ˜‚åª360', notes: 'é€£æ¥æ±æ¶Œå’Œå¤§å¶¼å±±æ˜‚åªçš„çºœè»Šç³»çµ±ï¼Œå…¨ç¨‹ç´„25åˆ†é˜ã€‚æ°´æ™¶è»Šå»‚åœ°æ¿é€æ˜ï¼Œå¯ä¿¯ç°æ©Ÿå ´ã€æ¸¯ç æ¾³å¤§æ©‹å’Œå—ä¸­åœ‹æµ·ã€‚çµ‚é»ç«™æœ‰æ˜‚åªå¸‚é›†å’Œå¤©å£‡å¤§ä½›ã€‚', duration: 180, tags: ['çºœè»Š', 'å¤§å¶¼å±±', 'æ™¯è§€', 'å¤©å£‡å¤§ä½›', 'å¿…å»'] },
  { name: 'æ–‡æ­¦å»Ÿ', notes: 'å»ºæ–¼1847å¹´çš„é¦™æ¸¯æœ€å¤è€å»Ÿå®‡ä¹‹ä¸€ï¼Œä¾›å¥‰æ–‡æ˜Œå¸å›å’Œé—œè–å¸å›ã€‚å»Ÿå…§å¸¸å¹´æ‡¸æ›å¤§å‹å¡”é¦™ï¼Œé¦™ç…™ç¹šç¹æ¥µå…·æ°›åœã€‚ä½æ–¼ä¸Šç’°è·ææ´»é“ï¼Œæ˜¯äº†è§£é¦™æ¸¯æ­·å²çš„å¥½åœ°æ–¹ã€‚', duration: 45, tags: ['å»Ÿå®‡', 'æ­·å²', 'å¤è¹Ÿ', 'ä¸Šç’°', 'å¡”é¦™'] }
];

async function updateAttractions(countryId, attractions, countryName) {
  console.log(`\nğŸ”„ æ­£åœ¨æ›´æ–° ${countryName} æ™¯é»æ·±åº¦è³‡æ–™...`);
  let successCount = 0;

  for (const attraction of attractions) {
    const { data, error } = await supabase
      .from('attractions')
      .update({
        notes: attraction.notes,
        duration_minutes: attraction.duration,
        tags: attraction.tags
      })
      .eq('country_id', countryId)
      .ilike('name', attraction.name)
      .select();

    if (!error && data && data.length > 0) {
      console.log(`  âœ… ${attraction.name}`);
      successCount++;
    } else if (data && data.length === 0) {
      console.log(`  âš ï¸ ${attraction.name} (æœªæ‰¾åˆ°)`);
    } else {
      console.log(`  âŒ ${attraction.name}: ${error?.message || 'æœªçŸ¥éŒ¯èª¤'}`);
    }
  }

  return successCount;
}

async function main() {
  console.log('========================================');
  console.log('å°ç£ + é¦™æ¸¯ æ™¯é»å„ªåŒ–');
  console.log('========================================');

  const results = {};

  // å°ç£
  results['å°ç£'] = await updateAttractions('taiwan-country-001', taiwanAttractions, 'å°ç£');

  // é¦™æ¸¯
  results['é¦™æ¸¯'] = await updateAttractions('hong-kong', hongKongAttractions, 'é¦™æ¸¯');

  // çµ±è¨ˆ
  console.log('\nğŸ“Š æ›´æ–°çµ±è¨ˆ:');
  let total = 0;
  for (const [country, count] of Object.entries(results)) {
    console.log(`  ${country}: ${count} ç­†`);
    total += count;
  }
  console.log(`  ç¸½è¨ˆ: ${total} ç­†`);

  console.log('\nâœ… å„ªåŒ–å®Œæˆï¼');
}

main();
